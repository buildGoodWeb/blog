<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/blog/commons.f933939570d27fef2133.css">.theme-light{background-color:#f4f5f5}.theme-dark,.theme-light{-webkit-transition:.5s;transition:.5s;min-height:100vh}.theme-dark{background-color:#181818}svg{display:inline-block;stroke-width:0;stroke:currentColor;fill:currentColor;pointer-events:none}.layout{margin:0 auto;max-width:56rem;padding:3rem 1.5rem}.theme-light .layout{color:#555}.theme-dark .layout{color:#fff}.layout header{display:flex;align-items:baseline;justify-content:space-between}.layout .toggle{line-height:1;display:inline-block;cursor:pointer}.layout .toggle:hover{color:#0078e7}.layout.post ul li{line-height:1.75}.layout.post img{border-radius:5px;position:absolute;top:0}@media (min-width:768px){.layout table td,.layout table th{padding:12px 24px}}@media (max-width:768px){.layout body{font-size:12px}.layout table td,.layout table th{padding:8px 4px;word-break:break-all}}.layout table{width:100%;margin:8px 0 16px}.layout table th{color:#5c6b77;font-weight:500;white-space:nowrap;background:rgba(0,0,0,.02);border:1px solid #ebedf0}.layout table td{text-align:left;border:1px solid #ebedf0}</style><style data-href="/blog/styles.2d5671466d9414184026.css">.node{cursor:pointer}.node circle{fill:#4682b4;stroke:#000}.link{fill:none;stroke:#ccc;stroke-width:1px}.playground{font-size:13px;border-radius:4px;padding:5px;color:#fff}.playground .container{width:100%;border:1px solid #ccc;margin-bottom:8px}.playground .item{border:1px dotted #ccc;margin:8px}.playground .margin4{margin-right:4px}.playground.show{background-color:#234361}.playground-error{background-color:#f24542;border-radius:4px}.playground-error pre{padding:15px;background-color:transparent;border:0;color:inherit}.playground-view{background-color:#fff;border-radius:3px;color:#66788a;margin:4px;padding:16px;border:1px solid #ccc;display:flex;justify-content:space-between}.playground-view>div{width:90%}.playground-view>button{opacity:0;align-self:flex-end;-webkit-transition:opacity .3s ease;transition:opacity .3s ease}.heading:hover .anchor,.playground-view:hover button{opacity:1}.heading .anchor{margin-left:8px;opacity:0;-webkit-transition:opacity .3s ease;transition:opacity .3s ease;text-decoration:none}.main-toc{position:fixed;right:.5rem;top:4rem;margin-top:25px;padding-left:15px}.main-toc>div{line-height:2;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.main-toc--li2{font-size:14px}.main-toc--li3{font-size:12px;padding-left:10px}.main-toc--li4{font-size:12px;padding-left:20px}.main-toc a{text-decoration:none}.theme-light .main-toc a{color:#555}.theme-dark .main-toc a{color:#fff}.main-toc a.current,.main-toc a:hover{color:#337ab7}@media (min-width:900px){.main-toc{width:12rem}}@media (max-width:900px){.main-toc{position:static}}.bio{display:flex;margin-bottom:2rem}.bio img{margin-bottom:0;margin-right:2rem;min-width:50px;border-radius:50%}

/*!
Pure v1.0.1
Copyright 2013 Yahoo!
Licensed under the BSD License.
https://github.com/pure-css/pure/blob/master/LICENSE.md
*/
/*!
normalize.css v^3.0 | MIT License | git.io/normalize
Copyright (c) Nicolas Gallagher and Jonathan Neal
*/
/*! normalize.css v3.0.3 | MIT License | github.com/necolas/normalize.css */html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,hgroup,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block;vertical-align:baseline}audio:not([controls]){display:none;height:0}[hidden],template{display:none}a{background-color:transparent}a:active,a:hover{outline:0}abbr[title]{border-bottom:1px dotted}b,strong{font-weight:700}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sup{top:-.5em}sub{bottom:-.25em}img{border:0}svg:not(:root){overflow:hidden}figure{margin:1em 40px}hr{box-sizing:content-box;height:0}pre{overflow:auto}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}button,input,optgroup,select,textarea{color:inherit;font:inherit;margin:0}button{overflow:visible}button,select{text-transform:none}button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}button[disabled],html input[disabled]{cursor:default}button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}input{line-height:normal}input[type=checkbox],input[type=radio]{box-sizing:border-box;padding:0}input[type=number]::-webkit-inner-spin-button,input[type=number]::-webkit-outer-spin-button{height:auto}input[type=search]{-webkit-appearance:textfield;box-sizing:content-box}input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-decoration{-webkit-appearance:none}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{border:0;padding:0}textarea{overflow:auto}optgroup{font-weight:700}table{border-collapse:collapse;border-spacing:0}td,th{padding:0}.hidden,[hidden]{display:none!important}.pure-img{max-width:100%;height:auto;display:block}.pure-g{letter-spacing:-.31em;text-rendering:optimizespeed;font-family:FreeSans,Arimo,Droid Sans,Helvetica,Arial,sans-serif;display:flex;flex-flow:row wrap;align-content:flex-start}@media (-ms-high-contrast:active),(-ms-high-contrast:none){table .pure-g{display:block}}.opera-only :-o-prefocus,.pure-g{word-spacing:-.43em}.pure-u{display:inline-block;zoom:1;letter-spacing:normal;word-spacing:normal;vertical-align:top;text-rendering:auto}.pure-g [class*=pure-u]{font-family:sans-serif}.pure-u-1,.pure-u-1-1,.pure-u-1-2,.pure-u-1-3,.pure-u-1-4,.pure-u-1-5,.pure-u-1-6,.pure-u-1-8,.pure-u-1-12,.pure-u-1-24,.pure-u-2-3,.pure-u-2-5,.pure-u-2-24,.pure-u-3-4,.pure-u-3-5,.pure-u-3-8,.pure-u-3-24,.pure-u-4-5,.pure-u-4-24,.pure-u-5-5,.pure-u-5-6,.pure-u-5-8,.pure-u-5-12,.pure-u-5-24,.pure-u-6-24,.pure-u-7-8,.pure-u-7-12,.pure-u-7-24,.pure-u-8-24,.pure-u-9-24,.pure-u-10-24,.pure-u-11-12,.pure-u-11-24,.pure-u-12-24,.pure-u-13-24,.pure-u-14-24,.pure-u-15-24,.pure-u-16-24,.pure-u-17-24,.pure-u-18-24,.pure-u-19-24,.pure-u-20-24,.pure-u-21-24,.pure-u-22-24,.pure-u-23-24,.pure-u-24-24{display:inline-block;zoom:1;letter-spacing:normal;word-spacing:normal;vertical-align:top;text-rendering:auto}.pure-u-1-24{width:4.1667%}.pure-u-1-12,.pure-u-2-24{width:8.3333%}.pure-u-1-8,.pure-u-3-24{width:12.5%}.pure-u-1-6,.pure-u-4-24{width:16.6667%}.pure-u-1-5{width:20%}.pure-u-5-24{width:20.8333%}.pure-u-1-4,.pure-u-6-24{width:25%}.pure-u-7-24{width:29.1667%}.pure-u-1-3,.pure-u-8-24{width:33.3333%}.pure-u-3-8,.pure-u-9-24{width:37.5%}.pure-u-2-5{width:40%}.pure-u-5-12,.pure-u-10-24{width:41.6667%}.pure-u-11-24{width:45.8333%}.pure-u-1-2,.pure-u-12-24{width:50%}.pure-u-13-24{width:54.1667%}.pure-u-7-12,.pure-u-14-24{width:58.3333%}.pure-u-3-5{width:60%}.pure-u-5-8,.pure-u-15-24{width:62.5%}.pure-u-2-3,.pure-u-16-24{width:66.6667%}.pure-u-17-24{width:70.8333%}.pure-u-3-4,.pure-u-18-24{width:75%}.pure-u-19-24{width:79.1667%}.pure-u-4-5{width:80%}.pure-u-5-6,.pure-u-20-24{width:83.3333%}.pure-u-7-8,.pure-u-21-24{width:87.5%}.pure-u-11-12,.pure-u-22-24{width:91.6667%}.pure-u-23-24{width:95.8333%}.pure-u-1,.pure-u-1-1,.pure-u-5-5,.pure-u-24-24{width:100%}.pure-button{display:inline-block;zoom:1;line-height:normal;white-space:nowrap;vertical-align:middle;text-align:center;cursor:pointer;-webkit-user-drag:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;box-sizing:border-box}.pure-button::-moz-focus-inner{padding:0;border:0}.pure-button-group{letter-spacing:-.31em;text-rendering:optimizespeed}.opera-only :-o-prefocus,.pure-button-group{word-spacing:-.43em}.pure-button-group .pure-button{letter-spacing:normal;word-spacing:normal;vertical-align:top;text-rendering:auto}.pure-button{font-family:inherit;font-size:100%;padding:.5em 1em;color:#444;color:rgba(0,0,0,.8);border:transparent;background-color:#e6e6e6;text-decoration:none;border-radius:2px}.pure-button-hover,.pure-button:focus,.pure-button:hover{background-image:-webkit-gradient(linear,left top,left bottom,from(transparent),color-stop(40%,rgba(0,0,0,.05)),to(rgba(0,0,0,.1)));background-image:linear-gradient(transparent,rgba(0,0,0,.05) 40%,rgba(0,0,0,.1))}.pure-button:focus{outline:0}.pure-button-active,.pure-button:active{box-shadow:inset 0 0 0 1px rgba(0,0,0,.15),inset 0 0 6px rgba(0,0,0,.2);border-color:#000}.pure-button-disabled,.pure-button-disabled:active,.pure-button-disabled:focus,.pure-button-disabled:hover,.pure-button[disabled]{border:none;background-image:none;opacity:.4;cursor:not-allowed;box-shadow:none;pointer-events:none}.pure-button-hidden{display:none}.pure-button-primary,.pure-button-selected,a.pure-button-primary,a.pure-button-selected{background-color:#0078e7;color:#fff}.pure-button-group .pure-button{margin:0;border-radius:0;border-right:1px solid #111;border-right:1px solid rgba(0,0,0,.2)}.pure-button-group .pure-button:first-child{border-top-left-radius:2px;border-bottom-left-radius:2px}.pure-button-group .pure-button:last-child{border-top-right-radius:2px;border-bottom-right-radius:2px;border-right:none}.pure-form input[type=color],.pure-form input[type=date],.pure-form input[type=datetime-local],.pure-form input[type=datetime],.pure-form input[type=email],.pure-form input[type=month],.pure-form input[type=number],.pure-form input[type=password],.pure-form input[type=search],.pure-form input[type=tel],.pure-form input[type=text],.pure-form input[type=time],.pure-form input[type=url],.pure-form input[type=week],.pure-form select,.pure-form textarea{padding:.5em .6em;display:inline-block;border:1px solid #ccc;box-shadow:inset 0 1px 3px #ddd;border-radius:4px;vertical-align:middle;box-sizing:border-box}.pure-form input:not([type]){padding:.5em .6em;display:inline-block;border:1px solid #ccc;box-shadow:inset 0 1px 3px #ddd;border-radius:4px;box-sizing:border-box}.pure-form input[type=color]{padding:.2em .5em}.pure-form input:not([type]):focus,.pure-form input[type=color]:focus,.pure-form input[type=date]:focus,.pure-form input[type=datetime-local]:focus,.pure-form input[type=datetime]:focus,.pure-form input[type=email]:focus,.pure-form input[type=month]:focus,.pure-form input[type=number]:focus,.pure-form input[type=password]:focus,.pure-form input[type=search]:focus,.pure-form input[type=tel]:focus,.pure-form input[type=text]:focus,.pure-form input[type=time]:focus,.pure-form input[type=url]:focus,.pure-form input[type=week]:focus,.pure-form select:focus,.pure-form textarea:focus{outline:0;border-color:#129fea}.pure-form input[type=checkbox]:focus,.pure-form input[type=file]:focus,.pure-form input[type=radio]:focus{outline:thin solid #129fea;outline:1px auto #129fea}.pure-form .pure-checkbox,.pure-form .pure-radio{margin:.5em 0;display:block}.pure-form input:not([type])[disabled],.pure-form input[type=color][disabled],.pure-form input[type=date][disabled],.pure-form input[type=datetime-local][disabled],.pure-form input[type=datetime][disabled],.pure-form input[type=email][disabled],.pure-form input[type=month][disabled],.pure-form input[type=number][disabled],.pure-form input[type=password][disabled],.pure-form input[type=search][disabled],.pure-form input[type=tel][disabled],.pure-form input[type=text][disabled],.pure-form input[type=time][disabled],.pure-form input[type=url][disabled],.pure-form input[type=week][disabled],.pure-form select[disabled],.pure-form textarea[disabled]{cursor:not-allowed;background-color:#eaeded;color:#cad2d3}.pure-form input[readonly],.pure-form select[readonly],.pure-form textarea[readonly]{background-color:#eee;color:#777;border-color:#ccc}.pure-form input:focus:invalid,.pure-form select:focus:invalid,.pure-form textarea:focus:invalid{color:#b94a48;border-color:#e9322d}.pure-form input[type=checkbox]:focus:invalid:focus,.pure-form input[type=file]:focus:invalid:focus,.pure-form input[type=radio]:focus:invalid:focus{outline-color:#e9322d}.pure-form select{height:2.25em;border:1px solid #ccc;background-color:#fff}.pure-form select[multiple]{height:auto}.pure-form label{margin:.5em 0 .2em}.pure-form fieldset{margin:0;padding:.35em 0 .75em;border:0}.pure-form legend{display:block;width:100%;padding:.3em 0;margin-bottom:.3em;color:#333;border-bottom:1px solid #e5e5e5}.pure-form-stacked input:not([type]),.pure-form-stacked input[type=color],.pure-form-stacked input[type=date],.pure-form-stacked input[type=datetime-local],.pure-form-stacked input[type=datetime],.pure-form-stacked input[type=email],.pure-form-stacked input[type=file],.pure-form-stacked input[type=month],.pure-form-stacked input[type=number],.pure-form-stacked input[type=password],.pure-form-stacked input[type=search],.pure-form-stacked input[type=tel],.pure-form-stacked input[type=text],.pure-form-stacked input[type=time],.pure-form-stacked input[type=url],.pure-form-stacked input[type=week],.pure-form-stacked label,.pure-form-stacked select,.pure-form-stacked textarea{display:block;margin:.25em 0}.pure-form-aligned .pure-help-inline,.pure-form-aligned input,.pure-form-aligned select,.pure-form-aligned textarea,.pure-form-message-inline{display:inline-block;vertical-align:middle}.pure-form-aligned textarea{vertical-align:top}.pure-form-aligned .pure-control-group{margin-bottom:.5em}.pure-form-aligned .pure-control-group label{text-align:right;display:inline-block;vertical-align:middle;width:10em;margin:0 1em 0 0}.pure-form-aligned .pure-controls{margin:1.5em 0 0 11em}.pure-form .pure-input-rounded,.pure-form input.pure-input-rounded{border-radius:2em;padding:.5em 1em}.pure-form .pure-group fieldset{margin-bottom:10px}.pure-form .pure-group input,.pure-form .pure-group textarea{display:block;padding:10px;margin:0 0 -1px;border-radius:0;position:relative;top:-1px}.pure-form .pure-group input:focus,.pure-form .pure-group textarea:focus{z-index:3}.pure-form .pure-group input:first-child,.pure-form .pure-group textarea:first-child{top:1px;border-radius:4px 4px 0 0;margin:0}.pure-form .pure-group input:first-child:last-child,.pure-form .pure-group textarea:first-child:last-child{top:1px;border-radius:4px;margin:0}.pure-form .pure-group input:last-child,.pure-form .pure-group textarea:last-child{top:-2px;border-radius:0 0 4px 4px;margin:0}.pure-form .pure-group button{margin:.35em 0}.pure-form .pure-input-1{width:100%}.pure-form .pure-input-3-4{width:75%}.pure-form .pure-input-2-3{width:66%}.pure-form .pure-input-1-2{width:50%}.pure-form .pure-input-1-3{width:33%}.pure-form .pure-input-1-4{width:25%}.pure-form-message-inline,.pure-form .pure-help-inline{display:inline-block;padding-left:.3em;color:#666;vertical-align:middle;font-size:.875em}.pure-form-message{display:block;color:#666;font-size:.875em}@media only screen and (max-width:480px){.pure-form button[type=submit]{margin:.7em 0 0}.pure-form input:not([type]),.pure-form input[type=color],.pure-form input[type=date],.pure-form input[type=datetime-local],.pure-form input[type=datetime],.pure-form input[type=email],.pure-form input[type=month],.pure-form input[type=number],.pure-form input[type=password],.pure-form input[type=search],.pure-form input[type=tel],.pure-form input[type=text],.pure-form input[type=time],.pure-form input[type=url],.pure-form input[type=week],.pure-form label{margin-bottom:.3em;display:block}.pure-group input:not([type]),.pure-group input[type=color],.pure-group input[type=date],.pure-group input[type=datetime-local],.pure-group input[type=datetime],.pure-group input[type=email],.pure-group input[type=month],.pure-group input[type=number],.pure-group input[type=password],.pure-group input[type=search],.pure-group input[type=tel],.pure-group input[type=text],.pure-group input[type=time],.pure-group input[type=url],.pure-group input[type=week]{margin-bottom:0}.pure-form-aligned .pure-control-group label{margin-bottom:.3em;text-align:left;display:block;width:100%}.pure-form-aligned .pure-controls{margin:1.5em 0 0}.pure-form-message,.pure-form-message-inline,.pure-form .pure-help-inline{display:block;font-size:.75em;padding:.2em 0 .8em}}.pure-menu{box-sizing:border-box}.pure-menu-fixed{position:fixed;left:0;top:0;z-index:3}.pure-menu-item,.pure-menu-list{position:relative}.pure-menu-list{list-style:none;margin:0;padding:0}.pure-menu-item{padding:0;margin:0;height:100%}.pure-menu-heading,.pure-menu-link{display:block;text-decoration:none;white-space:nowrap}.pure-menu-horizontal{width:100%;white-space:nowrap}.pure-menu-horizontal .pure-menu-list{display:inline-block}.pure-menu-horizontal .pure-menu-heading,.pure-menu-horizontal .pure-menu-item,.pure-menu-horizontal .pure-menu-separator{display:inline-block;zoom:1;vertical-align:middle}.pure-menu-item .pure-menu-item{display:block}.pure-menu-children{display:none;position:absolute;left:100%;top:0;margin:0;padding:0;z-index:3}.pure-menu-horizontal .pure-menu-children{left:0;top:auto;width:inherit}.pure-menu-active>.pure-menu-children,.pure-menu-allow-hover:hover>.pure-menu-children{display:block;position:absolute}.pure-menu-has-children>.pure-menu-link:after{padding-left:.5em;content:"\25B8";font-size:small}.pure-menu-horizontal .pure-menu-has-children>.pure-menu-link:after{content:"\25BE"}.pure-menu-scrollable{overflow-y:scroll;overflow-x:hidden}.pure-menu-scrollable .pure-menu-list{display:block}.pure-menu-horizontal.pure-menu-scrollable .pure-menu-list{display:inline-block}.pure-menu-horizontal.pure-menu-scrollable{white-space:nowrap;overflow-y:hidden;overflow-x:auto;-webkit-overflow-scrolling:touch;padding:.5em 0}.pure-menu-horizontal .pure-menu-children .pure-menu-separator,.pure-menu-separator{background-color:#ccc;height:1px;margin:.3em 0}.pure-menu-horizontal .pure-menu-separator{width:1px;height:1.3em;margin:0 .3em}.pure-menu-horizontal .pure-menu-children .pure-menu-separator{display:block;width:auto}.pure-menu-heading{text-transform:uppercase;color:#565d64}.pure-menu-link{color:#777}.pure-menu-children{background-color:#fff}.pure-menu-disabled,.pure-menu-heading,.pure-menu-link{padding:.5em 1em}.pure-menu-disabled{opacity:.5}.pure-menu-disabled .pure-menu-link:hover{background-color:transparent}.pure-menu-active>.pure-menu-link,.pure-menu-link:focus,.pure-menu-link:hover{background-color:#eee}.pure-menu-selected>.pure-menu-link,.pure-menu-selected>.pure-menu-link:visited{color:#000}.pure-table{border-collapse:collapse;border-spacing:0;empty-cells:show;border:1px solid #cbcbcb}.pure-table caption{color:#000;font:italic 85%/1 arial,sans-serif;padding:1em 0;text-align:center}.pure-table td,.pure-table th{border-left:1px solid #cbcbcb;border-bottom-width:0;border-right-width:0;border-top-width:0;font-size:inherit;margin:0;overflow:visible;padding:.5em 1em}.pure-table thead{background-color:#e0e0e0;color:#000;text-align:left;vertical-align:bottom}.pure-table td{background-color:transparent}.pure-table-odd td,.pure-table-striped tr:nth-child(2n-1) td{background-color:#f2f2f2}.pure-table-bordered td{border-bottom:1px solid #cbcbcb}.pure-table-bordered tbody>tr:last-child>td{border-bottom-width:0}.pure-table-horizontal td,.pure-table-horizontal th{border-width:0 0 1px;border-bottom:1px solid #cbcbcb}.pure-table-horizontal tbody>tr:last-child>td{border-bottom-width:0}body,html{font-size:15px;font-family:Helvetica Neue,Helvetica,PingFang SC,Arial,Microsoft YaHei,"\5FAE\8F6F\96C5\9ED1"}.pre{border-radius:4px;margin-bottom:10px}a{color:#0078e7;text-decoration:none}a:hover{opacity:.9}code{font-size:87.5%;color:#e83e8c;word-break:break-word}details{margin:15px 0;cursor:pointer}details summary:focus,details summary:hover{color:#337ab7;outline:none}.post h2:before,.post h3:before{display:block;height:1rem;margin-top:-1rem;visibility:hidden;content:""}.post h1 span{font-size:14px;padding-left:10px;color:#bbb}.post h1 a{font-size:16px;padding-left:12px}h1{margin-top:8px;margin-bottom:20px;font-weight:500;font-size:30px}h2{font-size:24px;line-height:32px}h3{font-size:20px;line-height:28px}.prev-next-nav{overflow:hidden;font-size:14px;border-top:1px solid #ebedf0}.prev-next-nav .next-page,.prev-next-nav .prev-page{display:block;width:50%;height:72px;line-height:72px}.prev-next-nav .prev-page{float:left}.prev-next-nav .next-page{float:right;text-align:right}.all-header{margin-bottom:30px}.all-header h3 span{font-size:13px;padding-left:10px;color:#bbb}.theme-light .all-header p{color:#555}.theme-dark .all-header p{color:#fff}.pagination{display:flex;justify-content:space-between;border-top:1px solid #ebedf0;padding:20px 0}.pagination .pages a{border:1px solid #ebedf0;border-radius:3px;padding:5px 12px;margin:0 5px}.pagination .pages a[aria-current=page]{color:#fff;background:#007acc}blockquote{background-color:#ddd;margin-left:0;margin-right:0;padding:1px 16px;border-left:2px solid #568bec}</style><meta name="generator" content="Gatsby 2.16.3"/><link rel="preconnect dns-prefetch" href="https://www.google-analytics.com"/><link rel="shortcut icon" href="/blog/icons/icon-48x48.png?v=f83d32e52a1dc7cc76e8530ba2d262b6"/><link rel="manifest" href="/blog/manifest.webmanifest"/><meta name="theme-color" content="#663399"/><link rel="apple-touch-icon" sizes="48x48" href="/blog/icons/icon-48x48.png?v=f83d32e52a1dc7cc76e8530ba2d262b6"/><link rel="apple-touch-icon" sizes="72x72" href="/blog/icons/icon-72x72.png?v=f83d32e52a1dc7cc76e8530ba2d262b6"/><link rel="apple-touch-icon" sizes="96x96" href="/blog/icons/icon-96x96.png?v=f83d32e52a1dc7cc76e8530ba2d262b6"/><link rel="apple-touch-icon" sizes="144x144" href="/blog/icons/icon-144x144.png?v=f83d32e52a1dc7cc76e8530ba2d262b6"/><link rel="apple-touch-icon" sizes="192x192" href="/blog/icons/icon-192x192.png?v=f83d32e52a1dc7cc76e8530ba2d262b6"/><link rel="apple-touch-icon" sizes="256x256" href="/blog/icons/icon-256x256.png?v=f83d32e52a1dc7cc76e8530ba2d262b6"/><link rel="apple-touch-icon" sizes="384x384" href="/blog/icons/icon-384x384.png?v=f83d32e52a1dc7cc76e8530ba2d262b6"/><link rel="apple-touch-icon" sizes="512x512" href="/blog/icons/icon-512x512.png?v=f83d32e52a1dc7cc76e8530ba2d262b6"/><title data-react-helmet="true">Electron 应用处理长任务 | Kailang Blog</title><meta data-react-helmet="true" name="description" content="通过 Electron 托盘（tray）实现后台执行长任务。"/><meta data-react-helmet="true" property="og:title" content="Electron 应用处理长任务"/><meta data-react-helmet="true" property="og:description" content="通过 Electron 托盘（tray）实现后台执行长任务。"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="kailang"/><meta data-react-helmet="true" name="twitter:title" content="Electron 应用处理长任务"/><meta data-react-helmet="true" name="twitter:description" content="通过 Electron 托盘（tray）实现后台执行长任务。"/><link as="script" rel="preload" href="/blog/component---src-templates-blog-post-js-ad0d66018576bc9befc8.js"/><link as="script" rel="preload" href="/blog/styles-50947f8f1e6f46efd725.js"/><link as="script" rel="preload" href="/blog/commons-f3268c9d7cfa9cf83b38.js"/><link as="script" rel="preload" href="/blog/app-aede868c16b590a60b51.js"/><link as="script" rel="preload" href="/blog/webpack-runtime-e7215cf539a6f354666c.js"/><link as="fetch" rel="preload" href="/blog/page-data/electron-tray/page-data.json" crossorigin="anonymous"/></head><body><noscript id="gatsby-noscript">This app works best with JavaScript enabled.</noscript><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group" id="gatsby-focus-wrapper"><div class="theme-light"><div class="layout post"><header><h3><a href="/blog/">Kailang Blog</a></h3><div class="toggle"><svg viewBox="0 0 1024 1024" width="32" height="14"><path d="M556.8 979.2c-262.4 0-473.6-211.2-473.6-467.2s211.2-467.2 467.2-467.2c12.8 0 19.2 6.4 25.6 12.8 6.4 12.8 6.4 19.2 0 32-57.6 70.4-83.2 160-83.2 249.6 0 230.4 185.6 416 416 416h6.4c12.8 0 19.2 6.4 25.6 12.8 6.4 12.8 6.4 19.2 0 32a498.56 498.56 0 0 1-384 179.2z m-64-876.8c-198.4 32-352 204.8-352 409.6 0 230.4 185.6 416 416 416 108.8 0 211.2-44.8 288-121.6-236.8-25.6-416-230.4-416-467.2 0-89.6 25.6-166.4 64-236.8z" fill="" p-id="4160"></path><path d="M582.4 883.2c-192 0-352-134.4-384-320 0-6.4 6.4-12.8 12.8-19.2 6.4 0 12.8 6.4 19.2 12.8 32 172.8 179.2 294.4 352 294.4 6.4 0 12.8 6.4 12.8 12.8 0 12.8-6.4 19.2-12.8 19.2zM204.8 531.2c-6.4 0-12.8-6.4-12.8-12.8v-19.2c0-6.4 6.4-12.8 12.8-12.8s12.8 6.4 12.8 12.8v19.2c6.4 6.4 0 12.8-12.8 12.8z" fill="" p-id="4161"></path><path d="M620.8 307.2m-25.6 0a25.6 25.6 0 1 0 51.2 0 25.6 25.6 0 1 0-51.2 0Z" fill="" p-id="4162"></path><path d="M793.6 185.6m-25.6 0a25.6 25.6 0 1 0 51.2 0 25.6 25.6 0 1 0-51.2 0Z" fill="" p-id="4163"></path><path d="M736 416m-25.6 0a25.6 25.6 0 1 0 51.2 0 25.6 25.6 0 1 0-51.2 0Z" fill="" p-id="4164"></path></svg></div></header><main><h1>Electron 应用处理长任务<span>2020-11-26</span><a target="_blank" rel="noopener noreferrer" href="/blog/static/electron-tray-27fe54320a2a35dcb6e21a8a18402462.pdf" title="打开 electron-tray.pdf 文件">Θ</a></h1><div class="main-toc row"><div>目录</div><div class="main-toc--li2"><a href="#%E5%88%9B%E5%BB%BA%E6%89%98%E7%9B%98%E5%92%8C%E8%8F%9C%E5%8D%95%E7%A4%BA%E4%BE%8B" class="">创建托盘和菜单示例</a></div><div class="main-toc--li2"><a href="#%E5%9F%BA%E4%BA%8E%E6%89%98%E7%9B%98%E5%8A%9F%E8%83%BD%E5%AE%9E%E7%8E%B0%E5%90%8E%E5%8F%B0%E8%BF%90%E8%A1%8C%E5%BA%94%E7%94%A8" class="">基于托盘功能实现后台运行应用</a></div><div class="main-toc--li3"><a href="#%E5%85%B3%E9%97%AD%E5%BA%94%E7%94%A8%E5%89%8D%E5%94%A4%E9%86%92%E5%AF%B9%E8%AF%9D%E6%A1%86%E4%BA%8C%E6%AC%A1%E7%A1%AE%E8%AE%A4" class="">关闭应用前唤醒对话框二次确认</a></div><div class="main-toc--li3"><a href="#%E5%88%9B%E5%BB%BA%E6%89%98%E7%9B%98%E5%B9%B6%E6%B7%BB%E5%8A%A0%E8%8F%9C%E5%8D%95%E6%93%8D%E4%BD%9C" class="">创建托盘并添加菜单操作</a></div><div class="main-toc--li3"><a href="#%E6%A0%B9%E6%8D%AE%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%B1%BB%E5%9E%8B%E5%92%8C%E7%B3%BB%E7%BB%9F%20Mode%20%E5%AE%9A%E5%88%B6%E6%89%98%E7%9B%98%E5%9B%BE%E6%A0%87" class="">根据操作系统类型和系统 Mode 定制托盘图标</a></div><div class="main-toc--li3"><a href="#%E5%88%87%E6%8D%A2%E7%B3%BB%E7%BB%9F%20Mode%20%E5%AE%9A%E5%88%B6%E6%89%98%E7%9B%98%E5%9B%BE%E6%A0%87%E6%94%B9%E5%8F%98" class="">切换系统 Mode 定制托盘图标改变</a></div><div class="main-toc--li3"><a href="#%E6%89%98%E7%9B%98%E5%85%B6%E4%BB%96%E5%9C%BA%E6%99%AF" class="">托盘其他场景</a></div><div class="main-toc--li2"><a href="#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9" class="">注意事项</a></div></div><p>Electron 应用在执行一些长时间任务（比如上传、下载），我们想关闭界面后任务依旧执行。再次打开界面，依旧可以看到正在执行的任务以及任务进度。<a href="https://www.electronjs.org/docs/api/tray">托盘</a>可以帮我们实现这个功能。</p><h2 id="%E5%88%9B%E5%BB%BA%E6%89%98%E7%9B%98%E5%92%8C%E8%8F%9C%E5%8D%95%E7%A4%BA%E4%BE%8B" class="heading"><span>创建托盘和菜单示例</span><a name="创建托盘和菜单示例" href="#%E5%88%9B%E5%BB%BA%E6%89%98%E7%9B%98%E5%92%8C%E8%8F%9C%E5%8D%95%E7%A4%BA%E4%BE%8B" class="anchor">#</a></h2><ul><li>实例化 <code>Tray</code> 并传入图标路径；</li><li>创建菜单并配置到托盘中。</li></ul><div class="pre"><div class="playground show"><div style="position:relative;text-align:left;box-sizing:border-box;padding:0;overflow:hidden;white-space:pre;font-family:monospace"><textarea style="margin:0;border:0;background:none;box-sizing:inherit;display:inherit;font-family:inherit;font-size:inherit;font-style:inherit;font-variant-ligatures:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;tab-size:inherit;text-indent:inherit;text-rendering:inherit;text-transform:inherit;white-space:pre-wrap;word-break:keep-all;overflow-wrap:break-word;position:absolute;top:0;left:0;height:100%;width:100%;resize:none;color:inherit;overflow:hidden;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;-webkit-text-fill-color:transparent;padding-top:10px;padding-right:10px;padding-bottom:10px;padding-left:10px" class="npm__react-simple-code-editor__textarea" disabled="" autoCapitalize="off" autoComplete="off" autoCorrect="off" spellcheck="false" data-gramm="false">const { app, Menu, Tray } = require(&#x27;electron&#x27;)

let tray = null;
// 等同 app.on(&#x27;read&#x27;, () =&gt; { ... })
app.whenReady().then(() =&gt; {
  tray = new Tray(&#x27;/path/to/my/icon&#x27;)
  const contextMenu = Menu.buildFromTemplate([
    { label: &#x27;Item1&#x27;, type: &#x27;radio&#x27; },
    { label: &#x27;Item2&#x27;, type: &#x27;radio&#x27; },
    { label: &#x27;Item3&#x27;, type: &#x27;radio&#x27;, checked: true },
    { label: &#x27;Item4&#x27;, type: &#x27;radio&#x27; }
  ])
  tray.setContextMenu(contextMenu)
})</textarea><pre aria-hidden="true" style="margin:0;border:0;background:none;box-sizing:inherit;display:inherit;font-family:inherit;font-size:inherit;font-style:inherit;font-variant-ligatures:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;tab-size:inherit;text-indent:inherit;text-rendering:inherit;text-transform:inherit;white-space:pre-wrap;word-break:keep-all;overflow-wrap:break-word;position:relative;pointer-events:none;padding-top:10px;padding-right:10px;padding-bottom:10px;padding-left:10px"><div class="token-line" style="color:#C5C8C6"><span class="token keyword" style="color:hsl(350, 40%, 70%)">const</span><span class="token plain"> </span><span class="token punctuation" style="opacity:0.7">{</span><span class="token plain"> app</span><span class="token punctuation" style="opacity:0.7">,</span><span class="token plain"> Menu</span><span class="token punctuation" style="opacity:0.7">,</span><span class="token plain"> Tray </span><span class="token punctuation" style="opacity:0.7">}</span><span class="token plain"> </span><span class="token operator" style="color:hsl(40, 90%, 60%)">=</span><span class="token plain"> </span><span class="token function">require</span><span class="token punctuation" style="opacity:0.7">(</span><span class="token string" style="color:hsl(40, 90%, 60%)">&#x27;electron&#x27;</span><span class="token punctuation" style="opacity:0.7">)</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain"></span><span class="token keyword" style="color:hsl(350, 40%, 70%)">let</span><span class="token plain"> tray </span><span class="token operator" style="color:hsl(40, 90%, 60%)">=</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(350, 40%, 70%)">null</span><span class="token punctuation" style="opacity:0.7">;</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain"></span><span class="token comment" style="color:hsl(30, 20%, 50%)">// 等同 app.on(&#x27;read&#x27;, () =&gt; { ... })</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">app</span><span class="token punctuation" style="opacity:0.7">.</span><span class="token function">whenReady</span><span class="token punctuation" style="opacity:0.7">(</span><span class="token punctuation" style="opacity:0.7">)</span><span class="token punctuation" style="opacity:0.7">.</span><span class="token function">then</span><span class="token punctuation" style="opacity:0.7">(</span><span class="token punctuation" style="opacity:0.7">(</span><span class="token punctuation" style="opacity:0.7">)</span><span class="token plain"> </span><span class="token operator" style="color:hsl(40, 90%, 60%)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="opacity:0.7">{</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">  tray </span><span class="token operator" style="color:hsl(40, 90%, 60%)">=</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(350, 40%, 70%)">new</span><span class="token plain"> </span><span class="token class-name">Tray</span><span class="token punctuation" style="opacity:0.7">(</span><span class="token string" style="color:hsl(40, 90%, 60%)">&#x27;/path/to/my/icon&#x27;</span><span class="token punctuation" style="opacity:0.7">)</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">  </span><span class="token keyword" style="color:hsl(350, 40%, 70%)">const</span><span class="token plain"> contextMenu </span><span class="token operator" style="color:hsl(40, 90%, 60%)">=</span><span class="token plain"> Menu</span><span class="token punctuation" style="opacity:0.7">.</span><span class="token function">buildFromTemplate</span><span class="token punctuation" style="opacity:0.7">(</span><span class="token punctuation" style="opacity:0.7">[</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">    </span><span class="token punctuation" style="opacity:0.7">{</span><span class="token plain"> label</span><span class="token punctuation" style="opacity:0.7">:</span><span class="token plain"> </span><span class="token string" style="color:hsl(40, 90%, 60%)">&#x27;Item1&#x27;</span><span class="token punctuation" style="opacity:0.7">,</span><span class="token plain"> type</span><span class="token punctuation" style="opacity:0.7">:</span><span class="token plain"> </span><span class="token string" style="color:hsl(40, 90%, 60%)">&#x27;radio&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="opacity:0.7">}</span><span class="token punctuation" style="opacity:0.7">,</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">    </span><span class="token punctuation" style="opacity:0.7">{</span><span class="token plain"> label</span><span class="token punctuation" style="opacity:0.7">:</span><span class="token plain"> </span><span class="token string" style="color:hsl(40, 90%, 60%)">&#x27;Item2&#x27;</span><span class="token punctuation" style="opacity:0.7">,</span><span class="token plain"> type</span><span class="token punctuation" style="opacity:0.7">:</span><span class="token plain"> </span><span class="token string" style="color:hsl(40, 90%, 60%)">&#x27;radio&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="opacity:0.7">}</span><span class="token punctuation" style="opacity:0.7">,</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">    </span><span class="token punctuation" style="opacity:0.7">{</span><span class="token plain"> label</span><span class="token punctuation" style="opacity:0.7">:</span><span class="token plain"> </span><span class="token string" style="color:hsl(40, 90%, 60%)">&#x27;Item3&#x27;</span><span class="token punctuation" style="opacity:0.7">,</span><span class="token plain"> type</span><span class="token punctuation" style="opacity:0.7">:</span><span class="token plain"> </span><span class="token string" style="color:hsl(40, 90%, 60%)">&#x27;radio&#x27;</span><span class="token punctuation" style="opacity:0.7">,</span><span class="token plain"> checked</span><span class="token punctuation" style="opacity:0.7">:</span><span class="token plain"> </span><span class="token boolean" style="color:hsl(350, 40%, 70%)">true</span><span class="token plain"> </span><span class="token punctuation" style="opacity:0.7">}</span><span class="token punctuation" style="opacity:0.7">,</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">    </span><span class="token punctuation" style="opacity:0.7">{</span><span class="token plain"> label</span><span class="token punctuation" style="opacity:0.7">:</span><span class="token plain"> </span><span class="token string" style="color:hsl(40, 90%, 60%)">&#x27;Item4&#x27;</span><span class="token punctuation" style="opacity:0.7">,</span><span class="token plain"> type</span><span class="token punctuation" style="opacity:0.7">:</span><span class="token plain"> </span><span class="token string" style="color:hsl(40, 90%, 60%)">&#x27;radio&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="opacity:0.7">}</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">  </span><span class="token punctuation" style="opacity:0.7">]</span><span class="token punctuation" style="opacity:0.7">)</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">  tray</span><span class="token punctuation" style="opacity:0.7">.</span><span class="token function">setContextMenu</span><span class="token punctuation" style="opacity:0.7">(</span><span class="token plain">contextMenu</span><span class="token punctuation" style="opacity:0.7">)</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain"></span><span class="token punctuation" style="opacity:0.7">}</span><span class="token punctuation" style="opacity:0.7">)</span></div></pre><style type="text/css">
/**
 * Reset the text fill color so that placeholder is visible
 */
.npm__react-simple-code-editor__textarea:empty {
  -webkit-text-fill-color: inherit !important;
}

/**
 * Hack to apply on some CSS on IE10 and IE11
 */
@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {
  /**
    * IE doesn't support '-webkit-text-fill-color'
    * So we use 'color: transparent' to make the text transparent on IE
    * Unlike other browsers, it doesn't affect caret color in IE
    */
  .npm__react-simple-code-editor__textarea {
    color: transparent !important;
  }

  .npm__react-simple-code-editor__textarea::selection {
    background-color: #accef7 !important;
    color: transparent !important;
  }
}
</style></div></div></div><h2 id="%E5%9F%BA%E4%BA%8E%E6%89%98%E7%9B%98%E5%8A%9F%E8%83%BD%E5%AE%9E%E7%8E%B0%E5%90%8E%E5%8F%B0%E8%BF%90%E8%A1%8C%E5%BA%94%E7%94%A8" class="heading"><span>基于托盘功能实现后台运行应用</span><a name="基于托盘功能实现后台运行应用" href="#%E5%9F%BA%E4%BA%8E%E6%89%98%E7%9B%98%E5%8A%9F%E8%83%BD%E5%AE%9E%E7%8E%B0%E5%90%8E%E5%8F%B0%E8%BF%90%E8%A1%8C%E5%BA%94%E7%94%A8" class="anchor">#</a></h2><h3 id="%E5%85%B3%E9%97%AD%E5%BA%94%E7%94%A8%E5%89%8D%E5%94%A4%E9%86%92%E5%AF%B9%E8%AF%9D%E6%A1%86%E4%BA%8C%E6%AC%A1%E7%A1%AE%E8%AE%A4" class="heading"><span>关闭应用前唤醒对话框二次确认</span><a name="关闭应用前唤醒对话框二次确认" href="#%E5%85%B3%E9%97%AD%E5%BA%94%E7%94%A8%E5%89%8D%E5%94%A4%E9%86%92%E5%AF%B9%E8%AF%9D%E6%A1%86%E4%BA%8C%E6%AC%A1%E7%A1%AE%E8%AE%A4" class="anchor">#</a></h3><p>关闭应用时，触发对话框，可支持 3 种场景：</p><ul><li>点击「取消」取消关闭操作；</li><li>点击「退出」，「后台运行」选中时，界面关闭，托盘不关闭，任务继续执行；</li><li>点击「退出」，「后台运行」不选中，界面、托盘关闭，直接退出，任务终止。</li></ul><div class="pre"><div class="playground show"><div style="position:relative;text-align:left;box-sizing:border-box;padding:0;overflow:hidden;white-space:pre;font-family:monospace"><textarea style="margin:0;border:0;background:none;box-sizing:inherit;display:inherit;font-family:inherit;font-size:inherit;font-style:inherit;font-variant-ligatures:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;tab-size:inherit;text-indent:inherit;text-rendering:inherit;text-transform:inherit;white-space:pre-wrap;word-break:keep-all;overflow-wrap:break-word;position:absolute;top:0;left:0;height:100%;width:100%;resize:none;color:inherit;overflow:hidden;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;-webkit-text-fill-color:transparent;padding-top:10px;padding-right:10px;padding-bottom:10px;padding-left:10px" class="npm__react-simple-code-editor__textarea" disabled="" autoCapitalize="off" autoComplete="off" autoCorrect="off" spellcheck="false" data-gramm="false">mainWindow.on(&#x27;close&#x27;, (e) =&gt; {
  dialog.showMessageBox({
      title: &#x27;退出&#x27;,
      type: &#x27;warning&#x27;,
      icon: nativeImage.createFromPath(path.resolve(__dirname, &#x27;icon.png&#x27;)),
      message: `确定要退出吗？`,
      detail: &#x27;选择后台运行，正在运行的任务将在系统托盘中继续运行。&#x27;,
      checkboxLabel: &#x27;后台运行&#x27;,
      checkboxChecked: true,
      buttons: btns,
      defaultId: process.platform == &#x27;darwin&#x27; ? 0 : 1,
    }).then(dm =&gt; {
        if (process.platform == &#x27;darwin&#x27;) {
          switch (dm.response) {
            case 0:
              dm.response = 1;
              break;
            case 1:
              dm.response = 0;
              break;
            default:
              dm.response = 1;
            }
        }
  
        switch (dm.response) {
          case 1:
            if (dm.checkboxChecked) {
              if (mainWindow.isVisible()) {
                // 修复全屏 hide 黑屏问题
                // https://github.com/electron/electron/issues/20263
                if (mainWindow.isFullScreen()) {
                  mainWindow.once(&#x27;leave-full-screen&#x27;, () =&gt; mainWindow.hide());
                  mainWindow.setFullScreen(false);
                } else {
                  mainWindow.hide();
                }
                e.preventDefault();
              }
            } else {
              app.exit(0);
            }
            break;
          default:
            e.preventDefault();
        }
      })
  e.preventDefault();
});</textarea><pre aria-hidden="true" style="margin:0;border:0;background:none;box-sizing:inherit;display:inherit;font-family:inherit;font-size:inherit;font-style:inherit;font-variant-ligatures:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;tab-size:inherit;text-indent:inherit;text-rendering:inherit;text-transform:inherit;white-space:pre-wrap;word-break:keep-all;overflow-wrap:break-word;position:relative;pointer-events:none;padding-top:10px;padding-right:10px;padding-bottom:10px;padding-left:10px"><div class="token-line" style="color:#C5C8C6"><span class="token plain">mainWindow</span><span class="token punctuation" style="opacity:0.7">.</span><span class="token function">on</span><span class="token punctuation" style="opacity:0.7">(</span><span class="token string" style="color:hsl(40, 90%, 60%)">&#x27;close&#x27;</span><span class="token punctuation" style="opacity:0.7">,</span><span class="token plain"> </span><span class="token punctuation" style="opacity:0.7">(</span><span class="token parameter">e</span><span class="token punctuation" style="opacity:0.7">)</span><span class="token plain"> </span><span class="token operator" style="color:hsl(40, 90%, 60%)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="opacity:0.7">{</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">  dialog</span><span class="token punctuation" style="opacity:0.7">.</span><span class="token function">showMessageBox</span><span class="token punctuation" style="opacity:0.7">(</span><span class="token punctuation" style="opacity:0.7">{</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">      title</span><span class="token punctuation" style="opacity:0.7">:</span><span class="token plain"> </span><span class="token string" style="color:hsl(40, 90%, 60%)">&#x27;退出&#x27;</span><span class="token punctuation" style="opacity:0.7">,</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">      type</span><span class="token punctuation" style="opacity:0.7">:</span><span class="token plain"> </span><span class="token string" style="color:hsl(40, 90%, 60%)">&#x27;warning&#x27;</span><span class="token punctuation" style="opacity:0.7">,</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">      icon</span><span class="token punctuation" style="opacity:0.7">:</span><span class="token plain"> nativeImage</span><span class="token punctuation" style="opacity:0.7">.</span><span class="token function">createFromPath</span><span class="token punctuation" style="opacity:0.7">(</span><span class="token plain">path</span><span class="token punctuation" style="opacity:0.7">.</span><span class="token function">resolve</span><span class="token punctuation" style="opacity:0.7">(</span><span class="token plain">__dirname</span><span class="token punctuation" style="opacity:0.7">,</span><span class="token plain"> </span><span class="token string" style="color:hsl(40, 90%, 60%)">&#x27;icon.png&#x27;</span><span class="token punctuation" style="opacity:0.7">)</span><span class="token punctuation" style="opacity:0.7">)</span><span class="token punctuation" style="opacity:0.7">,</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">      message</span><span class="token punctuation" style="opacity:0.7">:</span><span class="token plain"> </span><span class="token template-string string" style="color:hsl(40, 90%, 60%)">`确定要退出吗？`</span><span class="token punctuation" style="opacity:0.7">,</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">      detail</span><span class="token punctuation" style="opacity:0.7">:</span><span class="token plain"> </span><span class="token string" style="color:hsl(40, 90%, 60%)">&#x27;选择后台运行，正在运行的任务将在系统托盘中继续运行。&#x27;</span><span class="token punctuation" style="opacity:0.7">,</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">      checkboxLabel</span><span class="token punctuation" style="opacity:0.7">:</span><span class="token plain"> </span><span class="token string" style="color:hsl(40, 90%, 60%)">&#x27;后台运行&#x27;</span><span class="token punctuation" style="opacity:0.7">,</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">      checkboxChecked</span><span class="token punctuation" style="opacity:0.7">:</span><span class="token plain"> </span><span class="token boolean" style="color:hsl(350, 40%, 70%)">true</span><span class="token punctuation" style="opacity:0.7">,</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">      buttons</span><span class="token punctuation" style="opacity:0.7">:</span><span class="token plain"> btns</span><span class="token punctuation" style="opacity:0.7">,</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">      defaultId</span><span class="token punctuation" style="opacity:0.7">:</span><span class="token plain"> process</span><span class="token punctuation" style="opacity:0.7">.</span><span class="token plain">platform </span><span class="token operator" style="color:hsl(40, 90%, 60%)">==</span><span class="token plain"> </span><span class="token string" style="color:hsl(40, 90%, 60%)">&#x27;darwin&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:hsl(40, 90%, 60%)">?</span><span class="token plain"> </span><span class="token number" style="color:hsl(350, 40%, 70%)">0</span><span class="token plain"> </span><span class="token punctuation" style="opacity:0.7">:</span><span class="token plain"> </span><span class="token number" style="color:hsl(350, 40%, 70%)">1</span><span class="token punctuation" style="opacity:0.7">,</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">    </span><span class="token punctuation" style="opacity:0.7">}</span><span class="token punctuation" style="opacity:0.7">)</span><span class="token punctuation" style="opacity:0.7">.</span><span class="token function">then</span><span class="token punctuation" style="opacity:0.7">(</span><span class="token parameter">dm</span><span class="token plain"> </span><span class="token operator" style="color:hsl(40, 90%, 60%)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="opacity:0.7">{</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">        </span><span class="token keyword" style="color:hsl(350, 40%, 70%)">if</span><span class="token plain"> </span><span class="token punctuation" style="opacity:0.7">(</span><span class="token plain">process</span><span class="token punctuation" style="opacity:0.7">.</span><span class="token plain">platform </span><span class="token operator" style="color:hsl(40, 90%, 60%)">==</span><span class="token plain"> </span><span class="token string" style="color:hsl(40, 90%, 60%)">&#x27;darwin&#x27;</span><span class="token punctuation" style="opacity:0.7">)</span><span class="token plain"> </span><span class="token punctuation" style="opacity:0.7">{</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">          </span><span class="token keyword" style="color:hsl(350, 40%, 70%)">switch</span><span class="token plain"> </span><span class="token punctuation" style="opacity:0.7">(</span><span class="token plain">dm</span><span class="token punctuation" style="opacity:0.7">.</span><span class="token plain">response</span><span class="token punctuation" style="opacity:0.7">)</span><span class="token plain"> </span><span class="token punctuation" style="opacity:0.7">{</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">            </span><span class="token keyword" style="color:hsl(350, 40%, 70%)">case</span><span class="token plain"> </span><span class="token number" style="color:hsl(350, 40%, 70%)">0</span><span class="token punctuation" style="opacity:0.7">:</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">              dm</span><span class="token punctuation" style="opacity:0.7">.</span><span class="token plain">response </span><span class="token operator" style="color:hsl(40, 90%, 60%)">=</span><span class="token plain"> </span><span class="token number" style="color:hsl(350, 40%, 70%)">1</span><span class="token punctuation" style="opacity:0.7">;</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">              </span><span class="token keyword" style="color:hsl(350, 40%, 70%)">break</span><span class="token punctuation" style="opacity:0.7">;</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">            </span><span class="token keyword" style="color:hsl(350, 40%, 70%)">case</span><span class="token plain"> </span><span class="token number" style="color:hsl(350, 40%, 70%)">1</span><span class="token punctuation" style="opacity:0.7">:</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">              dm</span><span class="token punctuation" style="opacity:0.7">.</span><span class="token plain">response </span><span class="token operator" style="color:hsl(40, 90%, 60%)">=</span><span class="token plain"> </span><span class="token number" style="color:hsl(350, 40%, 70%)">0</span><span class="token punctuation" style="opacity:0.7">;</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">              </span><span class="token keyword" style="color:hsl(350, 40%, 70%)">break</span><span class="token punctuation" style="opacity:0.7">;</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">            </span><span class="token keyword" style="color:hsl(350, 40%, 70%)">default</span><span class="token punctuation" style="opacity:0.7">:</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">              dm</span><span class="token punctuation" style="opacity:0.7">.</span><span class="token plain">response </span><span class="token operator" style="color:hsl(40, 90%, 60%)">=</span><span class="token plain"> </span><span class="token number" style="color:hsl(350, 40%, 70%)">1</span><span class="token punctuation" style="opacity:0.7">;</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">            </span><span class="token punctuation" style="opacity:0.7">}</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">        </span><span class="token punctuation" style="opacity:0.7">}</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">  </span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">        </span><span class="token keyword" style="color:hsl(350, 40%, 70%)">switch</span><span class="token plain"> </span><span class="token punctuation" style="opacity:0.7">(</span><span class="token plain">dm</span><span class="token punctuation" style="opacity:0.7">.</span><span class="token plain">response</span><span class="token punctuation" style="opacity:0.7">)</span><span class="token plain"> </span><span class="token punctuation" style="opacity:0.7">{</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">          </span><span class="token keyword" style="color:hsl(350, 40%, 70%)">case</span><span class="token plain"> </span><span class="token number" style="color:hsl(350, 40%, 70%)">1</span><span class="token punctuation" style="opacity:0.7">:</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">            </span><span class="token keyword" style="color:hsl(350, 40%, 70%)">if</span><span class="token plain"> </span><span class="token punctuation" style="opacity:0.7">(</span><span class="token plain">dm</span><span class="token punctuation" style="opacity:0.7">.</span><span class="token plain">checkboxChecked</span><span class="token punctuation" style="opacity:0.7">)</span><span class="token plain"> </span><span class="token punctuation" style="opacity:0.7">{</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">              </span><span class="token keyword" style="color:hsl(350, 40%, 70%)">if</span><span class="token plain"> </span><span class="token punctuation" style="opacity:0.7">(</span><span class="token plain">mainWindow</span><span class="token punctuation" style="opacity:0.7">.</span><span class="token function">isVisible</span><span class="token punctuation" style="opacity:0.7">(</span><span class="token punctuation" style="opacity:0.7">)</span><span class="token punctuation" style="opacity:0.7">)</span><span class="token plain"> </span><span class="token punctuation" style="opacity:0.7">{</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">                </span><span class="token comment" style="color:hsl(30, 20%, 50%)">// 修复全屏 hide 黑屏问题</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">                </span><span class="token comment" style="color:hsl(30, 20%, 50%)">// https://github.com/electron/electron/issues/20263</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">                </span><span class="token keyword" style="color:hsl(350, 40%, 70%)">if</span><span class="token plain"> </span><span class="token punctuation" style="opacity:0.7">(</span><span class="token plain">mainWindow</span><span class="token punctuation" style="opacity:0.7">.</span><span class="token function">isFullScreen</span><span class="token punctuation" style="opacity:0.7">(</span><span class="token punctuation" style="opacity:0.7">)</span><span class="token punctuation" style="opacity:0.7">)</span><span class="token plain"> </span><span class="token punctuation" style="opacity:0.7">{</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">                  mainWindow</span><span class="token punctuation" style="opacity:0.7">.</span><span class="token function">once</span><span class="token punctuation" style="opacity:0.7">(</span><span class="token string" style="color:hsl(40, 90%, 60%)">&#x27;leave-full-screen&#x27;</span><span class="token punctuation" style="opacity:0.7">,</span><span class="token plain"> </span><span class="token punctuation" style="opacity:0.7">(</span><span class="token punctuation" style="opacity:0.7">)</span><span class="token plain"> </span><span class="token operator" style="color:hsl(40, 90%, 60%)">=&gt;</span><span class="token plain"> mainWindow</span><span class="token punctuation" style="opacity:0.7">.</span><span class="token function">hide</span><span class="token punctuation" style="opacity:0.7">(</span><span class="token punctuation" style="opacity:0.7">)</span><span class="token punctuation" style="opacity:0.7">)</span><span class="token punctuation" style="opacity:0.7">;</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">                  mainWindow</span><span class="token punctuation" style="opacity:0.7">.</span><span class="token function">setFullScreen</span><span class="token punctuation" style="opacity:0.7">(</span><span class="token boolean" style="color:hsl(350, 40%, 70%)">false</span><span class="token punctuation" style="opacity:0.7">)</span><span class="token punctuation" style="opacity:0.7">;</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">                </span><span class="token punctuation" style="opacity:0.7">}</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(350, 40%, 70%)">else</span><span class="token plain"> </span><span class="token punctuation" style="opacity:0.7">{</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">                  mainWindow</span><span class="token punctuation" style="opacity:0.7">.</span><span class="token function">hide</span><span class="token punctuation" style="opacity:0.7">(</span><span class="token punctuation" style="opacity:0.7">)</span><span class="token punctuation" style="opacity:0.7">;</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">                </span><span class="token punctuation" style="opacity:0.7">}</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">                e</span><span class="token punctuation" style="opacity:0.7">.</span><span class="token function">preventDefault</span><span class="token punctuation" style="opacity:0.7">(</span><span class="token punctuation" style="opacity:0.7">)</span><span class="token punctuation" style="opacity:0.7">;</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">              </span><span class="token punctuation" style="opacity:0.7">}</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">            </span><span class="token punctuation" style="opacity:0.7">}</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(350, 40%, 70%)">else</span><span class="token plain"> </span><span class="token punctuation" style="opacity:0.7">{</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">              app</span><span class="token punctuation" style="opacity:0.7">.</span><span class="token function">exit</span><span class="token punctuation" style="opacity:0.7">(</span><span class="token number" style="color:hsl(350, 40%, 70%)">0</span><span class="token punctuation" style="opacity:0.7">)</span><span class="token punctuation" style="opacity:0.7">;</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">            </span><span class="token punctuation" style="opacity:0.7">}</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">            </span><span class="token keyword" style="color:hsl(350, 40%, 70%)">break</span><span class="token punctuation" style="opacity:0.7">;</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">          </span><span class="token keyword" style="color:hsl(350, 40%, 70%)">default</span><span class="token punctuation" style="opacity:0.7">:</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">            e</span><span class="token punctuation" style="opacity:0.7">.</span><span class="token function">preventDefault</span><span class="token punctuation" style="opacity:0.7">(</span><span class="token punctuation" style="opacity:0.7">)</span><span class="token punctuation" style="opacity:0.7">;</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">        </span><span class="token punctuation" style="opacity:0.7">}</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">      </span><span class="token punctuation" style="opacity:0.7">}</span><span class="token punctuation" style="opacity:0.7">)</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">  e</span><span class="token punctuation" style="opacity:0.7">.</span><span class="token function">preventDefault</span><span class="token punctuation" style="opacity:0.7">(</span><span class="token punctuation" style="opacity:0.7">)</span><span class="token punctuation" style="opacity:0.7">;</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain"></span><span class="token punctuation" style="opacity:0.7">}</span><span class="token punctuation" style="opacity:0.7">)</span><span class="token punctuation" style="opacity:0.7">;</span></div></pre><style type="text/css">
/**
 * Reset the text fill color so that placeholder is visible
 */
.npm__react-simple-code-editor__textarea:empty {
  -webkit-text-fill-color: inherit !important;
}

/**
 * Hack to apply on some CSS on IE10 and IE11
 */
@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {
  /**
    * IE doesn't support '-webkit-text-fill-color'
    * So we use 'color: transparent' to make the text transparent on IE
    * Unlike other browsers, it doesn't affect caret color in IE
    */
  .npm__react-simple-code-editor__textarea {
    color: transparent !important;
  }

  .npm__react-simple-code-editor__textarea::selection {
    background-color: #accef7 !important;
    color: transparent !important;
  }
}
</style></div></div></div><p>效果如下：</p><p><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:840px">
      <a class="gatsby-resp-image-link" href="/blog/static/31b519616bc4d001c75780c21bf50ddd/6d51e/electron-close-mac-dialog.png" style="display:block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-background-image" style="padding-bottom:46.93069306930693%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABYlAAAWJQFJUiTwAAACTUlEQVQoz22RWU8TYRSG55eZcIcENS4hGJZAQkBQYwRMjAsBMRHQKkG9QGO8EKIxoKlEAoJUKS2F7tuUtrQMbad0m5lSwCIXPA69VC+efCdv8r3nvOcIH20pPtkkPtviFYxrEsb1BDOOJLPOJHPuJN88KRZ0FnWWfCl++FMsB1KYgzIWUcYq7mDZyGMJ5xHem+O4/GE2o1E2IjHCkSixWJwtSWJrS6rU4XBE1/+Drkf1fz4xjMktYdvIIkyaQkTiCTStiKLEUdQCfn8As9mM1WpFFEWKRQ1VUVBV9R80TSUWl1h1hfBFZISpnz6iUh4tOUPOeYVsWkMM+HTDZZxOpz5FWG/gJxgM4vV6K/UJHo8Xp8tNIpHU02wzZZxj2DCO8HXFx+Z2gVzIgNs4ScR1zGoog9MTJBDwI8sy6XT6r1dGyabI7SQo76usr9upb2jjxs07CPOrAWL6rhS1RCZbJJ/LEU0UdG0bSdoik8lSKBQq8U4MC/kc6ayCOaDqx9DNIiXsdjetzW2crq5F+L4WRNLH3tst6vtQKGoaB3u7HJZ/US6X2dsrUSqVODr6XYl3WN4nrR7RN32AYbaMYf6YZYud2uoazp29gLDi2cRkcTC3ZNZZYd60gnF2gWdj4zx4+JixF694/vI1b96+Y2LiA6NPRxl6NMToyBBDgwOMPhlm8H4f3R1dDPTeQnCEZRbXRL6YHEzPWei9N0Jr520uN3Zx8XwTPd136b7eQ0dLOw11jVSdqqKu9gyXampoqa+no7GZzoYm+q9dpb+rnT8s2U/CgN2PbwAAAABJRU5ErkJggg==&#x27;);background-size:cover;display:block"></span>
  <img class="gatsby-resp-image-image" alt="electron close mac dialog" title="electron close mac dialog" src="/blog/static/31b519616bc4d001c75780c21bf50ddd/04a72/electron-close-mac-dialog.png" srcSet="/blog/static/31b519616bc4d001c75780c21bf50ddd/6a467/electron-close-mac-dialog.png 210w,/blog/static/31b519616bc4d001c75780c21bf50ddd/635b1/electron-close-mac-dialog.png 420w,/blog/static/31b519616bc4d001c75780c21bf50ddd/04a72/electron-close-mac-dialog.png 840w,/blog/static/31b519616bc4d001c75780c21bf50ddd/6d51e/electron-close-mac-dialog.png 1010w" sizes="(max-width: 840px) 100vw, 840px" loading="lazy"/>
  </a>
    </span>
<span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:818px">
      <a class="gatsby-resp-image-link" href="/blog/static/1d57a0431d0d9395e9d435dcd2dcb779/e198c/electron-close-win-dialog.png" style="display:block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-background-image" style="padding-bottom:61.12469437652812%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAACNUlEQVQoz42ST0/UUBTF56O5URMR/QIuTVzpyohIYkI0ceHGGDVEV34ACCxcGUM0rEwYkAEGGNppO3/a6XQ6baf/Xkvn52sRETZ4kpP3cm/eyTvn3trcdZv5GY25mRbzswrP7qinvKtUtRf3VHq6RxRPCPyAIDjlJJjg+z5RFFFiOp1WrM3d6LC+YqLrmnwQUmQFeZqTSSZRRhwKMpGRZReZ5zlhGGKaZnU/E60t3NZZ/mDyYzmna0W0Oj5KL8CwApJsylUYjUYIIc4FPz7p8X3NpPkzw+iMOFS6tNoWPdPFtkeVLc/zGI/Hf+lJuq5LfnKCe1kwnMTEyaQqDO0BHUPDHvSlfQ9d09ENA03XURT1lGobVVU5VhT5Lq2ELwiOHFf+wK8KuXToJmBOrrZaoig/4TgXBc2+JS14VSESOXYg6HtC2imuZjHFcS5ZHg6dKqcSaV7Qk2KqI/hfmKYlRV0pdmbZjmQOY05kwFkmVyXNCOOUNBWkiajOf9dFyH7Vkyzv9nDAlPSPfDmUIJUha2hGm929X7Tbqlxinzj1SYQ8RTnl8wnHiUealT1PWvY5ahrUNwKaW6nc24LaVEZrmR02vmzyba1Bo67wdeWATy+3eb9QZ2lxi9aBTq/Xpd/v8vldk9fzDd483+XtYoOF+zs8uKnx6uEA08io9Q8czKbFxuqA9WUPZSdkdcni6ewhj67t8/hWk5GVVnaKoqB9mLC3GdHcjtmvRxzvJhgtgXYkI0gKfgMBiXm+YsBhkAAAAABJRU5ErkJggg==&#x27;);background-size:cover;display:block"></span>
  <img class="gatsby-resp-image-image" alt="electron close window dialog" title="electron close window dialog" src="/blog/static/1d57a0431d0d9395e9d435dcd2dcb779/e198c/electron-close-win-dialog.png" srcSet="/blog/static/1d57a0431d0d9395e9d435dcd2dcb779/6a467/electron-close-win-dialog.png 210w,/blog/static/1d57a0431d0d9395e9d435dcd2dcb779/635b1/electron-close-win-dialog.png 420w,/blog/static/1d57a0431d0d9395e9d435dcd2dcb779/e198c/electron-close-win-dialog.png 818w" sizes="(max-width: 818px) 100vw, 818px" loading="lazy"/>
  </a>
    </span></p><h3 id="%E5%88%9B%E5%BB%BA%E6%89%98%E7%9B%98%E5%B9%B6%E6%B7%BB%E5%8A%A0%E8%8F%9C%E5%8D%95%E6%93%8D%E4%BD%9C" class="heading"><span>创建托盘并添加菜单操作</span><a name="创建托盘并添加菜单操作" href="#%E5%88%9B%E5%BB%BA%E6%89%98%E7%9B%98%E5%B9%B6%E6%B7%BB%E5%8A%A0%E8%8F%9C%E5%8D%95%E6%93%8D%E4%BD%9C" class="anchor">#</a></h3><ul><li>禁用双击（MacOS 系统不支持双击操作）</li><li>菜单栏支持操作：关于产品、显示、退出</li><li>MacOS 默认是左单击打开菜单栏、Windows 是右单击打开菜单栏</li><li>Windows 左单击显示界面</li></ul><div class="pre"><div class="playground show"><div style="position:relative;text-align:left;box-sizing:border-box;padding:0;overflow:hidden;white-space:pre;font-family:monospace"><textarea style="margin:0;border:0;background:none;box-sizing:inherit;display:inherit;font-family:inherit;font-size:inherit;font-style:inherit;font-variant-ligatures:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;tab-size:inherit;text-indent:inherit;text-rendering:inherit;text-transform:inherit;white-space:pre-wrap;word-break:keep-all;overflow-wrap:break-word;position:absolute;top:0;left:0;height:100%;width:100%;resize:none;color:inherit;overflow:hidden;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;-webkit-text-fill-color:transparent;padding-top:10px;padding-right:10px;padding-bottom:10px;padding-left:10px" class="npm__react-simple-code-editor__textarea" disabled="" autoCapitalize="off" autoComplete="off" autoCorrect="off" spellcheck="false" data-gramm="false">let tray = null;
const createTray = () =&gt; {
    const trayIco = nativeImage.createFromPath(path.resolve(__dirname, &#x27;tray_light.png&#x27;));
    tray = new Tray(trayIco);
    tray.setIgnoreDoubleClickEvents(true);
    if (process.platform !== &#x27;darwin&#x27;) {
      tray.on(&#x27;click&#x27;, () =&gt; {
        if (!mainWindow.isVisible()) {
          mainWindow.show();
        }
      });
    }
    const contextMenu = Menu.buildFromTemplate([
      {
        label: &#x27;关于产品&#x27;,
        role: &#x27;about&#x27;,
      },
      { type: &#x27;separator&#x27; },
      { 
        label: &#x27;显示&#x27;,
        click: () =&gt; {
          if (!mainWindow.isVisible()) {
            mainWindow.show();
          }
        }
      },
      { type: &#x27;separator&#x27; },
      {
        label: &#x27;退出&#x27;,
        click: e =&gt; {
          if (!mainWindow.isVisible()) {
            mainWindow.show();
          }
          confirmForWorkers(e);
        },
      },
    ]);
    tray.setContextMenu(contextMenu);
  }

  createTray();</textarea><pre aria-hidden="true" style="margin:0;border:0;background:none;box-sizing:inherit;display:inherit;font-family:inherit;font-size:inherit;font-style:inherit;font-variant-ligatures:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;tab-size:inherit;text-indent:inherit;text-rendering:inherit;text-transform:inherit;white-space:pre-wrap;word-break:keep-all;overflow-wrap:break-word;position:relative;pointer-events:none;padding-top:10px;padding-right:10px;padding-bottom:10px;padding-left:10px"><div class="token-line" style="color:#C5C8C6"><span class="token keyword" style="color:hsl(350, 40%, 70%)">let</span><span class="token plain"> tray </span><span class="token operator" style="color:hsl(40, 90%, 60%)">=</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(350, 40%, 70%)">null</span><span class="token punctuation" style="opacity:0.7">;</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain"></span><span class="token keyword" style="color:hsl(350, 40%, 70%)">const</span><span class="token plain"> </span><span class="token function-variable function">createTray</span><span class="token plain"> </span><span class="token operator" style="color:hsl(40, 90%, 60%)">=</span><span class="token plain"> </span><span class="token punctuation" style="opacity:0.7">(</span><span class="token punctuation" style="opacity:0.7">)</span><span class="token plain"> </span><span class="token operator" style="color:hsl(40, 90%, 60%)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="opacity:0.7">{</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">    </span><span class="token keyword" style="color:hsl(350, 40%, 70%)">const</span><span class="token plain"> trayIco </span><span class="token operator" style="color:hsl(40, 90%, 60%)">=</span><span class="token plain"> nativeImage</span><span class="token punctuation" style="opacity:0.7">.</span><span class="token function">createFromPath</span><span class="token punctuation" style="opacity:0.7">(</span><span class="token plain">path</span><span class="token punctuation" style="opacity:0.7">.</span><span class="token function">resolve</span><span class="token punctuation" style="opacity:0.7">(</span><span class="token plain">__dirname</span><span class="token punctuation" style="opacity:0.7">,</span><span class="token plain"> </span><span class="token string" style="color:hsl(40, 90%, 60%)">&#x27;tray_light.png&#x27;</span><span class="token punctuation" style="opacity:0.7">)</span><span class="token punctuation" style="opacity:0.7">)</span><span class="token punctuation" style="opacity:0.7">;</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">    tray </span><span class="token operator" style="color:hsl(40, 90%, 60%)">=</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(350, 40%, 70%)">new</span><span class="token plain"> </span><span class="token class-name">Tray</span><span class="token punctuation" style="opacity:0.7">(</span><span class="token plain">trayIco</span><span class="token punctuation" style="opacity:0.7">)</span><span class="token punctuation" style="opacity:0.7">;</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">    tray</span><span class="token punctuation" style="opacity:0.7">.</span><span class="token function">setIgnoreDoubleClickEvents</span><span class="token punctuation" style="opacity:0.7">(</span><span class="token boolean" style="color:hsl(350, 40%, 70%)">true</span><span class="token punctuation" style="opacity:0.7">)</span><span class="token punctuation" style="opacity:0.7">;</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">    </span><span class="token keyword" style="color:hsl(350, 40%, 70%)">if</span><span class="token plain"> </span><span class="token punctuation" style="opacity:0.7">(</span><span class="token plain">process</span><span class="token punctuation" style="opacity:0.7">.</span><span class="token plain">platform </span><span class="token operator" style="color:hsl(40, 90%, 60%)">!==</span><span class="token plain"> </span><span class="token string" style="color:hsl(40, 90%, 60%)">&#x27;darwin&#x27;</span><span class="token punctuation" style="opacity:0.7">)</span><span class="token plain"> </span><span class="token punctuation" style="opacity:0.7">{</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">      tray</span><span class="token punctuation" style="opacity:0.7">.</span><span class="token function">on</span><span class="token punctuation" style="opacity:0.7">(</span><span class="token string" style="color:hsl(40, 90%, 60%)">&#x27;click&#x27;</span><span class="token punctuation" style="opacity:0.7">,</span><span class="token plain"> </span><span class="token punctuation" style="opacity:0.7">(</span><span class="token punctuation" style="opacity:0.7">)</span><span class="token plain"> </span><span class="token operator" style="color:hsl(40, 90%, 60%)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="opacity:0.7">{</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">        </span><span class="token keyword" style="color:hsl(350, 40%, 70%)">if</span><span class="token plain"> </span><span class="token punctuation" style="opacity:0.7">(</span><span class="token operator" style="color:hsl(40, 90%, 60%)">!</span><span class="token plain">mainWindow</span><span class="token punctuation" style="opacity:0.7">.</span><span class="token function">isVisible</span><span class="token punctuation" style="opacity:0.7">(</span><span class="token punctuation" style="opacity:0.7">)</span><span class="token punctuation" style="opacity:0.7">)</span><span class="token plain"> </span><span class="token punctuation" style="opacity:0.7">{</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">          mainWindow</span><span class="token punctuation" style="opacity:0.7">.</span><span class="token function">show</span><span class="token punctuation" style="opacity:0.7">(</span><span class="token punctuation" style="opacity:0.7">)</span><span class="token punctuation" style="opacity:0.7">;</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">        </span><span class="token punctuation" style="opacity:0.7">}</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">      </span><span class="token punctuation" style="opacity:0.7">}</span><span class="token punctuation" style="opacity:0.7">)</span><span class="token punctuation" style="opacity:0.7">;</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">    </span><span class="token punctuation" style="opacity:0.7">}</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">    </span><span class="token keyword" style="color:hsl(350, 40%, 70%)">const</span><span class="token plain"> contextMenu </span><span class="token operator" style="color:hsl(40, 90%, 60%)">=</span><span class="token plain"> Menu</span><span class="token punctuation" style="opacity:0.7">.</span><span class="token function">buildFromTemplate</span><span class="token punctuation" style="opacity:0.7">(</span><span class="token punctuation" style="opacity:0.7">[</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">      </span><span class="token punctuation" style="opacity:0.7">{</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">        label</span><span class="token punctuation" style="opacity:0.7">:</span><span class="token plain"> </span><span class="token string" style="color:hsl(40, 90%, 60%)">&#x27;关于产品&#x27;</span><span class="token punctuation" style="opacity:0.7">,</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">        role</span><span class="token punctuation" style="opacity:0.7">:</span><span class="token plain"> </span><span class="token string" style="color:hsl(40, 90%, 60%)">&#x27;about&#x27;</span><span class="token punctuation" style="opacity:0.7">,</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">      </span><span class="token punctuation" style="opacity:0.7">}</span><span class="token punctuation" style="opacity:0.7">,</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">      </span><span class="token punctuation" style="opacity:0.7">{</span><span class="token plain"> type</span><span class="token punctuation" style="opacity:0.7">:</span><span class="token plain"> </span><span class="token string" style="color:hsl(40, 90%, 60%)">&#x27;separator&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="opacity:0.7">}</span><span class="token punctuation" style="opacity:0.7">,</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">      </span><span class="token punctuation" style="opacity:0.7">{</span><span class="token plain"> </span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">        label</span><span class="token punctuation" style="opacity:0.7">:</span><span class="token plain"> </span><span class="token string" style="color:hsl(40, 90%, 60%)">&#x27;显示&#x27;</span><span class="token punctuation" style="opacity:0.7">,</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">        </span><span class="token function-variable function">click</span><span class="token punctuation" style="opacity:0.7">:</span><span class="token plain"> </span><span class="token punctuation" style="opacity:0.7">(</span><span class="token punctuation" style="opacity:0.7">)</span><span class="token plain"> </span><span class="token operator" style="color:hsl(40, 90%, 60%)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="opacity:0.7">{</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">          </span><span class="token keyword" style="color:hsl(350, 40%, 70%)">if</span><span class="token plain"> </span><span class="token punctuation" style="opacity:0.7">(</span><span class="token operator" style="color:hsl(40, 90%, 60%)">!</span><span class="token plain">mainWindow</span><span class="token punctuation" style="opacity:0.7">.</span><span class="token function">isVisible</span><span class="token punctuation" style="opacity:0.7">(</span><span class="token punctuation" style="opacity:0.7">)</span><span class="token punctuation" style="opacity:0.7">)</span><span class="token plain"> </span><span class="token punctuation" style="opacity:0.7">{</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">            mainWindow</span><span class="token punctuation" style="opacity:0.7">.</span><span class="token function">show</span><span class="token punctuation" style="opacity:0.7">(</span><span class="token punctuation" style="opacity:0.7">)</span><span class="token punctuation" style="opacity:0.7">;</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">          </span><span class="token punctuation" style="opacity:0.7">}</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">        </span><span class="token punctuation" style="opacity:0.7">}</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">      </span><span class="token punctuation" style="opacity:0.7">}</span><span class="token punctuation" style="opacity:0.7">,</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">      </span><span class="token punctuation" style="opacity:0.7">{</span><span class="token plain"> type</span><span class="token punctuation" style="opacity:0.7">:</span><span class="token plain"> </span><span class="token string" style="color:hsl(40, 90%, 60%)">&#x27;separator&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="opacity:0.7">}</span><span class="token punctuation" style="opacity:0.7">,</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">      </span><span class="token punctuation" style="opacity:0.7">{</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">        label</span><span class="token punctuation" style="opacity:0.7">:</span><span class="token plain"> </span><span class="token string" style="color:hsl(40, 90%, 60%)">&#x27;退出&#x27;</span><span class="token punctuation" style="opacity:0.7">,</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">        </span><span class="token function-variable function">click</span><span class="token punctuation" style="opacity:0.7">:</span><span class="token plain"> </span><span class="token parameter">e</span><span class="token plain"> </span><span class="token operator" style="color:hsl(40, 90%, 60%)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="opacity:0.7">{</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">          </span><span class="token keyword" style="color:hsl(350, 40%, 70%)">if</span><span class="token plain"> </span><span class="token punctuation" style="opacity:0.7">(</span><span class="token operator" style="color:hsl(40, 90%, 60%)">!</span><span class="token plain">mainWindow</span><span class="token punctuation" style="opacity:0.7">.</span><span class="token function">isVisible</span><span class="token punctuation" style="opacity:0.7">(</span><span class="token punctuation" style="opacity:0.7">)</span><span class="token punctuation" style="opacity:0.7">)</span><span class="token plain"> </span><span class="token punctuation" style="opacity:0.7">{</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">            mainWindow</span><span class="token punctuation" style="opacity:0.7">.</span><span class="token function">show</span><span class="token punctuation" style="opacity:0.7">(</span><span class="token punctuation" style="opacity:0.7">)</span><span class="token punctuation" style="opacity:0.7">;</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">          </span><span class="token punctuation" style="opacity:0.7">}</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">          </span><span class="token function">confirmForWorkers</span><span class="token punctuation" style="opacity:0.7">(</span><span class="token plain">e</span><span class="token punctuation" style="opacity:0.7">)</span><span class="token punctuation" style="opacity:0.7">;</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">        </span><span class="token punctuation" style="opacity:0.7">}</span><span class="token punctuation" style="opacity:0.7">,</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">      </span><span class="token punctuation" style="opacity:0.7">}</span><span class="token punctuation" style="opacity:0.7">,</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">    </span><span class="token punctuation" style="opacity:0.7">]</span><span class="token punctuation" style="opacity:0.7">)</span><span class="token punctuation" style="opacity:0.7">;</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">    tray</span><span class="token punctuation" style="opacity:0.7">.</span><span class="token function">setContextMenu</span><span class="token punctuation" style="opacity:0.7">(</span><span class="token plain">contextMenu</span><span class="token punctuation" style="opacity:0.7">)</span><span class="token punctuation" style="opacity:0.7">;</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">  </span><span class="token punctuation" style="opacity:0.7">}</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">  </span><span class="token function">createTray</span><span class="token punctuation" style="opacity:0.7">(</span><span class="token punctuation" style="opacity:0.7">)</span><span class="token punctuation" style="opacity:0.7">;</span></div></pre><style type="text/css">
/**
 * Reset the text fill color so that placeholder is visible
 */
.npm__react-simple-code-editor__textarea:empty {
  -webkit-text-fill-color: inherit !important;
}

/**
 * Hack to apply on some CSS on IE10 and IE11
 */
@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {
  /**
    * IE doesn't support '-webkit-text-fill-color'
    * So we use 'color: transparent' to make the text transparent on IE
    * Unlike other browsers, it doesn't affect caret color in IE
    */
  .npm__react-simple-code-editor__textarea {
    color: transparent !important;
  }

  .npm__react-simple-code-editor__textarea::selection {
    background-color: #accef7 !important;
    color: transparent !important;
  }
}
</style></div></div></div><h3 id="%E6%A0%B9%E6%8D%AE%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%B1%BB%E5%9E%8B%E5%92%8C%E7%B3%BB%E7%BB%9F%20Mode%20%E5%AE%9A%E5%88%B6%E6%89%98%E7%9B%98%E5%9B%BE%E6%A0%87" class="heading"><span>根据操作系统类型和系统 Mode 定制托盘图标</span><a name="根据操作系统类型和系统 Mode 定制托盘图标" href="#%E6%A0%B9%E6%8D%AE%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%B1%BB%E5%9E%8B%E5%92%8C%E7%B3%BB%E7%BB%9F%20Mode%20%E5%AE%9A%E5%88%B6%E6%89%98%E7%9B%98%E5%9B%BE%E6%A0%87" class="anchor">#</a></h3><p>MacOS 支持 light、dark 两种 mode，根据 mode 展示不同的图标：</p><p><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:276px">
      <a class="gatsby-resp-image-link" href="/blog/static/2692645e2f4d0348d421eadff15af3c3/3bcdc/electron-tray-mac-light.png" style="display:block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-background-image" style="padding-bottom:93.47826086956522%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAABYlAAAWJQFJUiTwAAAECklEQVQ4y2WUS2wbVRSGZ8uGDTvWrLOFSsAGCQkJCYEqxAqEQCoLYEGpENBKqAgClUBAEUpp00QpbRKHxLET2/HEY8eZseP3Y162x3Zsxx7HbzsJXbD6OXPtJI1Y/Drjc+/9zn/Pvb5cqTVEkVTv9pG+8T0+evcO3px6Ga+/cBm/vf0lGj4eznAKLkFEpTXAQe8Yi+tuzC/b0Tn5F7XOCIejx4jJeUiJLDgLaLSO0GyaEL6bxXMfi3jm0gd46pWv8P6Hc0jN3oVdisMTCCGU1lBpD/HaW+9g6vmX8M2PP6PRP8YSFXj1jctYdnjAVdojlDrHaLVb2L3xC6Y+TeLZS1fw9Iuf4cp797G//BALngDWXNvw7kbQGJwgrhQY7JNrX6NQO2TFNraD2Dc74GxCCjYhiSV/Cr6b0/BcuwXH1W9h/3wa0evTKKVVZM0jJIsm9MYAujlE4fAIxfYJk1zpQK/3wUc1rAcS4P7ciOHeRhS/r4p4wMdRLB+gWGmiuF/HfZsTNpq0zIexIkTxyCNibt0H+04C8w4B6WoP8sGAac4RxKxDBPcooGLRr2LOHccin0C6PiKRo9oQt2ZtWHAKWPFFsOSV8JcrCH/awB+LTlz/aQbxYhNqYwSlPsCiN8LWc6vhElZDRTz0yVgJZJA96EOuD5GircRLh0iU2yymq102Vug8hqRVGThDDhWaawFXqG1rQRXcZrKBzWQdfxN0TdSQ3G8jSbBUpQuFqmdpOxkCZWo9pClvjVtghfqZrnZYYSvag1lsRkrgvEoHXqUNR6yGjYhx5lCmqkG5jEihgQRBEuUWQcZuxn3rs29LKsE3wzr4ZA3cttbHttbDZqIOV7Q0nmSOmL744TZ+XVjFHZuL9S3XOmbOVAI/KY1O3r2Xhy9TB+cjmCUXbd0VK40XNI+Y03urW5h3+uAUk3CFM2xMa46gmmPIqfTmEJ5IHgID6v0LQJnulEwL5cniMWAcLaDS6F+Qyhz3GdA/dtiHQEC3BYwWqflddgBWZE4mjixZuezB/yWT3Hs5+LMNcAJzSAk66a14iQC0BfonWIBlXsISL8IbU8mBTFfmZDI+OlNuoq1o/hTYYw495NACKqbVwxHb+s3bs5ieWcDMkpMOxfFE3wYXZPVwK1o4d+gnqDdtErDMqhrdf1jcyRp0gXMI56rYy1eRp1fJ6J7AoMfE6JzHfGtEuzAQkE1wgVwPOwQV6C56YmXwCYMG81QxB1+yiG0mg76tfA7eqH4mnuSL03WhNXxiH7taC1ww38Nu3oJ24acKbjoYp6RjXVRh31VIKn3rcFDOyaRhg3QaXSEqQkaCigkpR8+XWOiBKd+lRBuSfghRazJJVrR+k6SJQhNJ2rlCeova0kaYGP8BTf4D5Ng1dG8AAAAASUVORK5CYII=&#x27;);background-size:cover;display:block"></span>
  <img class="gatsby-resp-image-image" alt="electron tray mac light" title="electron tray mac light" src="/blog/static/2692645e2f4d0348d421eadff15af3c3/3bcdc/electron-tray-mac-light.png" srcSet="/blog/static/2692645e2f4d0348d421eadff15af3c3/6a467/electron-tray-mac-light.png 210w,/blog/static/2692645e2f4d0348d421eadff15af3c3/3bcdc/electron-tray-mac-light.png 276w" sizes="(max-width: 276px) 100vw, 276px" loading="lazy"/>
  </a>
    </span>
<span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:316px">
      <a class="gatsby-resp-image-link" href="/blog/static/4e3595865b2b933d6c2d4402413066c8/8594d/electron-tray-mac-dark.png" style="display:block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-background-image" style="padding-bottom:100%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAABYlAAAWJQFJUiTwAAAEJ0lEQVQ4y1WSeVNTVxiH8638o9aOtuN0xpEq6hTRVkSwQiCQsEgISxIkKxC2BBJDa2URgRaEsZBACCFhjWXJHuxMJbJk/Qy/vueQIM3MM+/Nufc+5/e+5wqu3noExjXi8p0n+On7m5DnyzA57MbMiAvVd9VoKSiEUK7HvSIhrty4jx7L79D2Wui6AFfzClEkrENtixrX6Fpw+UYhviauEJfyHuHhN9+hqGoGsl2gNwx8VenBsEQMUZsBUoWeBA/gWtsG+xlMv+LWw1/g3fWjy2jFpW9/gOB2sQT5xTW4Q9wsqUd54WMo86Uwd77H6545iPLkkD34GaUyDcpq5bh+7wmu3y2GQm/Ec2UH7j+VoFTSjB9LxCgoFUPwp/cI095jvPtwhFlizBmEtk6GF6VCtD+rwpCyHVKdGYqe39Dc+RJd1nGqVtS86EPpczWeSTVQ9o/AthPD4t5nCP7ypTHvT8MWSGPBn8JbVwgVKjNKlEaIdFbMe0OwvJnD8LQd5jezMA5PY8rmgc2zA5HcgHKZHhrzOBy+Y7jCSRLuJzHvS5GM6n4cYw4fJMoeVDR1oKatF4ruIUi1g6hTGSGhVE8btGjrfQXtwAiqFd0k1KHdNAr7ziFWggkIWCpbIAU7YfMlMO70o0FnQZ2GJOpBCFsMqG7rJ/pQqzLRPTO12w8J/W+gjWrb+6GzTJAwhpUQJbT5mSyNxWAadtayMwAxJRO2dKFK3g3TyAyfn8r4mieszK7nEDbpoaKES7sxrHIhyezBDBcuUsqJlQDfvby5kxIZsRf5F6OzS3i/vI4WOhRhcweJDBC1Gi4Ix+A4F3JZBkvnwiAXVlASVtWmEbQahtBIrYpptmeiM9gMmVBNCZf3YnAzYa5dJlwi4SQJpTTDepohg89Q2cdnWK8Z4HPLIdWxw+qH/uUET+hmp3wu48IkpqjlmmzCKkpgpk9GOzgKHSGh2Va2dp0lpKTVVIVNOqgHWMLP8DAhF4XScDAo4R+UkH20TFivNmEn9A+m7R4srG5DTq2zQ6lW9JCsG2KqlTRTLtzPCh1Z2TKD5O/WDvg3V9aopZe6IKO2GrUmyAhxNlFls54jIlmZVI1O6yRc/pMz4XI4AyexEk7Td0Tz3DvCuN0L69QSLJN2mMYXMPDWxrFMLtL6F4aIV9PLmHMHsRqIYy2SgsAVyYCxGklzXKEE7XbMT82x+4nqIbUT4y2x6tw/hHPvCy7fEdyBU6xRuvUoCd3RDBieaBprtLARSWIjnCDi56xHEpwNYjMSx2ZunZ5j8HfYu0zIJOsX2IwmsR1NEPFsTcJ7kCKSnA8HCXijjCS/t0WyzSxMLNjISnJsMdHBKb3MiBMJksT/Dz3j5RvmOCUxJacOBFu0W47tC7KdjwTVvzknZ/UjE2bXorQWPc5yQpuc0Can+A/7l6xqX8N3KgAAAABJRU5ErkJggg==&#x27;);background-size:cover;display:block"></span>
  <img class="gatsby-resp-image-image" alt="electron tray mac dark" title="electron tray mac dark" src="/blog/static/4e3595865b2b933d6c2d4402413066c8/8594d/electron-tray-mac-dark.png" srcSet="/blog/static/4e3595865b2b933d6c2d4402413066c8/6a467/electron-tray-mac-dark.png 210w,/blog/static/4e3595865b2b933d6c2d4402413066c8/8594d/electron-tray-mac-dark.png 316w" sizes="(max-width: 316px) 100vw, 316px" loading="lazy"/>
  </a>
    </span></p><ul><li><code>nativeTheme.shouldUseDarkColors</code> 可以判断系统 mode</li></ul><div class="pre"><div class="playground show"><div style="position:relative;text-align:left;box-sizing:border-box;padding:0;overflow:hidden;white-space:pre;font-family:monospace"><textarea style="margin:0;border:0;background:none;box-sizing:inherit;display:inherit;font-family:inherit;font-size:inherit;font-style:inherit;font-variant-ligatures:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;tab-size:inherit;text-indent:inherit;text-rendering:inherit;text-transform:inherit;white-space:pre-wrap;word-break:keep-all;overflow-wrap:break-word;position:absolute;top:0;left:0;height:100%;width:100%;resize:none;color:inherit;overflow:hidden;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;-webkit-text-fill-color:transparent;padding-top:10px;padding-right:10px;padding-bottom:10px;padding-left:10px" class="npm__react-simple-code-editor__textarea" disabled="" autoCapitalize="off" autoComplete="off" autoCorrect="off" spellcheck="false" data-gramm="false">const getTrayIcon = () =&gt; path.resolve(__dirname, process.platform !== &#x27;darwin&#x27; ? &#x27;tray_win.png&#x27; : nativeTheme.shouldUseDarkColors ? &#x27;tray_dark.png&#x27; : &#x27;tray_light.png&#x27;);</textarea><pre aria-hidden="true" style="margin:0;border:0;background:none;box-sizing:inherit;display:inherit;font-family:inherit;font-size:inherit;font-style:inherit;font-variant-ligatures:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;tab-size:inherit;text-indent:inherit;text-rendering:inherit;text-transform:inherit;white-space:pre-wrap;word-break:keep-all;overflow-wrap:break-word;position:relative;pointer-events:none;padding-top:10px;padding-right:10px;padding-bottom:10px;padding-left:10px"><div class="token-line" style="color:#C5C8C6"><span class="token keyword" style="color:hsl(350, 40%, 70%)">const</span><span class="token plain"> </span><span class="token function-variable function">getTrayIcon</span><span class="token plain"> </span><span class="token operator" style="color:hsl(40, 90%, 60%)">=</span><span class="token plain"> </span><span class="token punctuation" style="opacity:0.7">(</span><span class="token punctuation" style="opacity:0.7">)</span><span class="token plain"> </span><span class="token operator" style="color:hsl(40, 90%, 60%)">=&gt;</span><span class="token plain"> path</span><span class="token punctuation" style="opacity:0.7">.</span><span class="token function">resolve</span><span class="token punctuation" style="opacity:0.7">(</span><span class="token plain">__dirname</span><span class="token punctuation" style="opacity:0.7">,</span><span class="token plain"> process</span><span class="token punctuation" style="opacity:0.7">.</span><span class="token plain">platform </span><span class="token operator" style="color:hsl(40, 90%, 60%)">!==</span><span class="token plain"> </span><span class="token string" style="color:hsl(40, 90%, 60%)">&#x27;darwin&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:hsl(40, 90%, 60%)">?</span><span class="token plain"> </span><span class="token string" style="color:hsl(40, 90%, 60%)">&#x27;tray_win.png&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="opacity:0.7">:</span><span class="token plain"> nativeTheme</span><span class="token punctuation" style="opacity:0.7">.</span><span class="token plain">shouldUseDarkColors </span><span class="token operator" style="color:hsl(40, 90%, 60%)">?</span><span class="token plain"> </span><span class="token string" style="color:hsl(40, 90%, 60%)">&#x27;tray_dark.png&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="opacity:0.7">:</span><span class="token plain"> </span><span class="token string" style="color:hsl(40, 90%, 60%)">&#x27;tray_light.png&#x27;</span><span class="token punctuation" style="opacity:0.7">)</span><span class="token punctuation" style="opacity:0.7">;</span></div></pre><style type="text/css">
/**
 * Reset the text fill color so that placeholder is visible
 */
.npm__react-simple-code-editor__textarea:empty {
  -webkit-text-fill-color: inherit !important;
}

/**
 * Hack to apply on some CSS on IE10 and IE11
 */
@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {
  /**
    * IE doesn't support '-webkit-text-fill-color'
    * So we use 'color: transparent' to make the text transparent on IE
    * Unlike other browsers, it doesn't affect caret color in IE
    */
  .npm__react-simple-code-editor__textarea {
    color: transparent !important;
  }

  .npm__react-simple-code-editor__textarea::selection {
    background-color: #accef7 !important;
    color: transparent !important;
  }
}
</style></div></div></div><h3 id="%E5%88%87%E6%8D%A2%E7%B3%BB%E7%BB%9F%20Mode%20%E5%AE%9A%E5%88%B6%E6%89%98%E7%9B%98%E5%9B%BE%E6%A0%87%E6%94%B9%E5%8F%98" class="heading"><span>切换系统 Mode 定制托盘图标改变</span><a name="切换系统 Mode 定制托盘图标改变" href="#%E5%88%87%E6%8D%A2%E7%B3%BB%E7%BB%9F%20Mode%20%E5%AE%9A%E5%88%B6%E6%89%98%E7%9B%98%E5%9B%BE%E6%A0%87%E6%94%B9%E5%8F%98" class="anchor">#</a></h3><p><img src="electron-tray-update-mac.gif" alt="electron tray mac update"/></p><ul><li><code>nativeTheme</code> 提供 <code>update</code> 监听系统本身的 Mode 变化</li></ul><div class="pre"><div class="playground show"><div style="position:relative;text-align:left;box-sizing:border-box;padding:0;overflow:hidden;white-space:pre;font-family:monospace"><textarea style="margin:0;border:0;background:none;box-sizing:inherit;display:inherit;font-family:inherit;font-size:inherit;font-style:inherit;font-variant-ligatures:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;tab-size:inherit;text-indent:inherit;text-rendering:inherit;text-transform:inherit;white-space:pre-wrap;word-break:keep-all;overflow-wrap:break-word;position:absolute;top:0;left:0;height:100%;width:100%;resize:none;color:inherit;overflow:hidden;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;-webkit-text-fill-color:transparent;padding-top:10px;padding-right:10px;padding-bottom:10px;padding-left:10px" class="npm__react-simple-code-editor__textarea" disabled="" autoCapitalize="off" autoComplete="off" autoCorrect="off" spellcheck="false" data-gramm="false">// refresh icon when MacOS dark/light theme has changed
  nativeTheme.on(&#x27;updated&#x27;, () =&gt; tray &amp;&amp; tray.setImage(getTrayIcon()));</textarea><pre aria-hidden="true" style="margin:0;border:0;background:none;box-sizing:inherit;display:inherit;font-family:inherit;font-size:inherit;font-style:inherit;font-variant-ligatures:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;tab-size:inherit;text-indent:inherit;text-rendering:inherit;text-transform:inherit;white-space:pre-wrap;word-break:keep-all;overflow-wrap:break-word;position:relative;pointer-events:none;padding-top:10px;padding-right:10px;padding-bottom:10px;padding-left:10px"><div class="token-line" style="color:#C5C8C6"><span class="token comment" style="color:hsl(30, 20%, 50%)">// refresh icon when MacOS dark/light theme has changed</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">  nativeTheme</span><span class="token punctuation" style="opacity:0.7">.</span><span class="token function">on</span><span class="token punctuation" style="opacity:0.7">(</span><span class="token string" style="color:hsl(40, 90%, 60%)">&#x27;updated&#x27;</span><span class="token punctuation" style="opacity:0.7">,</span><span class="token plain"> </span><span class="token punctuation" style="opacity:0.7">(</span><span class="token punctuation" style="opacity:0.7">)</span><span class="token plain"> </span><span class="token operator" style="color:hsl(40, 90%, 60%)">=&gt;</span><span class="token plain"> tray </span><span class="token operator" style="color:hsl(40, 90%, 60%)">&amp;&amp;</span><span class="token plain"> tray</span><span class="token punctuation" style="opacity:0.7">.</span><span class="token function">setImage</span><span class="token punctuation" style="opacity:0.7">(</span><span class="token function">getTrayIcon</span><span class="token punctuation" style="opacity:0.7">(</span><span class="token punctuation" style="opacity:0.7">)</span><span class="token punctuation" style="opacity:0.7">)</span><span class="token punctuation" style="opacity:0.7">)</span><span class="token punctuation" style="opacity:0.7">;</span></div></pre><style type="text/css">
/**
 * Reset the text fill color so that placeholder is visible
 */
.npm__react-simple-code-editor__textarea:empty {
  -webkit-text-fill-color: inherit !important;
}

/**
 * Hack to apply on some CSS on IE10 and IE11
 */
@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {
  /**
    * IE doesn't support '-webkit-text-fill-color'
    * So we use 'color: transparent' to make the text transparent on IE
    * Unlike other browsers, it doesn't affect caret color in IE
    */
  .npm__react-simple-code-editor__textarea {
    color: transparent !important;
  }

  .npm__react-simple-code-editor__textarea::selection {
    background-color: #accef7 !important;
    color: transparent !important;
  }
}
</style></div></div></div><h3 id="%E6%89%98%E7%9B%98%E5%85%B6%E4%BB%96%E5%9C%BA%E6%99%AF" class="heading"><span>托盘其他场景</span><a name="托盘其他场景" href="#%E6%89%98%E7%9B%98%E5%85%B6%E4%BB%96%E5%9C%BA%E6%99%AF" class="anchor">#</a></h3><ul><li>显示未读消息数 <code>tray.setTitle(&#x27;6&#x27;)</code>;</li><li>有未读消息时图标闪动：通过 <code>setImage</code> 定时轮询切换图标实现</li></ul><h2 id="%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9" class="heading"><span>注意事项</span><a name="注意事项" href="#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9" class="anchor">#</a></h2><ul><li><code>MacOS</code> 全屏退出界面是会出现黑屏问题，解决方案</li></ul><p>判断如果全屏，在关闭全屏时，先退出全屏再隐藏界面</p><div class="pre"><div class="playground show"><div style="position:relative;text-align:left;box-sizing:border-box;padding:0;overflow:hidden;white-space:pre;font-family:monospace"><textarea style="margin:0;border:0;background:none;box-sizing:inherit;display:inherit;font-family:inherit;font-size:inherit;font-style:inherit;font-variant-ligatures:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;tab-size:inherit;text-indent:inherit;text-rendering:inherit;text-transform:inherit;white-space:pre-wrap;word-break:keep-all;overflow-wrap:break-word;position:absolute;top:0;left:0;height:100%;width:100%;resize:none;color:inherit;overflow:hidden;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;-webkit-text-fill-color:transparent;padding-top:10px;padding-right:10px;padding-bottom:10px;padding-left:10px" class="npm__react-simple-code-editor__textarea" disabled="" autoCapitalize="off" autoComplete="off" autoCorrect="off" spellcheck="false" data-gramm="false">// 修复全屏 hide 黑屏问题
// https://github.com/electron/electron/issues/20263
if (mainWindow.isFullScreen()) {
  mainWindow.once(&#x27;leave-full-screen&#x27;, () =&gt; mainWindow.hide());
  mainWindow.setFullScreen(false);
} else {
  mainWindow.hide();
}</textarea><pre aria-hidden="true" style="margin:0;border:0;background:none;box-sizing:inherit;display:inherit;font-family:inherit;font-size:inherit;font-style:inherit;font-variant-ligatures:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;tab-size:inherit;text-indent:inherit;text-rendering:inherit;text-transform:inherit;white-space:pre-wrap;word-break:keep-all;overflow-wrap:break-word;position:relative;pointer-events:none;padding-top:10px;padding-right:10px;padding-bottom:10px;padding-left:10px"><div class="token-line" style="color:#C5C8C6"><span class="token comment" style="color:hsl(30, 20%, 50%)">// 修复全屏 hide 黑屏问题</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain"></span><span class="token comment" style="color:hsl(30, 20%, 50%)">// https://github.com/electron/electron/issues/20263</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain"></span><span class="token keyword" style="color:hsl(350, 40%, 70%)">if</span><span class="token plain"> </span><span class="token punctuation" style="opacity:0.7">(</span><span class="token plain">mainWindow</span><span class="token punctuation" style="opacity:0.7">.</span><span class="token function">isFullScreen</span><span class="token punctuation" style="opacity:0.7">(</span><span class="token punctuation" style="opacity:0.7">)</span><span class="token punctuation" style="opacity:0.7">)</span><span class="token plain"> </span><span class="token punctuation" style="opacity:0.7">{</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">  mainWindow</span><span class="token punctuation" style="opacity:0.7">.</span><span class="token function">once</span><span class="token punctuation" style="opacity:0.7">(</span><span class="token string" style="color:hsl(40, 90%, 60%)">&#x27;leave-full-screen&#x27;</span><span class="token punctuation" style="opacity:0.7">,</span><span class="token plain"> </span><span class="token punctuation" style="opacity:0.7">(</span><span class="token punctuation" style="opacity:0.7">)</span><span class="token plain"> </span><span class="token operator" style="color:hsl(40, 90%, 60%)">=&gt;</span><span class="token plain"> mainWindow</span><span class="token punctuation" style="opacity:0.7">.</span><span class="token function">hide</span><span class="token punctuation" style="opacity:0.7">(</span><span class="token punctuation" style="opacity:0.7">)</span><span class="token punctuation" style="opacity:0.7">)</span><span class="token punctuation" style="opacity:0.7">;</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">  mainWindow</span><span class="token punctuation" style="opacity:0.7">.</span><span class="token function">setFullScreen</span><span class="token punctuation" style="opacity:0.7">(</span><span class="token boolean" style="color:hsl(350, 40%, 70%)">false</span><span class="token punctuation" style="opacity:0.7">)</span><span class="token punctuation" style="opacity:0.7">;</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain"></span><span class="token punctuation" style="opacity:0.7">}</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(350, 40%, 70%)">else</span><span class="token plain"> </span><span class="token punctuation" style="opacity:0.7">{</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">  mainWindow</span><span class="token punctuation" style="opacity:0.7">.</span><span class="token function">hide</span><span class="token punctuation" style="opacity:0.7">(</span><span class="token punctuation" style="opacity:0.7">)</span><span class="token punctuation" style="opacity:0.7">;</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain"></span><span class="token punctuation" style="opacity:0.7">}</span></div></pre><style type="text/css">
/**
 * Reset the text fill color so that placeholder is visible
 */
.npm__react-simple-code-editor__textarea:empty {
  -webkit-text-fill-color: inherit !important;
}

/**
 * Hack to apply on some CSS on IE10 and IE11
 */
@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {
  /**
    * IE doesn't support '-webkit-text-fill-color'
    * So we use 'color: transparent' to make the text transparent on IE
    * Unlike other browsers, it doesn't affect caret color in IE
    */
  .npm__react-simple-code-editor__textarea {
    color: transparent !important;
  }

  .npm__react-simple-code-editor__textarea::selection {
    background-color: #accef7 !important;
    color: transparent !important;
  }
}
</style></div></div></div><ul><li><code>Windows</code> 下面点击关闭出现二次确认框，但是界面马上关闭</li></ul><p>需要阻止事件流，在 <code>close</code> 时阻止就可以</p><div class="pre"><div class="playground show"><div style="position:relative;text-align:left;box-sizing:border-box;padding:0;overflow:hidden;white-space:pre;font-family:monospace"><textarea style="margin:0;border:0;background:none;box-sizing:inherit;display:inherit;font-family:inherit;font-size:inherit;font-style:inherit;font-variant-ligatures:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;tab-size:inherit;text-indent:inherit;text-rendering:inherit;text-transform:inherit;white-space:pre-wrap;word-break:keep-all;overflow-wrap:break-word;position:absolute;top:0;left:0;height:100%;width:100%;resize:none;color:inherit;overflow:hidden;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;-webkit-text-fill-color:transparent;padding-top:10px;padding-right:10px;padding-bottom:10px;padding-left:10px" class="npm__react-simple-code-editor__textarea" disabled="" autoCapitalize="off" autoComplete="off" autoCorrect="off" spellcheck="false" data-gramm="false">mainWindow.on(&#x27;close&#x27;, (e) =&gt; {
  ...
  e.preventDefault();
})</textarea><pre aria-hidden="true" style="margin:0;border:0;background:none;box-sizing:inherit;display:inherit;font-family:inherit;font-size:inherit;font-style:inherit;font-variant-ligatures:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;tab-size:inherit;text-indent:inherit;text-rendering:inherit;text-transform:inherit;white-space:pre-wrap;word-break:keep-all;overflow-wrap:break-word;position:relative;pointer-events:none;padding-top:10px;padding-right:10px;padding-bottom:10px;padding-left:10px"><div class="token-line" style="color:#C5C8C6"><span class="token plain">mainWindow</span><span class="token punctuation" style="opacity:0.7">.</span><span class="token function">on</span><span class="token punctuation" style="opacity:0.7">(</span><span class="token string" style="color:hsl(40, 90%, 60%)">&#x27;close&#x27;</span><span class="token punctuation" style="opacity:0.7">,</span><span class="token plain"> </span><span class="token punctuation" style="opacity:0.7">(</span><span class="token parameter">e</span><span class="token punctuation" style="opacity:0.7">)</span><span class="token plain"> </span><span class="token operator" style="color:hsl(40, 90%, 60%)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="opacity:0.7">{</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">  </span><span class="token operator" style="color:hsl(40, 90%, 60%)">...</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">  e</span><span class="token punctuation" style="opacity:0.7">.</span><span class="token function">preventDefault</span><span class="token punctuation" style="opacity:0.7">(</span><span class="token punctuation" style="opacity:0.7">)</span><span class="token punctuation" style="opacity:0.7">;</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain"></span><span class="token punctuation" style="opacity:0.7">}</span><span class="token punctuation" style="opacity:0.7">)</span></div></pre><style type="text/css">
/**
 * Reset the text fill color so that placeholder is visible
 */
.npm__react-simple-code-editor__textarea:empty {
  -webkit-text-fill-color: inherit !important;
}

/**
 * Hack to apply on some CSS on IE10 and IE11
 */
@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {
  /**
    * IE doesn't support '-webkit-text-fill-color'
    * So we use 'color: transparent' to make the text transparent on IE
    * Unlike other browsers, it doesn't affect caret color in IE
    */
  .npm__react-simple-code-editor__textarea {
    color: transparent !important;
  }

  .npm__react-simple-code-editor__textarea::selection {
    background-color: #accef7 !important;
    color: transparent !important;
  }
}
</style></div></div></div><div class="prev-next-nav"><a class="prev-page" rel="prev" href="/blog/json-tree/">← <!-- -->树形结构与扁平结构相互转换</a><a class="next-page" rel="next" href="/blog/django_blog/">Django 构建博客<!-- --> →</a></div></main><footer>© <!-- -->2021<!-- -->, Github<!-- --> <a href="https://github.com/buildGoodWeb/blog">Blog</a></footer></div></div></div></div><script>
  
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'undefined', 'auto', {});
      
      
      
      
      
      }</script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/electron-tray/";window.webpackCompilationHash="fe4b98b4e443afde89a7";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-aede868c16b590a60b51.js"],"component---node-modules-gatsby-plugin-offline-app-shell-js":["/component---node-modules-gatsby-plugin-offline-app-shell-js-6de38224883efd50a1e7.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js-ad0d66018576bc9befc8.js"],"component---src-templates-blog-list-template-js":["/component---src-templates-blog-list-template-js-7578d8b9e034657e7482.js"],"component---src-pages-404-js":["/component---src-pages-404-js-e51ad6aa676e3d86ad1a.js"]};/*]]>*/</script><script src="/blog/webpack-runtime-e7215cf539a6f354666c.js" async=""></script><script src="/blog/app-aede868c16b590a60b51.js" async=""></script><script src="/blog/commons-f3268c9d7cfa9cf83b38.js" async=""></script><script src="/blog/styles-50947f8f1e6f46efd725.js" async=""></script><script src="/blog/component---src-templates-blog-post-js-ad0d66018576bc9befc8.js" async=""></script></body></html>