{"componentChunkName":"component---src-templates-blog-post-js","path":"/react-hook/","webpackCompilationHash":"fe4b98b4e443afde89a7","result":{"data":{"mdx":{"id":"ab3d2d8e-27d9-59dd-ba91-ea44ae7bb309","excerpt":"Hooks 是为了解决 React 目前存在的一些问题： 有状态的逻辑很难在组件之间重用 React 没有提供一个有效的可重用方法。render props、HOC 模式的引入会导致重构组件，使得问题变得麻烦，组件难以维护。 复杂组件难以阅读和理解 类（Classes）让人困惑、影响机器运行效率 强依赖 react…","body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"React Hooks 调研\",\n  \"date\": \"2019-06-04T00:00:00.000Z\",\n  \"tags\": \"React, Hooks\",\n  \"description\": \"React Hooks 使用函数式（FC）进编码。\"\n};\n\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\n\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"Hooks \\u662F\\u4E3A\\u4E86\\u89E3\\u51B3 React \\u76EE\\u524D\\u5B58\\u5728\\u7684\\u4E00\\u4E9B\\u95EE\\u9898\\uFF1A\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"\\u6709\\u72B6\\u6001\\u7684\\u903B\\u8F91\\u5F88\\u96BE\\u5728\\u7EC4\\u4EF6\\u4E4B\\u95F4\\u91CD\\u7528\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"React \\u6CA1\\u6709\\u63D0\\u4F9B\\u4E00\\u4E2A\\u6709\\u6548\\u7684\\u53EF\\u91CD\\u7528\\u65B9\\u6CD5\\u3002render props\\u3001HOC \\u6A21\\u5F0F\\u7684\\u5F15\\u5165\\u4F1A\\u5BFC\\u81F4\\u91CD\\u6784\\u7EC4\\u4EF6\\uFF0C\\u4F7F\\u5F97\\u95EE\\u9898\\u53D8\\u5F97\\u9EBB\\u70E6\\uFF0C\\u7EC4\\u4EF6\\u96BE\\u4EE5\\u7EF4\\u62A4\\u3002\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"\\u590D\\u6742\\u7EC4\\u4EF6\\u96BE\\u4EE5\\u9605\\u8BFB\\u548C\\u7406\\u89E3\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"\\u7C7B\\uFF08Classes\\uFF09\\u8BA9\\u4EBA\\u56F0\\u60D1\\u3001\\u5F71\\u54CD\\u673A\\u5668\\u8FD0\\u884C\\u6548\\u7387\")), mdx(\"h2\", null, \"\\u5F3A\\u4F9D\\u8D56\"), mdx(\"h3\", null, \"react-scripts\"), mdx(\"p\", null, \"CRA \\u5347\\u7EA7 \\u2014 react-scripts 3.0.0 \\u4EE5\\u4E0A\\u3002\", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/facebook/create-react-app/blob/master/CHANGELOG.md\"\n  }), \"CHANGELOG\")), mdx(\"p\", null, \"react-scripts 3.0.0 \\u65B0\\u589E\\u7279\\u6027\\uFF1A\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Jest 24\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Hooks support \\u2014 \\u5F3A\\u5236\\u6267\\u884C Hooks \\u89C4\\u5219 eslint-plugin-react-hooks\")), mdx(\"h2\", null, \"API\"), mdx(\"h3\", null, \"useState\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-jsx\"\n  }), \"import React, { useState } from 'react';\\nexport default function Example() {\\n  const [ count, setCount ] = useState(0);\\n  const addCounter = () => {\\n    const newValue = count + 1;\\n    setCount(newValue);\\n  };\\n  return (\\n    <div>\\n      <p>You clicked {count} times</p>\\n      <button onClick={addCounter}>Click me</button>\\n    </div>\\n  )\\n}\\n\")), mdx(\"h3\", null, \"useEffect\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-jsx\"\n  }), \"useEffect(() => {\\n  document.title = `You clicked ${count} times`;\\n}, [count]); // Only re-run the effect if count changes\\n// \\u7B49\\u4EF7\\u4E8E\\ncomponentDidUpdate(prevProps, prevState) {\\n  if (prevState.count !== this.state.count) {\\n    document.title = `You clicked ${this.state.count} times`;\\n  }\\n}\\n\")), mdx(\"h2\", null, \"\\u9650\\u5236\"), mdx(\"p\", null, \"Hooks \\u7684\\u4F7F\\u7528\\u8981\\u9075\\u5FAA\\u56FA\\u5B9A\\u7684\\u89C4\\u5219 \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.npmjs.com/package/eslint-plugin-react-hooks\"\n  }), \"https://www.npmjs.com/package/eslint-plugin-react-hooks\"), \" CRA \\u5347\\u7EA7 react-scripts \\u5230 3.0.0 \\u9ED8\\u8BA4\\u9075\\u5B88\\u8FD9\\u4E2A\\u89C4\\u5219\"), mdx(\"h2\", null, \"\\u5B9E\\u6218\"), mdx(\"h3\", null, \"\\u5C01\\u88C5 useInterval Hook\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-jsx\"\n  }), \"\\n// Hooks && setInterval\\n// https://overreacted.io/zh-hans/making-setinterval-declarative-with-react-hooks/\\nimport React, { useState, useEffect, useRef } from 'react';\\nexport default function Counter() {\\n  const [ count, setCount ] = useState(0);\\n  /**\\n   * \\u5C1D\\u8BD5\\u4E00\\n   * React \\u4F1A\\u5728\\u6BCF\\u6B21\\u6E32\\u67D3\\u540E\\u91CD\\u6267\\u884C effects\\n   * setInterval \\u6267\\u884C\\u65F6\\u4F1A\\u8FDB\\u5165\\u5230\\u65F6\\u95F4\\u961F\\u5217\\u91CC\\uFF0C\\u5982\\u679C\\u9891\\u7E41\\u7684\\u66F4\\u65B0 effects, interval \\u6709\\u53EF\\u80FD\\u6CA1\\u6709\\u673A\\u4F1A\\u88AB\\u6267\\u884C\\u3002\\n   * \\u6BD4\\u5982\\u7ED9 Counter \\u5916\\u5C42\\u5305\\u88C5\\u4E00\\u5C42\\u5B9A\\u65F6\\u5668\\uFF0C\\u6CA1 100 ms \\u6267\\u884C\\u4E00\\u6B21\\uFF0C\\u8FD9\\u65F6\\u5019 effects \\u5185\\u90E8\\u7684 interval \\u4E0D\\u4F1A\\u88AB\\u6267\\u884C\\n  */\\n  // useEffect(() => {\\n  //   let id = setInterval(() => {\\n  //     setCount(count + 1);\\n  //   }, 10000);\\n  //   return () => clearInterval(id);\\n  // });\\n  /**\\n   * \\u5C1D\\u8BD5\\u4E8C\\n   * useEffect() \\u5141\\u8BB8\\u201C\\u9009\\u62E9\\u6027\\u201D\\u6267\\u884C effects\\n   * \\u8BBE\\u5B9A\\u4E00\\u4E2A\\u4F9D\\u8D56\\u6570\\u7EC4\\u4F5C\\u4E3A\\u7B2C\\u4E8C\\u4E2A\\u53C2\\u6570\\uFF0C React \\u53EA\\u4F1A\\u5728\\u6570\\u503C\\u53D8\\u5316\\u65F6\\u8FD0\\u884C\\n   * mount \\u6267\\u884C effect\\uFF0Cunmount \\u65F6\\u6E05\\u7406\\uFF0C\\u4F20\\u5165 []\\n   * \\u6548\\u679C\\uFF1A\\u8BA1\\u65F6\\u5668\\u66F4\\u65B0\\u5230 1 \\u5C31\\u4E0D\\u53D8\\u4E86\\n   * \\u539F\\u56E0\\uFF1Aeffect \\u4EC5\\u6267\\u884C\\u4E00\\u6B21\\u6E32\\u67D3 count \\u4E3A 0\\uFF0C setInterval \\u4E00\\u76F4\\u5F15\\u7528\\u95ED\\u5305 count \\u4E3A 0 \\u3002\\u3002\\u3002\\n   * \\u4FEE\\u590D\\u65B9\\u6CD5\\uFF1A\\n   * \\u4E00\\uFF1A setCount(c => c + 1) update \\u53EF\\u4EE5\\u66F4\\u65B0 state \\u53D8\\u91CF\\u3002\\u5F53\\u65F6\\u65E0\\u6CD5\\u66F4\\u65B0 props\\n   * \\u4E8C\\uFF1A useReducer() \\n   */\\n  // useEffect(() => {\\n  //   let id = setInterval(() => {\\n  //     console.log('count', count);\\n  //     setCount(count + 1);\\n  //   }, 1000);\\n  //   return () => clearInterval(id);\\n  // }, []);\\n\\n  /**\\n   * useRef() \\u8FD4\\u56DE\\u4E00\\u4E2A\\u6709\\u5E26\\u6709 current \\u53EF\\u53D8\\u5C5E\\u6027\\u7684\\u666E\\u901A\\u5BF9\\u8C61\\u5728 renders \\u95F4\\u5171\\u4EAB\\uFF0C\\u53EF\\u4EE5\\u4FDD\\u5B58\\u65B0\\u7684 interval \\u56DE\\u8C03\\u7ED9\\u5B83\\uFF1A\\n  */\\n  useInterval(() => {\\n    setCount(count + 1);\\n  }, 1000);\\n  // \\u5C01\\u88C5 Hook\\n  function useInterval(callback, delay) {\\n    const savedCallback = useRef();\\n    useEffect(() => {\\n      savedCallback.current = callback;\\n    });\\n    useEffect(() => {\\n      function tick() {\\n        savedCallback.current();\\n      }\\n      if (delay !== null) {\\n        let id = setInterval(tick, delay);\\n        return () => clearInterval(id);\\n      }\\n    }, [delay]);\\n  }\\n  return <h2>{count}</h2>;\\n}\\n\")), mdx(\"h2\", null, \"\\u601D\\u8003\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Hooks \\u7684\\u4F7F\\u7528\\u8FD8\\u662F\\u5904\\u4E8E\\u63A2\\u7D22\\u9636\\u6BB5\\uFF0C\\u4F7F\\u7528\\u6280\\u5DE7\\u5E76\\u4E0D\\u6210\\u719F\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"\\u5BF9\\u5F85 Hooks\\uFF0C\\u5EFA\\u8BAE\\u662F\\u5728\\u65B0\\u9879\\u76EE\\u4E2D\\u5C1D\\u8BD5\\u4F7F\\u7528\")), mdx(\"h2\", null, \"\\u53C2\\u8003\\u6587\\u6863\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://medium.com/javascript-in-plain-english/state-management-with-react-hooks-no-redux-or-context-api-8b3035ceecf8\"\n  }), \"https://medium.com/javascript-in-plain-english/state-management-with-react-hooks-no-redux-or-context-api-8b3035ceecf8\"))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.netlify.com/blog/2019/03/11/deep-dive-how-do-react-hooks-really-work/\"\n  }), \"https://www.netlify.com/blog/2019/03/11/deep-dive-how-do-react-hooks-really-work/\")))));\n}\n;\nMDXContent.isMDXComponent = true;","headings":[{"value":"强依赖","depth":2},{"value":"react-scripts","depth":3},{"value":"API","depth":2},{"value":"useState","depth":3},{"value":"useEffect","depth":3},{"value":"限制","depth":2},{"value":"实战","depth":2},{"value":"封装 useInterval Hook","depth":3},{"value":"思考","depth":2},{"value":"参考文档","depth":2}],"frontmatter":{"title":"React Hooks 调研","date":"2019-06-04","description":"React Hooks 使用函数式（FC）进编码。"}},"file":{"relativePath":"react-hook.pdf","publicURL":"/blog/static/react-hook-576e4fc27ce101d31cccc162f2645a19.pdf"}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/react-hook/","previous":{"fields":{"slug":"/mac-clean/"},"frontmatter":{"title":"Mac 清理存储空间"}},"next":{"fields":{"slug":"/debounce-throttle/"},"frontmatter":{"title":"Javascript 防抖和节流"}}}}}