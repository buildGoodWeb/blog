{"componentChunkName":"component---src-templates-blog-post-js","path":"/js-precision/","webpackCompilationHash":"fe4b98b4e443afde89a7","result":{"data":{"mdx":{"id":"a02d9e4a-ddc3-5bb5-9ab2-3ddfb00a164b","excerpt":"Javascript 中的数字按照 IEEE754 标准，使用 64 位双精度（double）浮点型来表示（统一处理整数和小数，节省存储空间）。 ES5规范 : S  1位符号位（Sign），为 +1 或 -1； E  11位指数位（Exponent）， 范围  -1074, 971 , 包括两端值； M  5…","body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Javascript 精度\",\n  \"date\": \"2019-10-22T00:00:00.000Z\",\n  \"tag\": \"Javascript\",\n  \"description\": \"收集并解决 js 精度问题\"\n};\n\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\n\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"Javascript \\u4E2D\\u7684\\u6570\\u5B57\\u6309\\u7167 IEEE754 \\u6807\\u51C6\\uFF0C\\u4F7F\\u7528 64 \\u4F4D\\u53CC\\u7CBE\\u5EA6\\uFF08double\\uFF09\\u6D6E\\u70B9\\u578B\\u6765\\u8868\\u793A\\uFF08\\u7EDF\\u4E00\\u5904\\u7406\\u6574\\u6570\\u548C\\u5C0F\\u6570\\uFF0C\\u8282\\u7701\\u5B58\\u50A8\\u7A7A\\u95F4\\uFF09\\u3002\", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://es5.github.io/#x8.5\"\n  }), \"ES5\\u89C4\\u8303\"), \":\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"S\"), \" 1\\u4F4D\\u7B26\\u53F7\\u4F4D\\uFF08Sign\\uFF09\\uFF0C\\u4E3A +1 \\u6216 -1\\uFF1B\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"E\"), \" 11\\u4F4D\\u6307\\u6570\\u4F4D\\uFF08Exponent\\uFF09\\uFF0C \\u8303\\u56F4 \", \"[-1074, 971]\", \", \\u5305\\u62EC\\u4E24\\u7AEF\\u503C\\uFF1B\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"M\"), \" 52\\u4F4D\\u5C3E\\u6570\\u4F4D\\uFF08Mantissa\\uFF09\\uFF0C\\u6B63\\u6574\\u6570\\u5E76\\u4E14\\u5C0F\\u4E8E 2^53\\u3002\")), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"594px\"\n    }\n  }), \"\\n      \", mdx(\"a\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/blog/static/46b953ccaba5f4dbf2276726f802a93c/262c7/js_precision.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": [\"noopener\"]\n  }), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"a\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"16.161616161616163%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAIAAAAcOLh5AAAACXBIWXMAAAsSAAALEgHS3X78AAAAlElEQVQI122JbQuCMBzE9/2/S7RGsukK1zYl6MGF4CLyIY3Cemfhy9m/iF51HMfv7pDZmvv1lqyTrnsMw+Ccg7y07caYZ9//lr9CYr+kOceWhnZeL2StdaP1gXNDSCnEOYpqpSopT0oBwAvwtpRtmiJvF47zqdfM8Gpk8aQMgpyxCtL3LSEZIVCPjEEtPv4ypUUcvwBXlJag0bYDXgAAAABJRU5ErkJggg==')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n  \", mdx(\"img\", _extends({\n    parentName: \"a\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"js precision\",\n    \"title\": \"js precision\",\n    \"src\": \"/blog/static/46b953ccaba5f4dbf2276726f802a93c/262c7/js_precision.png\",\n    \"srcSet\": [\"/blog/static/46b953ccaba5f4dbf2276726f802a93c/6a467/js_precision.png 210w\", \"/blog/static/46b953ccaba5f4dbf2276726f802a93c/635b1/js_precision.png 420w\", \"/blog/static/46b953ccaba5f4dbf2276726f802a93c/262c7/js_precision.png 594w\"],\n    \"sizes\": \"(max-width: 594px) 100vw, 594px\",\n    \"loading\": \"lazy\"\n  })), \"\\n  \"), \"\\n    \")), mdx(\"h2\", null, \"\\u6570\\u503C\\u8868\\u793A\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {}), \"s \\xD7 m \\xD7 2^e\\n\")), mdx(\"h2\", null, \"\\u5927\\u6570\\u7CBE\\u5EA6\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-Javascript\"\n  }), \"// \\u4E0A\\u9650  S \\u4E3A 1 \\u4E2A 0\\uFF0CE \\u4E3A 11 \\u4E2A 0\\uFF0CS \\u4E3A 53 \\u4E2A 1\\nMath.pow(2, 53) - 1 === Number.MAX_SAFE_INTEGER; // true\\n// \\u4E0B\\u9650  S \\u4E3A 1 \\u4E2A 1\\uFF0CE \\u4E3A 11 \\u4E2A 0\\uFF0CS \\u4E3A 53 \\u4E2A 1\\n1 - Math.pow(2, 53) === Number.MIN_SAFE_INTEGER; // true\\n// \\u6700\\u5927\\u6570\\uFF0CS \\u4E3A 1 \\u4E2A 0\\uFF0CE \\u4E3A 971\\uFF0CS \\u4E3A 53\\u4E2A 1\\n(Math.pow(2, 53) - 1) * Math.pow(2, 971) === Number.MAX_VALUE; // true\\n// \\u6700\\u63A5\\u8FD1\\u4E8E0\\u7684\\u6B63\\u6570\\uFF0CS \\u4E3A 1 \\u4E2A 0\\uFF0CE \\u4E3A -1074\\uFF0CS \\u4E3A 0\\nMath.pow(2, -1074) === Number.MIN_VALUE; // true\\n\")), mdx(\"h3\", null, \"\\u603B\\u7ED3\"), mdx(\"p\", null, \"[MIN_SAFE_INTEGER, MAX_SAFE_INTEGER]\", \" \\u8303\\u56F4\\u7684\\u6574\\u6570\\u53EF\\u4EE5\\u7CBE\\u786E\\u5C55\\u793A\\uFF0C\\u8D85\\u51FA\\u5219\\u4F1A\\u6709\\u7CBE\\u5EA6\\u95EE\\u9898\\u3002\"), mdx(\"h2\", null, \"\\u7CBE\\u5EA6\\u95EE\\u9898\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-Javascript\"\n  }), \"// \\u52A0\\n0.1 + 0.2 = 0.30000000000000004\\n// \\u51CF\\n1.5 - 1.2 = 0.30000000000000004\\n// \\u4E58\\n0.8 * 3 = 2.4000000000000004\\n// \\u9664\\n0.3 / 0.1 = 2.9999999999999996\\n// toFixed chrome \\u6D4F\\u89C8\\u5668\\u6D4B\\u8BD5\\n1.335.toFixed(2) // 1.33\\n\")), mdx(\"h3\", null, \"\\u95EE\\u9898\\u5206\\u6790\"), mdx(\"details\", null, mdx(\"summary\", null, \"\\u5341\\u8FDB\\u5236\\u6D6E\\u70B9\\u6570\\u8F6C\\u4E8C\\u8FDB\\u5236\\u65B9\\u6CD5\"), mdx(\"ul\", null, mdx(\"li\", null, \"\\u6BD4\\u5982\\u5341\\u8FDB\\u5236 0.125\\uFF0C\\u5148\\u4E58 2\\uFF0C \\u5F97 0.25, \\u53D6\\u6574\\u6570\\u90E8\\u5206 0\\uFF1B\"), mdx(\"li\", null, \"\\u5C06\\u5C0F\\u6570\\u90E8\\u5206 0.25 \\u4E58 2\\uFF0C\\u7B49 0.5\\uFF0C \\u53D6\\u5F97\\u6574\\u6570\\u90E8\\u5206 0\\uFF1B\"), mdx(\"li\", null, \"\\u5C06\\u5C0F\\u6570\\u90E8\\u5206 0.5 \\u4E58 2\\uFF0C\\u5F97\\u5230\\u6574\\u6570\\u90E8\\u5206 1\\uFF1B\"), mdx(\"li\", null, \"\\u5F97\\u5230\\u4E8C\\u8FDB\\u5236 0.001\"))), mdx(\"details\", null, mdx(\"summary\", null, \"\\u6D6E\\u70B9\\u6570\\u4E8C\\u8FDB\\u5236\\u8F6C\\u5341\\u8FDB\\u5236\\u65B9\\u6CD5\"), mdx(\"ul\", null, mdx(\"li\", null, \"0.001\\uFF0C\\u7B2C\\u4E00\\u4F4D\\u4E3A 0\\uFF0C\\u5341\\u8FDB\\u5236\\u4E3A 0 * 1 / 2\\uFF1B\"), mdx(\"li\", null, \"\\u7B2C\\u4E8C\\u4F4D\\u4E3A 0\\uFF0C\\u5341\\u8FDB\\u5236\\u4E3A 0 * 1 / 4\\uFF1B\"), mdx(\"li\", null, \"\\u7B2C\\u4E8C\\u4F4D\\u4E3A 1\\uFF0C\\u5341\\u8FDB\\u5236\\u4E3A 1 * 1 / 8\\uFF1B\"), mdx(\"li\", null, \"\\u6C47\\u603B\\u5F97\\u5230\\u5341\\u8FDB\\u5236\\u4E3A\\uFF1A 0 * 1 / 2 + 0 * 1 / 4 + 1 * 1 / 8 = 0.125\"))), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-Javascript\"\n  }), \"// 0.1.toString(2)\\n0.1 -> 0.0001 1001 1001 1001...(1100\\u5FAA\\u73AF)\\n// 0.2.toString(2)\\n0.2 -> 0.0011 0011 0011 0011...(0011\\u5FAA\\u73AF)\\n// (0.1 + 0.2).toString(2)\\n0.1 + 0.2 -> 0.0100110011001100110011001100110011001100110011001100\\n// \\n// => 0.30000000000000004\\n\")), mdx(\"h2\", null, \"\\u89E3\\u51B3\\u601D\\u8DEF\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"\\u6D6E\\u70B9\\u6570\\u8FD0\\u7B97\\u504F\\u5DEE\\u5F88\\u5C0F\\uFF0C\\u53EF\\u4EE5\\u76F4\\u63A5\\u8FDB\\u884C\", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"\\u56DB\\u820D\\u4E94\\u5165\"), \"\\uFF0C\\u6BD4\\u5982 \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"parseFloat((0.1 + 0.2).toFixed(12)) === 0.3\"), \";\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"\\u6D6E\\u70B9\\u6570\\u8F6C\\u6210\\u6574\\u6570\\u8FD0\\u7B97\\uFF0C\\u518D\\u505A\\u9664\\u6CD5\\u3002\\u6BD4\\u5982 \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"(0.1 * 10 + 0.2 * 10)/10 === 0.3\"), \";\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"\\u628A\\u6D6E\\u70B9\\u8F6C\\u6210\\u5B57\\u7B26\\u4E32\\uFF0C\\u6A21\\u62DF\\u5B9E\\u9645\\u8FD0\\u7B97\\u3002\")), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"\\u7B2C\\u4E00\\u79CD\\u65B9\\u6848\\uFF0C\\u5728\\u4E00\\u4E9B\\u6781\\u7AEF\\u60C5\\u51B5\\u4E0B\\u8FD8\\u662F\\u4F1A\\u6709\\u95EE\\u9898\\uFF1B\")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-Javascript\"\n  }), \"210000 * 10000  * 1000 * 8.2 // 17219999999999.998\\nparseFloat(17219999999999.998.toFixed(12)); // 17219999999999.998\\uFF0C\\u800C\\u6B63\\u786E\\u7ED3\\u679C\\u4E3A 17220000000000\\n\")), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"\\u7B2C\\u4E8C\\u79CD\\u65B9\\u6848\\uFF0C\", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://github.com/nefe/number-precision\"\n  }), \"number-precision\"), \" \\u5C31\\u662F\\u4F7F\\u7528\\u8FD9\\u79CD\\u65B9\\u6848\\uFF0C\\u4E5F\\u6709\\u95EE\\u9898\\uFF1A\")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-Javascript\"\n  }), \"// \\u8FD9\\u4E24\\u4E2A\\u6D6E\\u70B9\\u6570\\uFF0C\\u8F6C\\u5316\\u4E3A\\u6574\\u6570\\u4E4B\\u540E\\uFF0C\\u76F8\\u4E58\\u7684\\u7ED3\\u679C\\u5DF2\\u7ECF\\u8D85\\u8FC7\\u4E86 MAX_SAFE_INTEGER\\n123456.789 * 123456.789 // \\u8F6C\\u5316\\u4E3A(123456789 * 123456789)/1000000\\uFF0C\\u7ED3\\u679C\\u662F 15241578750.19052\\n\")), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"\\u7B2C\\u4E09\\u79CD\\u65B9\\u6848\\u6709\\u5F88\\u591A\\u6210\\u719F\\u7684\\u5E93\\uFF0C\\u6BD4\\u5982 \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://github.com/MikeMcl/bignumber.js\"\n  }), \"bignumber.js\"), \"\\uFF0C\", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://github.com/MikeMcl/decimal.js\"\n  }), \"decimal.js\"), \"\\uFF0C\\n\", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://github.com/MikeMcl/big.js\"\n  }), \"big.js\"), \"\\u3002\\u8FD9\\u4E9B\\u5E93\\u4FEE\\u590D\\u4E86\\u6D6E\\u70B9\\u7CBE\\u5EA6\\u3001toFixed \\u95EE\\u9898\\uFF0C\\u5E76\\u4E14\\u652F\\u6301\\u5927\\u6570\\u636E\\u8BA1\\u7B97\\u3002\")));\n}\n;\nMDXContent.isMDXComponent = true;","headings":[{"value":"数值表示","depth":2},{"value":"大数精度","depth":2},{"value":"总结","depth":3},{"value":"精度问题","depth":2},{"value":"问题分析","depth":3},{"value":"解决思路","depth":2}],"frontmatter":{"title":"Javascript 精度","date":"2019-10-22","description":"收集并解决 js 精度问题"}},"file":{"relativePath":"js-precision.pdf","publicURL":"/blog/static/js-precision-0a0f45f5ed2ec87a0928ed302bdd0f05.pdf"}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/js-precision/","previous":{"fields":{"slug":"/bash/"},"frontmatter":{"title":"Bash 命令收集"}},"next":{"fields":{"slug":"/js-prototype/"},"frontmatter":{"title":"Javascript 原型链"}}}}}