<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/blog/commons.f933939570d27fef2133.css">.theme-light{background-color:#f4f5f5}.theme-dark,.theme-light{-webkit-transition:.5s;transition:.5s;min-height:100vh}.theme-dark{background-color:#181818}svg{display:inline-block;stroke-width:0;stroke:currentColor;fill:currentColor;pointer-events:none}.layout{margin:0 auto;max-width:56rem;padding:3rem 1.5rem}.theme-light .layout{color:#555}.theme-dark .layout{color:#fff}.layout header{display:flex;align-items:baseline;justify-content:space-between}.layout .toggle{line-height:1;display:inline-block;cursor:pointer}.layout .toggle:hover{color:#0078e7}.layout.post ul li{line-height:1.75}.layout.post img{border-radius:5px;position:absolute;top:0}@media (min-width:768px){.layout table td,.layout table th{padding:12px 24px}}@media (max-width:768px){.layout body{font-size:12px}.layout table td,.layout table th{padding:8px 4px;word-break:break-all}}.layout table{width:100%;margin:8px 0 16px}.layout table th{color:#5c6b77;font-weight:500;white-space:nowrap;background:rgba(0,0,0,.02);border:1px solid #ebedf0}.layout table td{text-align:left;border:1px solid #ebedf0}</style><style data-href="/blog/styles.2d5671466d9414184026.css">.node{cursor:pointer}.node circle{fill:#4682b4;stroke:#000}.link{fill:none;stroke:#ccc;stroke-width:1px}.playground{font-size:13px;border-radius:4px;padding:5px;color:#fff}.playground .container{width:100%;border:1px solid #ccc;margin-bottom:8px}.playground .item{border:1px dotted #ccc;margin:8px}.playground .margin4{margin-right:4px}.playground.show{background-color:#234361}.playground-error{background-color:#f24542;border-radius:4px}.playground-error pre{padding:15px;background-color:transparent;border:0;color:inherit}.playground-view{background-color:#fff;border-radius:3px;color:#66788a;margin:4px;padding:16px;border:1px solid #ccc;display:flex;justify-content:space-between}.playground-view>div{width:90%}.playground-view>button{opacity:0;align-self:flex-end;-webkit-transition:opacity .3s ease;transition:opacity .3s ease}.heading:hover .anchor,.playground-view:hover button{opacity:1}.heading .anchor{margin-left:8px;opacity:0;-webkit-transition:opacity .3s ease;transition:opacity .3s ease;text-decoration:none}.main-toc{position:fixed;right:.5rem;top:4rem;margin-top:25px;padding-left:15px}.main-toc>div{line-height:2;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.main-toc--li2{font-size:14px}.main-toc--li3{font-size:12px;padding-left:10px}.main-toc--li4{font-size:12px;padding-left:20px}.main-toc a{text-decoration:none}.theme-light .main-toc a{color:#555}.theme-dark .main-toc a{color:#fff}.main-toc a.current,.main-toc a:hover{color:#337ab7}@media (min-width:900px){.main-toc{width:12rem}}@media (max-width:900px){.main-toc{position:static}}.bio{display:flex;margin-bottom:2rem}.bio img{margin-bottom:0;margin-right:2rem;min-width:50px;border-radius:50%}

/*!
Pure v1.0.1
Copyright 2013 Yahoo!
Licensed under the BSD License.
https://github.com/pure-css/pure/blob/master/LICENSE.md
*/
/*!
normalize.css v^3.0 | MIT License | git.io/normalize
Copyright (c) Nicolas Gallagher and Jonathan Neal
*/
/*! normalize.css v3.0.3 | MIT License | github.com/necolas/normalize.css */html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,hgroup,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block;vertical-align:baseline}audio:not([controls]){display:none;height:0}[hidden],template{display:none}a{background-color:transparent}a:active,a:hover{outline:0}abbr[title]{border-bottom:1px dotted}b,strong{font-weight:700}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sup{top:-.5em}sub{bottom:-.25em}img{border:0}svg:not(:root){overflow:hidden}figure{margin:1em 40px}hr{box-sizing:content-box;height:0}pre{overflow:auto}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}button,input,optgroup,select,textarea{color:inherit;font:inherit;margin:0}button{overflow:visible}button,select{text-transform:none}button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}button[disabled],html input[disabled]{cursor:default}button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}input{line-height:normal}input[type=checkbox],input[type=radio]{box-sizing:border-box;padding:0}input[type=number]::-webkit-inner-spin-button,input[type=number]::-webkit-outer-spin-button{height:auto}input[type=search]{-webkit-appearance:textfield;box-sizing:content-box}input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-decoration{-webkit-appearance:none}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{border:0;padding:0}textarea{overflow:auto}optgroup{font-weight:700}table{border-collapse:collapse;border-spacing:0}td,th{padding:0}.hidden,[hidden]{display:none!important}.pure-img{max-width:100%;height:auto;display:block}.pure-g{letter-spacing:-.31em;text-rendering:optimizespeed;font-family:FreeSans,Arimo,Droid Sans,Helvetica,Arial,sans-serif;display:flex;flex-flow:row wrap;align-content:flex-start}@media (-ms-high-contrast:active),(-ms-high-contrast:none){table .pure-g{display:block}}.opera-only :-o-prefocus,.pure-g{word-spacing:-.43em}.pure-u{display:inline-block;zoom:1;letter-spacing:normal;word-spacing:normal;vertical-align:top;text-rendering:auto}.pure-g [class*=pure-u]{font-family:sans-serif}.pure-u-1,.pure-u-1-1,.pure-u-1-2,.pure-u-1-3,.pure-u-1-4,.pure-u-1-5,.pure-u-1-6,.pure-u-1-8,.pure-u-1-12,.pure-u-1-24,.pure-u-2-3,.pure-u-2-5,.pure-u-2-24,.pure-u-3-4,.pure-u-3-5,.pure-u-3-8,.pure-u-3-24,.pure-u-4-5,.pure-u-4-24,.pure-u-5-5,.pure-u-5-6,.pure-u-5-8,.pure-u-5-12,.pure-u-5-24,.pure-u-6-24,.pure-u-7-8,.pure-u-7-12,.pure-u-7-24,.pure-u-8-24,.pure-u-9-24,.pure-u-10-24,.pure-u-11-12,.pure-u-11-24,.pure-u-12-24,.pure-u-13-24,.pure-u-14-24,.pure-u-15-24,.pure-u-16-24,.pure-u-17-24,.pure-u-18-24,.pure-u-19-24,.pure-u-20-24,.pure-u-21-24,.pure-u-22-24,.pure-u-23-24,.pure-u-24-24{display:inline-block;zoom:1;letter-spacing:normal;word-spacing:normal;vertical-align:top;text-rendering:auto}.pure-u-1-24{width:4.1667%}.pure-u-1-12,.pure-u-2-24{width:8.3333%}.pure-u-1-8,.pure-u-3-24{width:12.5%}.pure-u-1-6,.pure-u-4-24{width:16.6667%}.pure-u-1-5{width:20%}.pure-u-5-24{width:20.8333%}.pure-u-1-4,.pure-u-6-24{width:25%}.pure-u-7-24{width:29.1667%}.pure-u-1-3,.pure-u-8-24{width:33.3333%}.pure-u-3-8,.pure-u-9-24{width:37.5%}.pure-u-2-5{width:40%}.pure-u-5-12,.pure-u-10-24{width:41.6667%}.pure-u-11-24{width:45.8333%}.pure-u-1-2,.pure-u-12-24{width:50%}.pure-u-13-24{width:54.1667%}.pure-u-7-12,.pure-u-14-24{width:58.3333%}.pure-u-3-5{width:60%}.pure-u-5-8,.pure-u-15-24{width:62.5%}.pure-u-2-3,.pure-u-16-24{width:66.6667%}.pure-u-17-24{width:70.8333%}.pure-u-3-4,.pure-u-18-24{width:75%}.pure-u-19-24{width:79.1667%}.pure-u-4-5{width:80%}.pure-u-5-6,.pure-u-20-24{width:83.3333%}.pure-u-7-8,.pure-u-21-24{width:87.5%}.pure-u-11-12,.pure-u-22-24{width:91.6667%}.pure-u-23-24{width:95.8333%}.pure-u-1,.pure-u-1-1,.pure-u-5-5,.pure-u-24-24{width:100%}.pure-button{display:inline-block;zoom:1;line-height:normal;white-space:nowrap;vertical-align:middle;text-align:center;cursor:pointer;-webkit-user-drag:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;box-sizing:border-box}.pure-button::-moz-focus-inner{padding:0;border:0}.pure-button-group{letter-spacing:-.31em;text-rendering:optimizespeed}.opera-only :-o-prefocus,.pure-button-group{word-spacing:-.43em}.pure-button-group .pure-button{letter-spacing:normal;word-spacing:normal;vertical-align:top;text-rendering:auto}.pure-button{font-family:inherit;font-size:100%;padding:.5em 1em;color:#444;color:rgba(0,0,0,.8);border:transparent;background-color:#e6e6e6;text-decoration:none;border-radius:2px}.pure-button-hover,.pure-button:focus,.pure-button:hover{background-image:-webkit-gradient(linear,left top,left bottom,from(transparent),color-stop(40%,rgba(0,0,0,.05)),to(rgba(0,0,0,.1)));background-image:linear-gradient(transparent,rgba(0,0,0,.05) 40%,rgba(0,0,0,.1))}.pure-button:focus{outline:0}.pure-button-active,.pure-button:active{box-shadow:inset 0 0 0 1px rgba(0,0,0,.15),inset 0 0 6px rgba(0,0,0,.2);border-color:#000}.pure-button-disabled,.pure-button-disabled:active,.pure-button-disabled:focus,.pure-button-disabled:hover,.pure-button[disabled]{border:none;background-image:none;opacity:.4;cursor:not-allowed;box-shadow:none;pointer-events:none}.pure-button-hidden{display:none}.pure-button-primary,.pure-button-selected,a.pure-button-primary,a.pure-button-selected{background-color:#0078e7;color:#fff}.pure-button-group .pure-button{margin:0;border-radius:0;border-right:1px solid #111;border-right:1px solid rgba(0,0,0,.2)}.pure-button-group .pure-button:first-child{border-top-left-radius:2px;border-bottom-left-radius:2px}.pure-button-group .pure-button:last-child{border-top-right-radius:2px;border-bottom-right-radius:2px;border-right:none}.pure-form input[type=color],.pure-form input[type=date],.pure-form input[type=datetime-local],.pure-form input[type=datetime],.pure-form input[type=email],.pure-form input[type=month],.pure-form input[type=number],.pure-form input[type=password],.pure-form input[type=search],.pure-form input[type=tel],.pure-form input[type=text],.pure-form input[type=time],.pure-form input[type=url],.pure-form input[type=week],.pure-form select,.pure-form textarea{padding:.5em .6em;display:inline-block;border:1px solid #ccc;box-shadow:inset 0 1px 3px #ddd;border-radius:4px;vertical-align:middle;box-sizing:border-box}.pure-form input:not([type]){padding:.5em .6em;display:inline-block;border:1px solid #ccc;box-shadow:inset 0 1px 3px #ddd;border-radius:4px;box-sizing:border-box}.pure-form input[type=color]{padding:.2em .5em}.pure-form input:not([type]):focus,.pure-form input[type=color]:focus,.pure-form input[type=date]:focus,.pure-form input[type=datetime-local]:focus,.pure-form input[type=datetime]:focus,.pure-form input[type=email]:focus,.pure-form input[type=month]:focus,.pure-form input[type=number]:focus,.pure-form input[type=password]:focus,.pure-form input[type=search]:focus,.pure-form input[type=tel]:focus,.pure-form input[type=text]:focus,.pure-form input[type=time]:focus,.pure-form input[type=url]:focus,.pure-form input[type=week]:focus,.pure-form select:focus,.pure-form textarea:focus{outline:0;border-color:#129fea}.pure-form input[type=checkbox]:focus,.pure-form input[type=file]:focus,.pure-form input[type=radio]:focus{outline:thin solid #129fea;outline:1px auto #129fea}.pure-form .pure-checkbox,.pure-form .pure-radio{margin:.5em 0;display:block}.pure-form input:not([type])[disabled],.pure-form input[type=color][disabled],.pure-form input[type=date][disabled],.pure-form input[type=datetime-local][disabled],.pure-form input[type=datetime][disabled],.pure-form input[type=email][disabled],.pure-form input[type=month][disabled],.pure-form input[type=number][disabled],.pure-form input[type=password][disabled],.pure-form input[type=search][disabled],.pure-form input[type=tel][disabled],.pure-form input[type=text][disabled],.pure-form input[type=time][disabled],.pure-form input[type=url][disabled],.pure-form input[type=week][disabled],.pure-form select[disabled],.pure-form textarea[disabled]{cursor:not-allowed;background-color:#eaeded;color:#cad2d3}.pure-form input[readonly],.pure-form select[readonly],.pure-form textarea[readonly]{background-color:#eee;color:#777;border-color:#ccc}.pure-form input:focus:invalid,.pure-form select:focus:invalid,.pure-form textarea:focus:invalid{color:#b94a48;border-color:#e9322d}.pure-form input[type=checkbox]:focus:invalid:focus,.pure-form input[type=file]:focus:invalid:focus,.pure-form input[type=radio]:focus:invalid:focus{outline-color:#e9322d}.pure-form select{height:2.25em;border:1px solid #ccc;background-color:#fff}.pure-form select[multiple]{height:auto}.pure-form label{margin:.5em 0 .2em}.pure-form fieldset{margin:0;padding:.35em 0 .75em;border:0}.pure-form legend{display:block;width:100%;padding:.3em 0;margin-bottom:.3em;color:#333;border-bottom:1px solid #e5e5e5}.pure-form-stacked input:not([type]),.pure-form-stacked input[type=color],.pure-form-stacked input[type=date],.pure-form-stacked input[type=datetime-local],.pure-form-stacked input[type=datetime],.pure-form-stacked input[type=email],.pure-form-stacked input[type=file],.pure-form-stacked input[type=month],.pure-form-stacked input[type=number],.pure-form-stacked input[type=password],.pure-form-stacked input[type=search],.pure-form-stacked input[type=tel],.pure-form-stacked input[type=text],.pure-form-stacked input[type=time],.pure-form-stacked input[type=url],.pure-form-stacked input[type=week],.pure-form-stacked label,.pure-form-stacked select,.pure-form-stacked textarea{display:block;margin:.25em 0}.pure-form-aligned .pure-help-inline,.pure-form-aligned input,.pure-form-aligned select,.pure-form-aligned textarea,.pure-form-message-inline{display:inline-block;vertical-align:middle}.pure-form-aligned textarea{vertical-align:top}.pure-form-aligned .pure-control-group{margin-bottom:.5em}.pure-form-aligned .pure-control-group label{text-align:right;display:inline-block;vertical-align:middle;width:10em;margin:0 1em 0 0}.pure-form-aligned .pure-controls{margin:1.5em 0 0 11em}.pure-form .pure-input-rounded,.pure-form input.pure-input-rounded{border-radius:2em;padding:.5em 1em}.pure-form .pure-group fieldset{margin-bottom:10px}.pure-form .pure-group input,.pure-form .pure-group textarea{display:block;padding:10px;margin:0 0 -1px;border-radius:0;position:relative;top:-1px}.pure-form .pure-group input:focus,.pure-form .pure-group textarea:focus{z-index:3}.pure-form .pure-group input:first-child,.pure-form .pure-group textarea:first-child{top:1px;border-radius:4px 4px 0 0;margin:0}.pure-form .pure-group input:first-child:last-child,.pure-form .pure-group textarea:first-child:last-child{top:1px;border-radius:4px;margin:0}.pure-form .pure-group input:last-child,.pure-form .pure-group textarea:last-child{top:-2px;border-radius:0 0 4px 4px;margin:0}.pure-form .pure-group button{margin:.35em 0}.pure-form .pure-input-1{width:100%}.pure-form .pure-input-3-4{width:75%}.pure-form .pure-input-2-3{width:66%}.pure-form .pure-input-1-2{width:50%}.pure-form .pure-input-1-3{width:33%}.pure-form .pure-input-1-4{width:25%}.pure-form-message-inline,.pure-form .pure-help-inline{display:inline-block;padding-left:.3em;color:#666;vertical-align:middle;font-size:.875em}.pure-form-message{display:block;color:#666;font-size:.875em}@media only screen and (max-width:480px){.pure-form button[type=submit]{margin:.7em 0 0}.pure-form input:not([type]),.pure-form input[type=color],.pure-form input[type=date],.pure-form input[type=datetime-local],.pure-form input[type=datetime],.pure-form input[type=email],.pure-form input[type=month],.pure-form input[type=number],.pure-form input[type=password],.pure-form input[type=search],.pure-form input[type=tel],.pure-form input[type=text],.pure-form input[type=time],.pure-form input[type=url],.pure-form input[type=week],.pure-form label{margin-bottom:.3em;display:block}.pure-group input:not([type]),.pure-group input[type=color],.pure-group input[type=date],.pure-group input[type=datetime-local],.pure-group input[type=datetime],.pure-group input[type=email],.pure-group input[type=month],.pure-group input[type=number],.pure-group input[type=password],.pure-group input[type=search],.pure-group input[type=tel],.pure-group input[type=text],.pure-group input[type=time],.pure-group input[type=url],.pure-group input[type=week]{margin-bottom:0}.pure-form-aligned .pure-control-group label{margin-bottom:.3em;text-align:left;display:block;width:100%}.pure-form-aligned .pure-controls{margin:1.5em 0 0}.pure-form-message,.pure-form-message-inline,.pure-form .pure-help-inline{display:block;font-size:.75em;padding:.2em 0 .8em}}.pure-menu{box-sizing:border-box}.pure-menu-fixed{position:fixed;left:0;top:0;z-index:3}.pure-menu-item,.pure-menu-list{position:relative}.pure-menu-list{list-style:none;margin:0;padding:0}.pure-menu-item{padding:0;margin:0;height:100%}.pure-menu-heading,.pure-menu-link{display:block;text-decoration:none;white-space:nowrap}.pure-menu-horizontal{width:100%;white-space:nowrap}.pure-menu-horizontal .pure-menu-list{display:inline-block}.pure-menu-horizontal .pure-menu-heading,.pure-menu-horizontal .pure-menu-item,.pure-menu-horizontal .pure-menu-separator{display:inline-block;zoom:1;vertical-align:middle}.pure-menu-item .pure-menu-item{display:block}.pure-menu-children{display:none;position:absolute;left:100%;top:0;margin:0;padding:0;z-index:3}.pure-menu-horizontal .pure-menu-children{left:0;top:auto;width:inherit}.pure-menu-active>.pure-menu-children,.pure-menu-allow-hover:hover>.pure-menu-children{display:block;position:absolute}.pure-menu-has-children>.pure-menu-link:after{padding-left:.5em;content:"\25B8";font-size:small}.pure-menu-horizontal .pure-menu-has-children>.pure-menu-link:after{content:"\25BE"}.pure-menu-scrollable{overflow-y:scroll;overflow-x:hidden}.pure-menu-scrollable .pure-menu-list{display:block}.pure-menu-horizontal.pure-menu-scrollable .pure-menu-list{display:inline-block}.pure-menu-horizontal.pure-menu-scrollable{white-space:nowrap;overflow-y:hidden;overflow-x:auto;-webkit-overflow-scrolling:touch;padding:.5em 0}.pure-menu-horizontal .pure-menu-children .pure-menu-separator,.pure-menu-separator{background-color:#ccc;height:1px;margin:.3em 0}.pure-menu-horizontal .pure-menu-separator{width:1px;height:1.3em;margin:0 .3em}.pure-menu-horizontal .pure-menu-children .pure-menu-separator{display:block;width:auto}.pure-menu-heading{text-transform:uppercase;color:#565d64}.pure-menu-link{color:#777}.pure-menu-children{background-color:#fff}.pure-menu-disabled,.pure-menu-heading,.pure-menu-link{padding:.5em 1em}.pure-menu-disabled{opacity:.5}.pure-menu-disabled .pure-menu-link:hover{background-color:transparent}.pure-menu-active>.pure-menu-link,.pure-menu-link:focus,.pure-menu-link:hover{background-color:#eee}.pure-menu-selected>.pure-menu-link,.pure-menu-selected>.pure-menu-link:visited{color:#000}.pure-table{border-collapse:collapse;border-spacing:0;empty-cells:show;border:1px solid #cbcbcb}.pure-table caption{color:#000;font:italic 85%/1 arial,sans-serif;padding:1em 0;text-align:center}.pure-table td,.pure-table th{border-left:1px solid #cbcbcb;border-bottom-width:0;border-right-width:0;border-top-width:0;font-size:inherit;margin:0;overflow:visible;padding:.5em 1em}.pure-table thead{background-color:#e0e0e0;color:#000;text-align:left;vertical-align:bottom}.pure-table td{background-color:transparent}.pure-table-odd td,.pure-table-striped tr:nth-child(2n-1) td{background-color:#f2f2f2}.pure-table-bordered td{border-bottom:1px solid #cbcbcb}.pure-table-bordered tbody>tr:last-child>td{border-bottom-width:0}.pure-table-horizontal td,.pure-table-horizontal th{border-width:0 0 1px;border-bottom:1px solid #cbcbcb}.pure-table-horizontal tbody>tr:last-child>td{border-bottom-width:0}body,html{font-size:15px;font-family:Helvetica Neue,Helvetica,PingFang SC,Arial,Microsoft YaHei,"\5FAE\8F6F\96C5\9ED1"}.pre{border-radius:4px;margin-bottom:10px}a{color:#0078e7;text-decoration:none}a:hover{opacity:.9}code{font-size:87.5%;color:#e83e8c;word-break:break-word}details{margin:15px 0;cursor:pointer}details summary:focus,details summary:hover{color:#337ab7;outline:none}.post h2:before,.post h3:before{display:block;height:1rem;margin-top:-1rem;visibility:hidden;content:""}.post h1 span{font-size:14px;padding-left:10px;color:#bbb}.post h1 a{font-size:16px;padding-left:12px}h1{margin-top:8px;margin-bottom:20px;font-weight:500;font-size:30px}h2{font-size:24px;line-height:32px}h3{font-size:20px;line-height:28px}.prev-next-nav{overflow:hidden;font-size:14px;border-top:1px solid #ebedf0}.prev-next-nav .next-page,.prev-next-nav .prev-page{display:block;width:50%;height:72px;line-height:72px}.prev-next-nav .prev-page{float:left}.prev-next-nav .next-page{float:right;text-align:right}.all-header{margin-bottom:30px}.all-header h3 span{font-size:13px;padding-left:10px;color:#bbb}.theme-light .all-header p{color:#555}.theme-dark .all-header p{color:#fff}.pagination{display:flex;justify-content:space-between;border-top:1px solid #ebedf0;padding:20px 0}.pagination .pages a{border:1px solid #ebedf0;border-radius:3px;padding:5px 12px;margin:0 5px}.pagination .pages a[aria-current=page]{color:#fff;background:#007acc}blockquote{background-color:#ddd;margin-left:0;margin-right:0;padding:1px 16px;border-left:2px solid #568bec}</style><meta name="generator" content="Gatsby 2.16.3"/><link rel="preconnect dns-prefetch" href="https://www.google-analytics.com"/><link rel="shortcut icon" href="/blog/icons/icon-48x48.png?v=f83d32e52a1dc7cc76e8530ba2d262b6"/><link rel="manifest" href="/blog/manifest.webmanifest"/><meta name="theme-color" content="#663399"/><link rel="apple-touch-icon" sizes="48x48" href="/blog/icons/icon-48x48.png?v=f83d32e52a1dc7cc76e8530ba2d262b6"/><link rel="apple-touch-icon" sizes="72x72" href="/blog/icons/icon-72x72.png?v=f83d32e52a1dc7cc76e8530ba2d262b6"/><link rel="apple-touch-icon" sizes="96x96" href="/blog/icons/icon-96x96.png?v=f83d32e52a1dc7cc76e8530ba2d262b6"/><link rel="apple-touch-icon" sizes="144x144" href="/blog/icons/icon-144x144.png?v=f83d32e52a1dc7cc76e8530ba2d262b6"/><link rel="apple-touch-icon" sizes="192x192" href="/blog/icons/icon-192x192.png?v=f83d32e52a1dc7cc76e8530ba2d262b6"/><link rel="apple-touch-icon" sizes="256x256" href="/blog/icons/icon-256x256.png?v=f83d32e52a1dc7cc76e8530ba2d262b6"/><link rel="apple-touch-icon" sizes="384x384" href="/blog/icons/icon-384x384.png?v=f83d32e52a1dc7cc76e8530ba2d262b6"/><link rel="apple-touch-icon" sizes="512x512" href="/blog/icons/icon-512x512.png?v=f83d32e52a1dc7cc76e8530ba2d262b6"/><title data-react-helmet="true">Kubernetes 管理 Docker 容器 | Kailang Blog</title><meta data-react-helmet="true" name="description" content="MacOS 平台 Kubernetes 管理 Docker 容器"/><meta data-react-helmet="true" property="og:title" content="Kubernetes 管理 Docker 容器"/><meta data-react-helmet="true" property="og:description" content="MacOS 平台 Kubernetes 管理 Docker 容器"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="kailang"/><meta data-react-helmet="true" name="twitter:title" content="Kubernetes 管理 Docker 容器"/><meta data-react-helmet="true" name="twitter:description" content="MacOS 平台 Kubernetes 管理 Docker 容器"/><link as="script" rel="preload" href="/blog/component---src-templates-blog-post-js-ad0d66018576bc9befc8.js"/><link as="script" rel="preload" href="/blog/styles-50947f8f1e6f46efd725.js"/><link as="script" rel="preload" href="/blog/commons-f3268c9d7cfa9cf83b38.js"/><link as="script" rel="preload" href="/blog/app-aede868c16b590a60b51.js"/><link as="script" rel="preload" href="/blog/webpack-runtime-e7215cf539a6f354666c.js"/><link as="fetch" rel="preload" href="/blog/page-data/k8s/page-data.json" crossorigin="anonymous"/></head><body><noscript id="gatsby-noscript">This app works best with JavaScript enabled.</noscript><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group" id="gatsby-focus-wrapper"><div class="theme-light"><div class="layout post"><header><h3><a href="/blog/">Kailang Blog</a></h3><div class="toggle"><svg viewBox="0 0 1024 1024" width="32" height="14"><path d="M556.8 979.2c-262.4 0-473.6-211.2-473.6-467.2s211.2-467.2 467.2-467.2c12.8 0 19.2 6.4 25.6 12.8 6.4 12.8 6.4 19.2 0 32-57.6 70.4-83.2 160-83.2 249.6 0 230.4 185.6 416 416 416h6.4c12.8 0 19.2 6.4 25.6 12.8 6.4 12.8 6.4 19.2 0 32a498.56 498.56 0 0 1-384 179.2z m-64-876.8c-198.4 32-352 204.8-352 409.6 0 230.4 185.6 416 416 416 108.8 0 211.2-44.8 288-121.6-236.8-25.6-416-230.4-416-467.2 0-89.6 25.6-166.4 64-236.8z" fill="" p-id="4160"></path><path d="M582.4 883.2c-192 0-352-134.4-384-320 0-6.4 6.4-12.8 12.8-19.2 6.4 0 12.8 6.4 19.2 12.8 32 172.8 179.2 294.4 352 294.4 6.4 0 12.8 6.4 12.8 12.8 0 12.8-6.4 19.2-12.8 19.2zM204.8 531.2c-6.4 0-12.8-6.4-12.8-12.8v-19.2c0-6.4 6.4-12.8 12.8-12.8s12.8 6.4 12.8 12.8v19.2c6.4 6.4 0 12.8-12.8 12.8z" fill="" p-id="4161"></path><path d="M620.8 307.2m-25.6 0a25.6 25.6 0 1 0 51.2 0 25.6 25.6 0 1 0-51.2 0Z" fill="" p-id="4162"></path><path d="M793.6 185.6m-25.6 0a25.6 25.6 0 1 0 51.2 0 25.6 25.6 0 1 0-51.2 0Z" fill="" p-id="4163"></path><path d="M736 416m-25.6 0a25.6 25.6 0 1 0 51.2 0 25.6 25.6 0 1 0-51.2 0Z" fill="" p-id="4164"></path></svg></div></header><main><h1>Kubernetes 管理 Docker 容器<span>2020-12-18</span><a target="_blank" rel="noopener noreferrer" href="/blog/static/k8s-b9eceaac3062ac2bf692543c337f0b2b.pdf" title="打开 k8s.pdf 文件">Θ</a></h1><div class="main-toc row"><div>目录</div><div class="main-toc--li2"><a href="#Kubernetes%20%E7%AE%80%E4%BB%8B" class="">Kubernetes 简介</a></div><div class="main-toc--li2"><a href="#Minikube%20%E7%AE%80%E4%BB%8B" class="">Minikube 简介</a></div><div class="main-toc--li2"><a href="#MacOS%20%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85%E4%BE%9D%E8%B5%96" class="">MacOS 系统安装依赖</a></div><div class="main-toc--li3"><a href="#%E5%AE%89%E8%A3%85%E4%BE%9D%E8%B5%96" class="">安装依赖</a></div><div class="main-toc--li3"><a href="#%E5%90%AF%E5%8A%A8" class="">启动</a></div><div class="main-toc--li3"><a href="#Minikube%20Dashboard" class="">Minikube Dashboard</a></div><div class="main-toc--li3"><a href="#Docker%20Desktop%20Dashboard%EF%BC%88MasOC%EF%BC%89" class="">Docker Desktop Dashboard（MasOC）</a></div><div class="main-toc--li2"><a href="#%E6%89%93%E5%8C%85%20Nodejs%20%E5%BA%94%E7%94%A8%E9%95%9C%E5%83%8F" class="">打包 Nodejs 应用镜像</a></div><div class="main-toc--li3"><a href="#%E5%88%9B%E5%BB%BA%20Nodejs%20%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F" class="">创建 Nodejs 应用程序</a></div><div class="main-toc--li3"><a href="#%E6%89%93%E5%8C%85" class="">打包</a></div><div class="main-toc--li2"><a href="#%E5%88%9B%E5%BB%BA%20Deployment" class="">创建 Deployment</a></div><div class="main-toc--li3"><a href="#%E6%9F%A5%E7%9C%8B%E7%BE%A4%E9%9B%86%20events" class="">查看群集 events</a></div><div class="main-toc--li3"><a href="#%E6%9F%A5%E7%9C%8B%20kubectl%20%E9%85%8D%E7%BD%AE" class="">查看 kubectl 配置</a></div><div class="main-toc--li2"><a href="#%E5%88%9B%E5%BB%BA%20Service" class="">创建 Service</a></div><div class="main-toc--li3"><a href="#%E6%B5%8F%E8%A7%88%E5%99%A8%E8%AE%BF%E9%97%AE%20Service" class="">浏览器访问 Service</a></div><div class="main-toc--li2"><a href="#%E6%9B%B4%E6%96%B0%20Nodejs%20%E5%BA%94%E7%94%A8%E9%95%9C%E5%83%8F%E5%92%8C%E6%9C%8D%E5%8A%A1" class="">更新 Nodejs 应用镜像和服务</a></div><div class="main-toc--li3"><a href="#Deployment%E6%9B%B4%E6%96%B0%E9%95%9C%E5%83%8F" class="">Deployment更新镜像</a></div><div class="main-toc--li3"><a href="#%E6%9B%B4%E6%96%B0%E6%9C%8D%E5%8A%A1" class="">更新服务</a></div><div class="main-toc--li2"><a href="#%E6%B8%85%E7%90%86" class="">清理</a></div><div class="main-toc--li2"><a href="#%E9%81%87%E5%88%B0%E9%97%AE%E9%A2%98%E5%A4%84%E7%90%86" class="">遇到问题处理</a></div><div class="main-toc--li2"><a href="#%E5%8F%82%E8%80%83" class="">参考</a></div></div><p><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:736px">
      <span class="gatsby-resp-image-background-image" style="padding-bottom:81.38586956521739%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsSAAALEgHS3X78AAAB0klEQVQ4y6VUu3LcMAz0//9BulR2l5lMWn9BCk+apLjCyaSIZYk8SSedxBe4BqDXXU5JinBmh6QILoAloLucM2TklP4fMeLuinBe7438D6gN0S3hHm7IM/a/M4cS5nmDP0RI7DnxuSDOs67jMkckttEIt1sJPhFGH+CdAzF5YsjsQ2QiguN5IfAhsH9C4G/iUBwpIc2X5KB1Cceux6ut4cQ7ZUSGEHnejzyLYh8fv+L+0xf0g1fSJWIlHNmw9VEJJWxPUExabYQuJHUi4/2HJ7x7+IzuHHR/Reh50booQuF7PeJgBzUSR47TlOhVKz53zuNXUeDw/BPfDj9QlCWc96vGa8pD5A98yZz5QucnCRKt8orxolPTtnhhUmMNbF0jxHhNuFwa5DGYpPeTXkvKMuQRLsskSeREF2WUt0e5rMOGUy/rBlVlOJWAnnUb4/a652FAWVWorOUILUpj0J5O6nAlxE4d7ha2VAPbeNZM4GZcRp8p7XTKXtv9pSWv7G5ab672BdB50jN1J4TiRX8A6phu7XOK06OIAf1+yJAUFdI1XYdYlaCVcDvfnM+vLOIX3B3GHlnwBRZ102gxl20PwyUiXWSONSojZ+20ZruuP69SvQEyK+ioR0hSjgAAAABJRU5ErkJggg==&#x27;);background-size:cover;display:block"></span>
  <img class="gatsby-resp-image-image" alt="k8s minikube" title="k8s minikube" src="/blog/static/ca569ab2ed71fc00474875d0ce18866b/fddbb/guide-k8s-minikube.png" srcSet="/blog/static/ca569ab2ed71fc00474875d0ce18866b/6a467/guide-k8s-minikube.png 210w,/blog/static/ca569ab2ed71fc00474875d0ce18866b/635b1/guide-k8s-minikube.png 420w,/blog/static/ca569ab2ed71fc00474875d0ce18866b/fddbb/guide-k8s-minikube.png 736w" sizes="(max-width: 736px) 100vw, 736px" loading="lazy"/>
    </span>
<code>图片来源于</code><a href="https://platform9.com/docs/install-kubernetes-the-ultimate-guide/">Install Kubernetes: The Ultimate Guide</a> </p><h2 id="Kubernetes%20%E7%AE%80%E4%BB%8B" class="heading"><span>Kubernetes 简介</span><a name="Kubernetes 简介" href="#Kubernetes%20%E7%AE%80%E4%BB%8B" class="anchor">#</a></h2><p>Kubernetes 是容器集群管理系统，是一个开源的平台，可以实现容器集群的自动化部署、自动扩缩容、维护等功能。</p><ul><li>快速部署应用</li><li>快速扩展应用</li><li>无缝对接新的应用功能</li><li>节省资源，优化硬件资源的使用</li></ul><h2 id="Minikube%20%E7%AE%80%E4%BB%8B" class="heading"><span>Minikube 简介</span><a name="Minikube 简介" href="#Minikube%20%E7%AE%80%E4%BB%8B" class="anchor">#</a></h2><p>Minikube 可以实现一种轻量级的 Kubernetes 集群，通过在本地计算机上创建虚拟机并部署只包含单个节点的简单集群</p><h2 id="MacOS%20%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85%E4%BE%9D%E8%B5%96" class="heading"><span>MacOS 系统安装依赖</span><a name="MacOS 系统安装依赖" href="#MacOS%20%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85%E4%BE%9D%E8%B5%96" class="anchor">#</a></h2><h3 id="%E5%AE%89%E8%A3%85%E4%BE%9D%E8%B5%96" class="heading"><span>安装依赖</span><a name="安装依赖" href="#%E5%AE%89%E8%A3%85%E4%BE%9D%E8%B5%96" class="anchor">#</a></h3><div class="pre"><div class="playground show"><div style="position:relative;text-align:left;box-sizing:border-box;padding:0;overflow:hidden;white-space:pre;font-family:monospace"><textarea style="margin:0;border:0;background:none;box-sizing:inherit;display:inherit;font-family:inherit;font-size:inherit;font-style:inherit;font-variant-ligatures:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;tab-size:inherit;text-indent:inherit;text-rendering:inherit;text-transform:inherit;white-space:pre-wrap;word-break:keep-all;overflow-wrap:break-word;position:absolute;top:0;left:0;height:100%;width:100%;resize:none;color:inherit;overflow:hidden;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;-webkit-text-fill-color:transparent;padding-top:10px;padding-right:10px;padding-bottom:10px;padding-left:10px" class="npm__react-simple-code-editor__textarea" disabled="" autoCapitalize="off" autoComplete="off" autoCorrect="off" spellcheck="false" data-gramm="false"># 命令行工具
brew install kubectl


brew install minikube
# 如果遇到权限文图
sudo chown -R $(whoami) /usr/local/lib/pkgconfig

## VM 驱动程序 VirtualBox
brew install docker-machine-driver-hyperkit</textarea><pre aria-hidden="true" style="margin:0;border:0;background:none;box-sizing:inherit;display:inherit;font-family:inherit;font-size:inherit;font-style:inherit;font-variant-ligatures:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;tab-size:inherit;text-indent:inherit;text-rendering:inherit;text-transform:inherit;white-space:pre-wrap;word-break:keep-all;overflow-wrap:break-word;position:relative;pointer-events:none;padding-top:10px;padding-right:10px;padding-bottom:10px;padding-left:10px"><div class="token-line" style="color:#C5C8C6"><span class="token plain"># 命令行工具</span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">brew install kubectl</span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">brew install minikube</span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain"># 如果遇到权限文图</span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">sudo chown </span><span class="token operator" style="color:hsl(40, 90%, 60%)">-</span><span class="token constant" style="color:hsl(350, 40%, 70%)">R</span><span class="token plain"> </span><span class="token function">$</span><span class="token punctuation" style="opacity:0.7">(</span><span class="token plain">whoami</span><span class="token punctuation" style="opacity:0.7">)</span><span class="token plain"> </span><span class="token operator" style="color:hsl(40, 90%, 60%)">/</span><span class="token plain">usr</span><span class="token operator" style="color:hsl(40, 90%, 60%)">/</span><span class="token plain">local</span><span class="token operator" style="color:hsl(40, 90%, 60%)">/</span><span class="token plain">lib</span><span class="token operator" style="color:hsl(40, 90%, 60%)">/</span><span class="token plain">pkgconfig</span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">## </span><span class="token constant" style="color:hsl(350, 40%, 70%)">VM</span><span class="token plain"> 驱动程序 VirtualBox</span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">brew install docker</span><span class="token operator" style="color:hsl(40, 90%, 60%)">-</span><span class="token plain">machine</span><span class="token operator" style="color:hsl(40, 90%, 60%)">-</span><span class="token plain">driver</span><span class="token operator" style="color:hsl(40, 90%, 60%)">-</span><span class="token plain">hyperkit</span></div></pre><style type="text/css">
/**
 * Reset the text fill color so that placeholder is visible
 */
.npm__react-simple-code-editor__textarea:empty {
  -webkit-text-fill-color: inherit !important;
}

/**
 * Hack to apply on some CSS on IE10 and IE11
 */
@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {
  /**
    * IE doesn't support '-webkit-text-fill-color'
    * So we use 'color: transparent' to make the text transparent on IE
    * Unlike other browsers, it doesn't affect caret color in IE
    */
  .npm__react-simple-code-editor__textarea {
    color: transparent !important;
  }

  .npm__react-simple-code-editor__textarea::selection {
    background-color: #accef7 !important;
    color: transparent !important;
  }
}
</style></div></div></div><ul><li><code>~/.kube/config</code> 文件中查看所有可用的环境</li></ul><h3 id="%E5%90%AF%E5%8A%A8" class="heading"><span>启动</span><a name="启动" href="#%E5%90%AF%E5%8A%A8" class="anchor">#</a></h3><div class="pre"><div class="playground show"><div style="position:relative;text-align:left;box-sizing:border-box;padding:0;overflow:hidden;white-space:pre;font-family:monospace"><textarea style="margin:0;border:0;background:none;box-sizing:inherit;display:inherit;font-family:inherit;font-size:inherit;font-style:inherit;font-variant-ligatures:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;tab-size:inherit;text-indent:inherit;text-rendering:inherit;text-transform:inherit;white-space:pre-wrap;word-break:keep-all;overflow-wrap:break-word;position:absolute;top:0;left:0;height:100%;width:100%;resize:none;color:inherit;overflow:hidden;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;-webkit-text-fill-color:transparent;padding-top:10px;padding-right:10px;padding-bottom:10px;padding-left:10px" class="npm__react-simple-code-editor__textarea" disabled="" autoCapitalize="off" autoComplete="off" autoCorrect="off" spellcheck="false" data-gramm="false"># 可添加参数
# --vm-driver=hyperkit
minikube start

minikube dashboard</textarea><pre aria-hidden="true" style="margin:0;border:0;background:none;box-sizing:inherit;display:inherit;font-family:inherit;font-size:inherit;font-style:inherit;font-variant-ligatures:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;tab-size:inherit;text-indent:inherit;text-rendering:inherit;text-transform:inherit;white-space:pre-wrap;word-break:keep-all;overflow-wrap:break-word;position:relative;pointer-events:none;padding-top:10px;padding-right:10px;padding-bottom:10px;padding-left:10px"><div class="token-line" style="color:#C5C8C6"><span class="token plain"># 可添加参数</span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain"># </span><span class="token operator" style="color:hsl(40, 90%, 60%)">--</span><span class="token plain">vm</span><span class="token operator" style="color:hsl(40, 90%, 60%)">-</span><span class="token plain">driver</span><span class="token operator" style="color:hsl(40, 90%, 60%)">=</span><span class="token plain">hyperkit</span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">minikube start</span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">minikube dashboard</span></div></pre><style type="text/css">
/**
 * Reset the text fill color so that placeholder is visible
 */
.npm__react-simple-code-editor__textarea:empty {
  -webkit-text-fill-color: inherit !important;
}

/**
 * Hack to apply on some CSS on IE10 and IE11
 */
@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {
  /**
    * IE doesn't support '-webkit-text-fill-color'
    * So we use 'color: transparent' to make the text transparent on IE
    * Unlike other browsers, it doesn't affect caret color in IE
    */
  .npm__react-simple-code-editor__textarea {
    color: transparent !important;
  }

  .npm__react-simple-code-editor__textarea::selection {
    background-color: #accef7 !important;
    color: transparent !important;
  }
}
</style></div></div></div><h3 id="Minikube%20Dashboard" class="heading"><span>Minikube Dashboard</span><a name="Minikube Dashboard" href="#Minikube%20Dashboard" class="anchor">#</a></h3><p><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:840px">
      <a class="gatsby-resp-image-link" href="/blog/static/9e5dbea1d5a075f4a905ab25dfed6cea/fb5c7/k8s-dashboard.png" style="display:block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-background-image" style="padding-bottom:53.69496855345912%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB3UlEQVQoz41RXW+cMBD0D22rvvS9f6MfUl/7d/pURWoTNWl6gRwcxxFIgQNsMOY4YLpr7lCSp1oa2d5dj2d3xLdrjYs7jct7DTcyuPEkbjc1nJ3BlVvg+3WCH3c5Lp0CP529jTlha/MvcbVuId59ifH+a4q3nxO8+ZTg9ccYrz5EhAd7nxH/N8Qfx4Prh/ibl0j3FcIogesF2NLO94yQnnGqeYqskMuZOcQmCOD5PoqyQiklJKGpFXhN04hxGDCOA87LxsY5xufjscdANbxzTPjBFr9ufpOyGEUloU2LtjtgGCeM04Sm0WhbgyzLUZYlnVscDgekaYokSZa8UjURjzOh52+otYJUkkKjYHoiG2dFfc8/j8jzHHmWkZKjVcSdKDV3MlCsaRobF0G4QxQnVl1elKgqRaig6gY1/c5Qzems9bNd1TUkkXJtQzFJKoW3CbByXEvGpA/JI7a7CJVUkPyAivnBsqt6xul+RkUxhgi2IR7TzJJZFAW6ziwmcMsMbodbOy82gNsnZ2iG2uZ5NGJN87tdrayyPTndtD10R0THyT40xlgTZoenhZDJ2BSeZUVmdV1n88K5X4PbZlP2lFA1z8hAk3NMpslVhjEdWro/RUVkNc+XZ0gz1brFP5S4MycEV+PQAAAAAElFTkSuQmCC&#x27;);background-size:cover;display:block"></span>
  <img class="gatsby-resp-image-image" alt="k8s dashboard" title="k8s dashboard" src="/blog/static/9e5dbea1d5a075f4a905ab25dfed6cea/04a72/k8s-dashboard.png" srcSet="/blog/static/9e5dbea1d5a075f4a905ab25dfed6cea/6a467/k8s-dashboard.png 210w,/blog/static/9e5dbea1d5a075f4a905ab25dfed6cea/635b1/k8s-dashboard.png 420w,/blog/static/9e5dbea1d5a075f4a905ab25dfed6cea/04a72/k8s-dashboard.png 840w,/blog/static/9e5dbea1d5a075f4a905ab25dfed6cea/c6d2c/k8s-dashboard.png 1260w,/blog/static/9e5dbea1d5a075f4a905ab25dfed6cea/27aa4/k8s-dashboard.png 1680w,/blog/static/9e5dbea1d5a075f4a905ab25dfed6cea/fb5c7/k8s-dashboard.png 2544w" sizes="(max-width: 840px) 100vw, 840px" loading="lazy"/>
  </a>
    </span></p><h3 id="Docker%20Desktop%20Dashboard%EF%BC%88MasOC%EF%BC%89" class="heading"><span>Docker Desktop Dashboard（MasOC）</span><a name="Docker Desktop Dashboard（MasOC）" href="#Docker%20Desktop%20Dashboard%EF%BC%88MasOC%EF%BC%89" class="anchor">#</a></h3><p><code>minikube start</code> 回启动一个 Docker 容器：</p><p><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:840px">
      <a class="gatsby-resp-image-link" href="/blog/static/051ad9ed46b328a2381f24708388eea4/8b984/docket-desktop-dashboad-minikube.png" style="display:block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-background-image" style="padding-bottom:62.5%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAABo0lEQVQ4y52SyW7bMBRF9U/dBG6BIuiiu35fWzR1suii3+MgyIA4SW1NpDhIHKSsbt+jrERu7E0XB+Q78rsczOzkh8D7pcJiKbH4lmNxRuNSJ05+anz+ZfDlt3lxEx/ONT5eKJyeC3y6oJ7vOd59LZGtrtfYVAaPmw2eVisUTxW2esBWemxkwLYZ4flETnVjAxRRqoDrIuAqD3ioAzIhFYxpMYQAb1v03uM5RvRUj9Cc6mEHu5iIewQ/kpVCoVEthI20K0srOsg2wnYBzkV0NNrWwdqOcKNzYaTzMORb+u4ozJHLql1goQP+CItceZQmwlAQr8g/vrm5w+3tHe7vH1KTJ88L5HmJy8srrNePiHF4DVS63T+CH5umZg5V2qZ6gr2mq2qUSTv18x1y4CRG4o7XAG6a15P71x8J3N9hCP0Lk5+7uT8YOA/TdNSyrFHXMsE1eyEkiqJCVYl0l+w5+E0gj/M5Xz4HldQo6YnxfbJXdHcVeQ4UoiHfJX808NgC8yMfmme11ClwLg/hfTj6be9P4efgXQetND3gDn0/YBie/5u/saHNAXeGNxUAAAAASUVORK5CYII=&#x27;);background-size:cover;display:block"></span>
  <img class="gatsby-resp-image-image" alt="docket desktop dashboad minikube" title="docket desktop dashboad minikube" src="/blog/static/051ad9ed46b328a2381f24708388eea4/04a72/docket-desktop-dashboad-minikube.png" srcSet="/blog/static/051ad9ed46b328a2381f24708388eea4/6a467/docket-desktop-dashboad-minikube.png 210w,/blog/static/051ad9ed46b328a2381f24708388eea4/635b1/docket-desktop-dashboad-minikube.png 420w,/blog/static/051ad9ed46b328a2381f24708388eea4/04a72/docket-desktop-dashboad-minikube.png 840w,/blog/static/051ad9ed46b328a2381f24708388eea4/c6d2c/docket-desktop-dashboad-minikube.png 1260w,/blog/static/051ad9ed46b328a2381f24708388eea4/27aa4/docket-desktop-dashboad-minikube.png 1680w,/blog/static/051ad9ed46b328a2381f24708388eea4/8b984/docket-desktop-dashboad-minikube.png 2560w" sizes="(max-width: 840px) 100vw, 840px" loading="lazy"/>
  </a>
    </span></p><h2 id="%E6%89%93%E5%8C%85%20Nodejs%20%E5%BA%94%E7%94%A8%E9%95%9C%E5%83%8F" class="heading"><span>打包 Nodejs 应用镜像</span><a name="打包 Nodejs 应用镜像" href="#%E6%89%93%E5%8C%85%20Nodejs%20%E5%BA%94%E7%94%A8%E9%95%9C%E5%83%8F" class="anchor">#</a></h2><h3 id="%E5%88%9B%E5%BB%BA%20Nodejs%20%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F" class="heading"><span>创建 Nodejs 应用程序</span><a name="创建 Nodejs 应用程序" href="#%E5%88%9B%E5%BB%BA%20Nodejs%20%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F" class="anchor">#</a></h3><p>创建 <code>hello-node</code> 文件夹，添加以下文件以及代码：</p><p><code>server.js</code></p><div class="pre"><div class="playground show"><div style="position:relative;text-align:left;box-sizing:border-box;padding:0;overflow:hidden;white-space:pre;font-family:monospace"><textarea style="margin:0;border:0;background:none;box-sizing:inherit;display:inherit;font-family:inherit;font-size:inherit;font-style:inherit;font-variant-ligatures:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;tab-size:inherit;text-indent:inherit;text-rendering:inherit;text-transform:inherit;white-space:pre-wrap;word-break:keep-all;overflow-wrap:break-word;position:absolute;top:0;left:0;height:100%;width:100%;resize:none;color:inherit;overflow:hidden;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;-webkit-text-fill-color:transparent;padding-top:10px;padding-right:10px;padding-bottom:10px;padding-left:10px" class="npm__react-simple-code-editor__textarea" disabled="" autoCapitalize="off" autoComplete="off" autoCorrect="off" spellcheck="false" data-gramm="false">var http = require(&#x27;http&#x27;);

var handleRequest = function(request, response) {
  console.log(&#x27;Received request for URL: &#x27; + request.url);
  response.writeHead(200);
  response.end(&#x27;Hello World!&#x27;);
};
var www = http.createServer(handleRequest);
www.listen(8080);</textarea><pre aria-hidden="true" style="margin:0;border:0;background:none;box-sizing:inherit;display:inherit;font-family:inherit;font-size:inherit;font-style:inherit;font-variant-ligatures:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;tab-size:inherit;text-indent:inherit;text-rendering:inherit;text-transform:inherit;white-space:pre-wrap;word-break:keep-all;overflow-wrap:break-word;position:relative;pointer-events:none;padding-top:10px;padding-right:10px;padding-bottom:10px;padding-left:10px"><div class="token-line" style="color:#C5C8C6"><span class="token keyword" style="color:hsl(350, 40%, 70%)">var</span><span class="token plain"> http </span><span class="token operator" style="color:hsl(40, 90%, 60%)">=</span><span class="token plain"> </span><span class="token function">require</span><span class="token punctuation" style="opacity:0.7">(</span><span class="token string" style="color:hsl(40, 90%, 60%)">&#x27;http&#x27;</span><span class="token punctuation" style="opacity:0.7">)</span><span class="token punctuation" style="opacity:0.7">;</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain"></span><span class="token keyword" style="color:hsl(350, 40%, 70%)">var</span><span class="token plain"> </span><span class="token function-variable function">handleRequest</span><span class="token plain"> </span><span class="token operator" style="color:hsl(40, 90%, 60%)">=</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(350, 40%, 70%)">function</span><span class="token punctuation" style="opacity:0.7">(</span><span class="token parameter">request</span><span class="token parameter punctuation" style="opacity:0.7">,</span><span class="token parameter"> response</span><span class="token punctuation" style="opacity:0.7">)</span><span class="token plain"> </span><span class="token punctuation" style="opacity:0.7">{</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">  console</span><span class="token punctuation" style="opacity:0.7">.</span><span class="token function">log</span><span class="token punctuation" style="opacity:0.7">(</span><span class="token string" style="color:hsl(40, 90%, 60%)">&#x27;Received request for URL: &#x27;</span><span class="token plain"> </span><span class="token operator" style="color:hsl(40, 90%, 60%)">+</span><span class="token plain"> request</span><span class="token punctuation" style="opacity:0.7">.</span><span class="token plain">url</span><span class="token punctuation" style="opacity:0.7">)</span><span class="token punctuation" style="opacity:0.7">;</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">  response</span><span class="token punctuation" style="opacity:0.7">.</span><span class="token function">writeHead</span><span class="token punctuation" style="opacity:0.7">(</span><span class="token number" style="color:hsl(350, 40%, 70%)">200</span><span class="token punctuation" style="opacity:0.7">)</span><span class="token punctuation" style="opacity:0.7">;</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">  response</span><span class="token punctuation" style="opacity:0.7">.</span><span class="token function">end</span><span class="token punctuation" style="opacity:0.7">(</span><span class="token string" style="color:hsl(40, 90%, 60%)">&#x27;Hello World!&#x27;</span><span class="token punctuation" style="opacity:0.7">)</span><span class="token punctuation" style="opacity:0.7">;</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain"></span><span class="token punctuation" style="opacity:0.7">}</span><span class="token punctuation" style="opacity:0.7">;</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain"></span><span class="token keyword" style="color:hsl(350, 40%, 70%)">var</span><span class="token plain"> www </span><span class="token operator" style="color:hsl(40, 90%, 60%)">=</span><span class="token plain"> http</span><span class="token punctuation" style="opacity:0.7">.</span><span class="token function">createServer</span><span class="token punctuation" style="opacity:0.7">(</span><span class="token plain">handleRequest</span><span class="token punctuation" style="opacity:0.7">)</span><span class="token punctuation" style="opacity:0.7">;</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">www</span><span class="token punctuation" style="opacity:0.7">.</span><span class="token function">listen</span><span class="token punctuation" style="opacity:0.7">(</span><span class="token number" style="color:hsl(350, 40%, 70%)">8080</span><span class="token punctuation" style="opacity:0.7">)</span><span class="token punctuation" style="opacity:0.7">;</span></div></pre><style type="text/css">
/**
 * Reset the text fill color so that placeholder is visible
 */
.npm__react-simple-code-editor__textarea:empty {
  -webkit-text-fill-color: inherit !important;
}

/**
 * Hack to apply on some CSS on IE10 and IE11
 */
@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {
  /**
    * IE doesn't support '-webkit-text-fill-color'
    * So we use 'color: transparent' to make the text transparent on IE
    * Unlike other browsers, it doesn't affect caret color in IE
    */
  .npm__react-simple-code-editor__textarea {
    color: transparent !important;
  }

  .npm__react-simple-code-editor__textarea::selection {
    background-color: #accef7 !important;
    color: transparent !important;
  }
}
</style></div></div></div><p><code>Dockerfile</code></p><div class="pre"><div class="playground show"><div style="position:relative;text-align:left;box-sizing:border-box;padding:0;overflow:hidden;white-space:pre;font-family:monospace"><textarea style="margin:0;border:0;background:none;box-sizing:inherit;display:inherit;font-family:inherit;font-size:inherit;font-style:inherit;font-variant-ligatures:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;tab-size:inherit;text-indent:inherit;text-rendering:inherit;text-transform:inherit;white-space:pre-wrap;word-break:keep-all;overflow-wrap:break-word;position:absolute;top:0;left:0;height:100%;width:100%;resize:none;color:inherit;overflow:hidden;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;-webkit-text-fill-color:transparent;padding-top:10px;padding-right:10px;padding-bottom:10px;padding-left:10px" class="npm__react-simple-code-editor__textarea" disabled="" autoCapitalize="off" autoComplete="off" autoCorrect="off" spellcheck="false" data-gramm="false">FROM node:10.20.0
EXPOSE 8080
COPY server.js .
CMD node server.js</textarea><pre aria-hidden="true" style="margin:0;border:0;background:none;box-sizing:inherit;display:inherit;font-family:inherit;font-size:inherit;font-style:inherit;font-variant-ligatures:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;tab-size:inherit;text-indent:inherit;text-rendering:inherit;text-transform:inherit;white-space:pre-wrap;word-break:keep-all;overflow-wrap:break-word;position:relative;pointer-events:none;padding-top:10px;padding-right:10px;padding-bottom:10px;padding-left:10px"><div class="token-line" style="color:#C5C8C6"><span class="token constant" style="color:hsl(350, 40%, 70%)">FROM</span><span class="token plain"> node</span><span class="token punctuation" style="opacity:0.7">:</span><span class="token number" style="color:hsl(350, 40%, 70%)">10.20</span><span class="token number" style="color:hsl(350, 40%, 70%)">.0</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain"></span><span class="token constant" style="color:hsl(350, 40%, 70%)">EXPOSE</span><span class="token plain"> </span><span class="token number" style="color:hsl(350, 40%, 70%)">8080</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain"></span><span class="token constant" style="color:hsl(350, 40%, 70%)">COPY</span><span class="token plain"> server</span><span class="token punctuation" style="opacity:0.7">.</span><span class="token plain">js </span><span class="token punctuation" style="opacity:0.7">.</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain"></span><span class="token constant" style="color:hsl(350, 40%, 70%)">CMD</span><span class="token plain"> node server</span><span class="token punctuation" style="opacity:0.7">.</span><span class="token plain">js</span></div></pre><style type="text/css">
/**
 * Reset the text fill color so that placeholder is visible
 */
.npm__react-simple-code-editor__textarea:empty {
  -webkit-text-fill-color: inherit !important;
}

/**
 * Hack to apply on some CSS on IE10 and IE11
 */
@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {
  /**
    * IE doesn't support '-webkit-text-fill-color'
    * So we use 'color: transparent' to make the text transparent on IE
    * Unlike other browsers, it doesn't affect caret color in IE
    */
  .npm__react-simple-code-editor__textarea {
    color: transparent !important;
  }

  .npm__react-simple-code-editor__textarea::selection {
    background-color: #accef7 !important;
    color: transparent !important;
  }
}
</style></div></div></div><h3 id="%E6%89%93%E5%8C%85" class="heading"><span>打包</span><a name="打包" href="#%E6%89%93%E5%8C%85" class="anchor">#</a></h3><div class="pre"><div class="playground show"><div style="position:relative;text-align:left;box-sizing:border-box;padding:0;overflow:hidden;white-space:pre;font-family:monospace"><textarea style="margin:0;border:0;background:none;box-sizing:inherit;display:inherit;font-family:inherit;font-size:inherit;font-style:inherit;font-variant-ligatures:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;tab-size:inherit;text-indent:inherit;text-rendering:inherit;text-transform:inherit;white-space:pre-wrap;word-break:keep-all;overflow-wrap:break-word;position:absolute;top:0;left:0;height:100%;width:100%;resize:none;color:inherit;overflow:hidden;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;-webkit-text-fill-color:transparent;padding-top:10px;padding-right:10px;padding-bottom:10px;padding-left:10px" class="npm__react-simple-code-editor__textarea" disabled="" autoCapitalize="off" autoComplete="off" autoCorrect="off" spellcheck="false" data-gramm="false">docker build -t hello-node:v1 .</textarea><pre aria-hidden="true" style="margin:0;border:0;background:none;box-sizing:inherit;display:inherit;font-family:inherit;font-size:inherit;font-style:inherit;font-variant-ligatures:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;tab-size:inherit;text-indent:inherit;text-rendering:inherit;text-transform:inherit;white-space:pre-wrap;word-break:keep-all;overflow-wrap:break-word;position:relative;pointer-events:none;padding-top:10px;padding-right:10px;padding-bottom:10px;padding-left:10px"><div class="token-line" style="color:#C5C8C6"><span class="token plain">docker build </span><span class="token operator" style="color:hsl(40, 90%, 60%)">-</span><span class="token plain">t hello</span><span class="token operator" style="color:hsl(40, 90%, 60%)">-</span><span class="token plain">node</span><span class="token punctuation" style="opacity:0.7">:</span><span class="token plain">v1 </span><span class="token punctuation" style="opacity:0.7">.</span></div></pre><style type="text/css">
/**
 * Reset the text fill color so that placeholder is visible
 */
.npm__react-simple-code-editor__textarea:empty {
  -webkit-text-fill-color: inherit !important;
}

/**
 * Hack to apply on some CSS on IE10 and IE11
 */
@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {
  /**
    * IE doesn't support '-webkit-text-fill-color'
    * So we use 'color: transparent' to make the text transparent on IE
    * Unlike other browsers, it doesn't affect caret color in IE
    */
  .npm__react-simple-code-editor__textarea {
    color: transparent !important;
  }

  .npm__react-simple-code-editor__textarea::selection {
    background-color: #accef7 !important;
    color: transparent !important;
  }
}
</style></div></div></div><p>生成镜像如下：</p><div class="pre"><div class="playground show"><div style="position:relative;text-align:left;box-sizing:border-box;padding:0;overflow:hidden;white-space:pre;font-family:monospace"><textarea style="margin:0;border:0;background:none;box-sizing:inherit;display:inherit;font-family:inherit;font-size:inherit;font-style:inherit;font-variant-ligatures:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;tab-size:inherit;text-indent:inherit;text-rendering:inherit;text-transform:inherit;white-space:pre-wrap;word-break:keep-all;overflow-wrap:break-word;position:absolute;top:0;left:0;height:100%;width:100%;resize:none;color:inherit;overflow:hidden;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;-webkit-text-fill-color:transparent;padding-top:10px;padding-right:10px;padding-bottom:10px;padding-left:10px" class="npm__react-simple-code-editor__textarea" disabled="" autoCapitalize="off" autoComplete="off" autoCorrect="off" spellcheck="false" data-gramm="false">docker images
# REPOSITORY   TAG      IMAGE ID       CREATED         SIZE
# hello-node   v1       353fc3541cea   2 minutes ago   912MB</textarea><pre aria-hidden="true" style="margin:0;border:0;background:none;box-sizing:inherit;display:inherit;font-family:inherit;font-size:inherit;font-style:inherit;font-variant-ligatures:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;tab-size:inherit;text-indent:inherit;text-rendering:inherit;text-transform:inherit;white-space:pre-wrap;word-break:keep-all;overflow-wrap:break-word;position:relative;pointer-events:none;padding-top:10px;padding-right:10px;padding-bottom:10px;padding-left:10px"><div class="token-line" style="color:#C5C8C6"><span class="token plain">docker images</span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain"># </span><span class="token constant" style="color:hsl(350, 40%, 70%)">REPOSITORY</span><span class="token plain">   </span><span class="token constant" style="color:hsl(350, 40%, 70%)">TAG</span><span class="token plain">      </span><span class="token constant" style="color:hsl(350, 40%, 70%)">IMAGE</span><span class="token plain"> </span><span class="token constant" style="color:hsl(350, 40%, 70%)">ID</span><span class="token plain">       </span><span class="token constant" style="color:hsl(350, 40%, 70%)">CREATED</span><span class="token plain">         </span><span class="token constant" style="color:hsl(350, 40%, 70%)">SIZE</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain"># hello</span><span class="token operator" style="color:hsl(40, 90%, 60%)">-</span><span class="token plain">node   v1       </span><span class="token number" style="color:hsl(350, 40%, 70%)">353</span><span class="token plain">fc3541cea   </span><span class="token number" style="color:hsl(350, 40%, 70%)">2</span><span class="token plain"> minutes ago   </span><span class="token number" style="color:hsl(350, 40%, 70%)">912</span><span class="token plain">MB</span></div></pre><style type="text/css">
/**
 * Reset the text fill color so that placeholder is visible
 */
.npm__react-simple-code-editor__textarea:empty {
  -webkit-text-fill-color: inherit !important;
}

/**
 * Hack to apply on some CSS on IE10 and IE11
 */
@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {
  /**
    * IE doesn't support '-webkit-text-fill-color'
    * So we use 'color: transparent' to make the text transparent on IE
    * Unlike other browsers, it doesn't affect caret color in IE
    */
  .npm__react-simple-code-editor__textarea {
    color: transparent !important;
  }

  .npm__react-simple-code-editor__textarea::selection {
    background-color: #accef7 !important;
    color: transparent !important;
  }
}
</style></div></div></div><h2 id="%E5%88%9B%E5%BB%BA%20Deployment" class="heading"><span>创建 Deployment</span><a name="创建 Deployment" href="#%E5%88%9B%E5%BB%BA%20Deployment" class="anchor">#</a></h2><p>Kubernetes Pod 是一个或多个容器组合在一起得共享资源，Kubernetes Deployment 是检查 Pod的健康状况。</p><div class="pre"><div class="playground show"><div style="position:relative;text-align:left;box-sizing:border-box;padding:0;overflow:hidden;white-space:pre;font-family:monospace"><textarea style="margin:0;border:0;background:none;box-sizing:inherit;display:inherit;font-family:inherit;font-size:inherit;font-style:inherit;font-variant-ligatures:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;tab-size:inherit;text-indent:inherit;text-rendering:inherit;text-transform:inherit;white-space:pre-wrap;word-break:keep-all;overflow-wrap:break-word;position:absolute;top:0;left:0;height:100%;width:100%;resize:none;color:inherit;overflow:hidden;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;-webkit-text-fill-color:transparent;padding-top:10px;padding-right:10px;padding-bottom:10px;padding-left:10px" class="npm__react-simple-code-editor__textarea" disabled="" autoCapitalize="off" autoComplete="off" autoCorrect="off" spellcheck="false" data-gramm="false">kubectl create deployment hello-node --image=hello-node:v1
# 输出：deployment.apps/hello-node created

# 查看 Deployment
kubectl get deployments
# NAME         READY   UP-TO-DATE   AVAILABLE   AGE
# hello-node   1/1     1            1           19s

kubectl run hello-node --image=hello-node:v1 --port=8080
# 输出：pod/hello-node created

# 查看 Pod
kubectl get pods
# NAME         READY   STATUS    RESTARTS   AGE
# hello-node   1/1     Running   0          2m56s</textarea><pre aria-hidden="true" style="margin:0;border:0;background:none;box-sizing:inherit;display:inherit;font-family:inherit;font-size:inherit;font-style:inherit;font-variant-ligatures:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;tab-size:inherit;text-indent:inherit;text-rendering:inherit;text-transform:inherit;white-space:pre-wrap;word-break:keep-all;overflow-wrap:break-word;position:relative;pointer-events:none;padding-top:10px;padding-right:10px;padding-bottom:10px;padding-left:10px"><div class="token-line" style="color:#C5C8C6"><span class="token plain">kubectl create deployment hello</span><span class="token operator" style="color:hsl(40, 90%, 60%)">-</span><span class="token plain">node </span><span class="token operator" style="color:hsl(40, 90%, 60%)">--</span><span class="token plain">image</span><span class="token operator" style="color:hsl(40, 90%, 60%)">=</span><span class="token plain">hello</span><span class="token operator" style="color:hsl(40, 90%, 60%)">-</span><span class="token plain">node</span><span class="token punctuation" style="opacity:0.7">:</span><span class="token plain">v1</span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain"># 输出：deployment</span><span class="token punctuation" style="opacity:0.7">.</span><span class="token plain">apps</span><span class="token operator" style="color:hsl(40, 90%, 60%)">/</span><span class="token plain">hello</span><span class="token operator" style="color:hsl(40, 90%, 60%)">-</span><span class="token plain">node created</span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain"># 查看 Deployment</span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">kubectl </span><span class="token keyword" style="color:hsl(350, 40%, 70%)">get</span><span class="token plain"> deployments</span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain"># </span><span class="token constant" style="color:hsl(350, 40%, 70%)">NAME</span><span class="token plain">         </span><span class="token constant" style="color:hsl(350, 40%, 70%)">READY</span><span class="token plain">   </span><span class="token constant" style="color:hsl(350, 40%, 70%)">UP</span><span class="token operator" style="color:hsl(40, 90%, 60%)">-</span><span class="token constant" style="color:hsl(350, 40%, 70%)">TO</span><span class="token operator" style="color:hsl(40, 90%, 60%)">-</span><span class="token constant" style="color:hsl(350, 40%, 70%)">DATE</span><span class="token plain">   </span><span class="token constant" style="color:hsl(350, 40%, 70%)">AVAILABLE</span><span class="token plain">   </span><span class="token constant" style="color:hsl(350, 40%, 70%)">AGE</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain"># hello</span><span class="token operator" style="color:hsl(40, 90%, 60%)">-</span><span class="token plain">node   </span><span class="token number" style="color:hsl(350, 40%, 70%)">1</span><span class="token operator" style="color:hsl(40, 90%, 60%)">/</span><span class="token number" style="color:hsl(350, 40%, 70%)">1</span><span class="token plain">     </span><span class="token number" style="color:hsl(350, 40%, 70%)">1</span><span class="token plain">            </span><span class="token number" style="color:hsl(350, 40%, 70%)">1</span><span class="token plain">           </span><span class="token number" style="color:hsl(350, 40%, 70%)">19</span><span class="token plain">s</span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">kubectl run hello</span><span class="token operator" style="color:hsl(40, 90%, 60%)">-</span><span class="token plain">node </span><span class="token operator" style="color:hsl(40, 90%, 60%)">--</span><span class="token plain">image</span><span class="token operator" style="color:hsl(40, 90%, 60%)">=</span><span class="token plain">hello</span><span class="token operator" style="color:hsl(40, 90%, 60%)">-</span><span class="token plain">node</span><span class="token punctuation" style="opacity:0.7">:</span><span class="token plain">v1 </span><span class="token operator" style="color:hsl(40, 90%, 60%)">--</span><span class="token plain">port</span><span class="token operator" style="color:hsl(40, 90%, 60%)">=</span><span class="token number" style="color:hsl(350, 40%, 70%)">8080</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain"># 输出：pod</span><span class="token operator" style="color:hsl(40, 90%, 60%)">/</span><span class="token plain">hello</span><span class="token operator" style="color:hsl(40, 90%, 60%)">-</span><span class="token plain">node created</span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain"># 查看 Pod</span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">kubectl </span><span class="token keyword" style="color:hsl(350, 40%, 70%)">get</span><span class="token plain"> pods</span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain"># </span><span class="token constant" style="color:hsl(350, 40%, 70%)">NAME</span><span class="token plain">         </span><span class="token constant" style="color:hsl(350, 40%, 70%)">READY</span><span class="token plain">   </span><span class="token constant" style="color:hsl(350, 40%, 70%)">STATUS</span><span class="token plain">    </span><span class="token constant" style="color:hsl(350, 40%, 70%)">RESTARTS</span><span class="token plain">   </span><span class="token constant" style="color:hsl(350, 40%, 70%)">AGE</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain"># hello</span><span class="token operator" style="color:hsl(40, 90%, 60%)">-</span><span class="token plain">node   </span><span class="token number" style="color:hsl(350, 40%, 70%)">1</span><span class="token operator" style="color:hsl(40, 90%, 60%)">/</span><span class="token number" style="color:hsl(350, 40%, 70%)">1</span><span class="token plain">     Running   </span><span class="token number" style="color:hsl(350, 40%, 70%)">0</span><span class="token plain">          </span><span class="token number" style="color:hsl(350, 40%, 70%)">2</span><span class="token plain">m56s</span></div></pre><style type="text/css">
/**
 * Reset the text fill color so that placeholder is visible
 */
.npm__react-simple-code-editor__textarea:empty {
  -webkit-text-fill-color: inherit !important;
}

/**
 * Hack to apply on some CSS on IE10 and IE11
 */
@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {
  /**
    * IE doesn't support '-webkit-text-fill-color'
    * So we use 'color: transparent' to make the text transparent on IE
    * Unlike other browsers, it doesn't affect caret color in IE
    */
  .npm__react-simple-code-editor__textarea {
    color: transparent !important;
  }

  .npm__react-simple-code-editor__textarea::selection {
    background-color: #accef7 !important;
    color: transparent !important;
  }
}
</style></div></div></div><h3 id="%E6%9F%A5%E7%9C%8B%E7%BE%A4%E9%9B%86%20events" class="heading"><span>查看群集 events</span><a name="查看群集 events" href="#%E6%9F%A5%E7%9C%8B%E7%BE%A4%E9%9B%86%20events" class="anchor">#</a></h3><div class="pre"><div class="playground show"><div style="position:relative;text-align:left;box-sizing:border-box;padding:0;overflow:hidden;white-space:pre;font-family:monospace"><textarea style="margin:0;border:0;background:none;box-sizing:inherit;display:inherit;font-family:inherit;font-size:inherit;font-style:inherit;font-variant-ligatures:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;tab-size:inherit;text-indent:inherit;text-rendering:inherit;text-transform:inherit;white-space:pre-wrap;word-break:keep-all;overflow-wrap:break-word;position:absolute;top:0;left:0;height:100%;width:100%;resize:none;color:inherit;overflow:hidden;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;-webkit-text-fill-color:transparent;padding-top:10px;padding-right:10px;padding-bottom:10px;padding-left:10px" class="npm__react-simple-code-editor__textarea" disabled="" autoCapitalize="off" autoComplete="off" autoCorrect="off" spellcheck="false" data-gramm="false">kubectl get events</textarea><pre aria-hidden="true" style="margin:0;border:0;background:none;box-sizing:inherit;display:inherit;font-family:inherit;font-size:inherit;font-style:inherit;font-variant-ligatures:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;tab-size:inherit;text-indent:inherit;text-rendering:inherit;text-transform:inherit;white-space:pre-wrap;word-break:keep-all;overflow-wrap:break-word;position:relative;pointer-events:none;padding-top:10px;padding-right:10px;padding-bottom:10px;padding-left:10px"><div class="token-line" style="color:#C5C8C6"><span class="token plain">kubectl </span><span class="token keyword" style="color:hsl(350, 40%, 70%)">get</span><span class="token plain"> events</span></div></pre><style type="text/css">
/**
 * Reset the text fill color so that placeholder is visible
 */
.npm__react-simple-code-editor__textarea:empty {
  -webkit-text-fill-color: inherit !important;
}

/**
 * Hack to apply on some CSS on IE10 and IE11
 */
@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {
  /**
    * IE doesn't support '-webkit-text-fill-color'
    * So we use 'color: transparent' to make the text transparent on IE
    * Unlike other browsers, it doesn't affect caret color in IE
    */
  .npm__react-simple-code-editor__textarea {
    color: transparent !important;
  }

  .npm__react-simple-code-editor__textarea::selection {
    background-color: #accef7 !important;
    color: transparent !important;
  }
}
</style></div></div></div><h3 id="%E6%9F%A5%E7%9C%8B%20kubectl%20%E9%85%8D%E7%BD%AE" class="heading"><span>查看 kubectl 配置</span><a name="查看 kubectl 配置" href="#%E6%9F%A5%E7%9C%8B%20kubectl%20%E9%85%8D%E7%BD%AE" class="anchor">#</a></h3><div class="pre"><div class="playground show"><div style="position:relative;text-align:left;box-sizing:border-box;padding:0;overflow:hidden;white-space:pre;font-family:monospace"><textarea style="margin:0;border:0;background:none;box-sizing:inherit;display:inherit;font-family:inherit;font-size:inherit;font-style:inherit;font-variant-ligatures:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;tab-size:inherit;text-indent:inherit;text-rendering:inherit;text-transform:inherit;white-space:pre-wrap;word-break:keep-all;overflow-wrap:break-word;position:absolute;top:0;left:0;height:100%;width:100%;resize:none;color:inherit;overflow:hidden;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;-webkit-text-fill-color:transparent;padding-top:10px;padding-right:10px;padding-bottom:10px;padding-left:10px" class="npm__react-simple-code-editor__textarea" disabled="" autoCapitalize="off" autoComplete="off" autoCorrect="off" spellcheck="false" data-gramm="false">kubectl config view</textarea><pre aria-hidden="true" style="margin:0;border:0;background:none;box-sizing:inherit;display:inherit;font-family:inherit;font-size:inherit;font-style:inherit;font-variant-ligatures:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;tab-size:inherit;text-indent:inherit;text-rendering:inherit;text-transform:inherit;white-space:pre-wrap;word-break:keep-all;overflow-wrap:break-word;position:relative;pointer-events:none;padding-top:10px;padding-right:10px;padding-bottom:10px;padding-left:10px"><div class="token-line" style="color:#C5C8C6"><span class="token plain">kubectl config view</span></div></pre><style type="text/css">
/**
 * Reset the text fill color so that placeholder is visible
 */
.npm__react-simple-code-editor__textarea:empty {
  -webkit-text-fill-color: inherit !important;
}

/**
 * Hack to apply on some CSS on IE10 and IE11
 */
@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {
  /**
    * IE doesn't support '-webkit-text-fill-color'
    * So we use 'color: transparent' to make the text transparent on IE
    * Unlike other browsers, it doesn't affect caret color in IE
    */
  .npm__react-simple-code-editor__textarea {
    color: transparent !important;
  }

  .npm__react-simple-code-editor__textarea::selection {
    background-color: #accef7 !important;
    color: transparent !important;
  }
}
</style></div></div></div><h2 id="%E5%88%9B%E5%BB%BA%20Service" class="heading"><span>创建 Service</span><a name="创建 Service" href="#%E5%88%9B%E5%BB%BA%20Service" class="anchor">#</a></h2><p>默认情况，Pod 只能通过 Kubernetes 群集内部 IP 访问。要使 hello-node 容器从 Kubernetes 虚拟网络外部访问，须要使用 Kubernetes Service 暴露 Pod。</p><p>使用 <code>kubectl expose</code> 命令将 Pod 暴露到外部环境:</p><div class="pre"><div class="playground show"><div style="position:relative;text-align:left;box-sizing:border-box;padding:0;overflow:hidden;white-space:pre;font-family:monospace"><textarea style="margin:0;border:0;background:none;box-sizing:inherit;display:inherit;font-family:inherit;font-size:inherit;font-style:inherit;font-variant-ligatures:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;tab-size:inherit;text-indent:inherit;text-rendering:inherit;text-transform:inherit;white-space:pre-wrap;word-break:keep-all;overflow-wrap:break-word;position:absolute;top:0;left:0;height:100%;width:100%;resize:none;color:inherit;overflow:hidden;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;-webkit-text-fill-color:transparent;padding-top:10px;padding-right:10px;padding-bottom:10px;padding-left:10px" class="npm__react-simple-code-editor__textarea" disabled="" autoCapitalize="off" autoComplete="off" autoCorrect="off" spellcheck="false" data-gramm="false">kubectl expose deployment hello-node --type=LoadBalancer --port 8080
# 输出：service/hello-node exposed

kubectl get services
# NAME         TYPE           CLUSTER-IP      EXTERNAL-IP   PORT(S)          AGE
# hello-node   LoadBalancer   10.111.51.252   &lt;pending&gt;     8080:31869/TCP   55s
# kubernetes   ClusterIP      10.96.0.1       &lt;none&gt;        443/TCP          16h</textarea><pre aria-hidden="true" style="margin:0;border:0;background:none;box-sizing:inherit;display:inherit;font-family:inherit;font-size:inherit;font-style:inherit;font-variant-ligatures:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;tab-size:inherit;text-indent:inherit;text-rendering:inherit;text-transform:inherit;white-space:pre-wrap;word-break:keep-all;overflow-wrap:break-word;position:relative;pointer-events:none;padding-top:10px;padding-right:10px;padding-bottom:10px;padding-left:10px"><div class="token-line" style="color:#C5C8C6"><span class="token plain">kubectl expose deployment hello</span><span class="token operator" style="color:hsl(40, 90%, 60%)">-</span><span class="token plain">node </span><span class="token operator" style="color:hsl(40, 90%, 60%)">--</span><span class="token plain">type</span><span class="token operator" style="color:hsl(40, 90%, 60%)">=</span><span class="token plain">LoadBalancer </span><span class="token operator" style="color:hsl(40, 90%, 60%)">--</span><span class="token plain">port </span><span class="token number" style="color:hsl(350, 40%, 70%)">8080</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain"># 输出：service</span><span class="token operator" style="color:hsl(40, 90%, 60%)">/</span><span class="token plain">hello</span><span class="token operator" style="color:hsl(40, 90%, 60%)">-</span><span class="token plain">node exposed</span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">kubectl </span><span class="token keyword" style="color:hsl(350, 40%, 70%)">get</span><span class="token plain"> services</span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain"># </span><span class="token constant" style="color:hsl(350, 40%, 70%)">NAME</span><span class="token plain">         </span><span class="token constant" style="color:hsl(350, 40%, 70%)">TYPE</span><span class="token plain">           </span><span class="token constant" style="color:hsl(350, 40%, 70%)">CLUSTER</span><span class="token operator" style="color:hsl(40, 90%, 60%)">-</span><span class="token constant" style="color:hsl(350, 40%, 70%)">IP</span><span class="token plain">      </span><span class="token constant" style="color:hsl(350, 40%, 70%)">EXTERNAL</span><span class="token operator" style="color:hsl(40, 90%, 60%)">-</span><span class="token constant" style="color:hsl(350, 40%, 70%)">IP</span><span class="token plain">   </span><span class="token constant" style="color:hsl(350, 40%, 70%)">PORT</span><span class="token punctuation" style="opacity:0.7">(</span><span class="token constant" style="color:hsl(350, 40%, 70%)">S</span><span class="token punctuation" style="opacity:0.7">)</span><span class="token plain">          </span><span class="token constant" style="color:hsl(350, 40%, 70%)">AGE</span><span class="token plain"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain"># hello</span><span class="token operator" style="color:hsl(40, 90%, 60%)">-</span><span class="token plain">node   LoadBalancer   </span><span class="token number" style="color:hsl(350, 40%, 70%)">10.111</span><span class="token number" style="color:hsl(350, 40%, 70%)">.51</span><span class="token number" style="color:hsl(350, 40%, 70%)">.252</span><span class="token plain">   </span><span class="token tag punctuation" style="color:hsl(350, 40%, 70%);opacity:0.7">&lt;</span><span class="token tag" style="color:hsl(350, 40%, 70%)">pending</span><span class="token tag punctuation" style="color:hsl(350, 40%, 70%);opacity:0.7">&gt;</span><span class="token plain">     </span><span class="token number" style="color:hsl(350, 40%, 70%)">8080</span><span class="token punctuation" style="opacity:0.7">:</span><span class="token number" style="color:hsl(350, 40%, 70%)">31869</span><span class="token operator" style="color:hsl(40, 90%, 60%)">/</span><span class="token constant" style="color:hsl(350, 40%, 70%)">TCP</span><span class="token plain">   </span><span class="token number" style="color:hsl(350, 40%, 70%)">55</span><span class="token plain">s</span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain"># kubernetes   ClusterIP      </span><span class="token number" style="color:hsl(350, 40%, 70%)">10.96</span><span class="token number" style="color:hsl(350, 40%, 70%)">.0</span><span class="token number" style="color:hsl(350, 40%, 70%)">.1</span><span class="token plain">       </span><span class="token tag punctuation" style="color:hsl(350, 40%, 70%);opacity:0.7">&lt;</span><span class="token tag" style="color:hsl(350, 40%, 70%)">none</span><span class="token tag punctuation" style="color:hsl(350, 40%, 70%);opacity:0.7">&gt;</span><span class="token plain">        </span><span class="token number" style="color:hsl(350, 40%, 70%)">443</span><span class="token operator" style="color:hsl(40, 90%, 60%)">/</span><span class="token constant" style="color:hsl(350, 40%, 70%)">TCP</span><span class="token plain">          </span><span class="token number" style="color:hsl(350, 40%, 70%)">16</span><span class="token plain">h</span></div></pre><style type="text/css">
/**
 * Reset the text fill color so that placeholder is visible
 */
.npm__react-simple-code-editor__textarea:empty {
  -webkit-text-fill-color: inherit !important;
}

/**
 * Hack to apply on some CSS on IE10 and IE11
 */
@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {
  /**
    * IE doesn't support '-webkit-text-fill-color'
    * So we use 'color: transparent' to make the text transparent on IE
    * Unlike other browsers, it doesn't affect caret color in IE
    */
  .npm__react-simple-code-editor__textarea {
    color: transparent !important;
  }

  .npm__react-simple-code-editor__textarea::selection {
    background-color: #accef7 !important;
    color: transparent !important;
  }
}
</style></div></div></div><h3 id="%E6%B5%8F%E8%A7%88%E5%99%A8%E8%AE%BF%E9%97%AE%20Service" class="heading"><span>浏览器访问 Service</span><a name="浏览器访问 Service" href="#%E6%B5%8F%E8%A7%88%E5%99%A8%E8%AE%BF%E9%97%AE%20Service" class="anchor">#</a></h3><p>可以通过minikube Service 命令访问。</p><div class="pre"><div class="playground show"><div style="position:relative;text-align:left;box-sizing:border-box;padding:0;overflow:hidden;white-space:pre;font-family:monospace"><textarea style="margin:0;border:0;background:none;box-sizing:inherit;display:inherit;font-family:inherit;font-size:inherit;font-style:inherit;font-variant-ligatures:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;tab-size:inherit;text-indent:inherit;text-rendering:inherit;text-transform:inherit;white-space:pre-wrap;word-break:keep-all;overflow-wrap:break-word;position:absolute;top:0;left:0;height:100%;width:100%;resize:none;color:inherit;overflow:hidden;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;-webkit-text-fill-color:transparent;padding-top:10px;padding-right:10px;padding-bottom:10px;padding-left:10px" class="npm__react-simple-code-editor__textarea" disabled="" autoCapitalize="off" autoComplete="off" autoCorrect="off" spellcheck="false" data-gramm="false">minikube service hello-node</textarea><pre aria-hidden="true" style="margin:0;border:0;background:none;box-sizing:inherit;display:inherit;font-family:inherit;font-size:inherit;font-style:inherit;font-variant-ligatures:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;tab-size:inherit;text-indent:inherit;text-rendering:inherit;text-transform:inherit;white-space:pre-wrap;word-break:keep-all;overflow-wrap:break-word;position:relative;pointer-events:none;padding-top:10px;padding-right:10px;padding-bottom:10px;padding-left:10px"><div class="token-line" style="color:#C5C8C6"><span class="token plain">minikube service hello</span><span class="token operator" style="color:hsl(40, 90%, 60%)">-</span><span class="token plain">node</span></div></pre><style type="text/css">
/**
 * Reset the text fill color so that placeholder is visible
 */
.npm__react-simple-code-editor__textarea:empty {
  -webkit-text-fill-color: inherit !important;
}

/**
 * Hack to apply on some CSS on IE10 and IE11
 */
@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {
  /**
    * IE doesn't support '-webkit-text-fill-color'
    * So we use 'color: transparent' to make the text transparent on IE
    * Unlike other browsers, it doesn't affect caret color in IE
    */
  .npm__react-simple-code-editor__textarea {
    color: transparent !important;
  }

  .npm__react-simple-code-editor__textarea::selection {
    background-color: #accef7 !important;
    color: transparent !important;
  }
}
</style></div></div></div><p>会即刻打开浏览器，显示 “Hello World” 消息。</p><h2 id="%E6%9B%B4%E6%96%B0%20Nodejs%20%E5%BA%94%E7%94%A8%E9%95%9C%E5%83%8F%E5%92%8C%E6%9C%8D%E5%8A%A1" class="heading"><span>更新 Nodejs 应用镜像和服务</span><a name="更新 Nodejs 应用镜像和服务" href="#%E6%9B%B4%E6%96%B0%20Nodejs%20%E5%BA%94%E7%94%A8%E9%95%9C%E5%83%8F%E5%92%8C%E6%9C%8D%E5%8A%A1" class="anchor">#</a></h2><p>修改 Nodejs 程序并出新镜像：</p><div class="pre"><div class="playground show"><div style="position:relative;text-align:left;box-sizing:border-box;padding:0;overflow:hidden;white-space:pre;font-family:monospace"><textarea style="margin:0;border:0;background:none;box-sizing:inherit;display:inherit;font-family:inherit;font-size:inherit;font-style:inherit;font-variant-ligatures:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;tab-size:inherit;text-indent:inherit;text-rendering:inherit;text-transform:inherit;white-space:pre-wrap;word-break:keep-all;overflow-wrap:break-word;position:absolute;top:0;left:0;height:100%;width:100%;resize:none;color:inherit;overflow:hidden;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;-webkit-text-fill-color:transparent;padding-top:10px;padding-right:10px;padding-bottom:10px;padding-left:10px" class="npm__react-simple-code-editor__textarea" disabled="" autoCapitalize="off" autoComplete="off" autoCorrect="off" spellcheck="false" data-gramm="false">docker build -t hello-node:v2 .</textarea><pre aria-hidden="true" style="margin:0;border:0;background:none;box-sizing:inherit;display:inherit;font-family:inherit;font-size:inherit;font-style:inherit;font-variant-ligatures:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;tab-size:inherit;text-indent:inherit;text-rendering:inherit;text-transform:inherit;white-space:pre-wrap;word-break:keep-all;overflow-wrap:break-word;position:relative;pointer-events:none;padding-top:10px;padding-right:10px;padding-bottom:10px;padding-left:10px"><div class="token-line" style="color:#C5C8C6"><span class="token plain">docker build </span><span class="token operator" style="color:hsl(40, 90%, 60%)">-</span><span class="token plain">t hello</span><span class="token operator" style="color:hsl(40, 90%, 60%)">-</span><span class="token plain">node</span><span class="token punctuation" style="opacity:0.7">:</span><span class="token plain">v2 </span><span class="token punctuation" style="opacity:0.7">.</span></div></pre><style type="text/css">
/**
 * Reset the text fill color so that placeholder is visible
 */
.npm__react-simple-code-editor__textarea:empty {
  -webkit-text-fill-color: inherit !important;
}

/**
 * Hack to apply on some CSS on IE10 and IE11
 */
@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {
  /**
    * IE doesn't support '-webkit-text-fill-color'
    * So we use 'color: transparent' to make the text transparent on IE
    * Unlike other browsers, it doesn't affect caret color in IE
    */
  .npm__react-simple-code-editor__textarea {
    color: transparent !important;
  }

  .npm__react-simple-code-editor__textarea::selection {
    background-color: #accef7 !important;
    color: transparent !important;
  }
}
</style></div></div></div><h3 id="Deployment%E6%9B%B4%E6%96%B0%E9%95%9C%E5%83%8F" class="heading"><span>Deployment更新镜像</span><a name="Deployment更新镜像" href="#Deployment%E6%9B%B4%E6%96%B0%E9%95%9C%E5%83%8F" class="anchor">#</a></h3><div class="pre"><div class="playground show"><div style="position:relative;text-align:left;box-sizing:border-box;padding:0;overflow:hidden;white-space:pre;font-family:monospace"><textarea style="margin:0;border:0;background:none;box-sizing:inherit;display:inherit;font-family:inherit;font-size:inherit;font-style:inherit;font-variant-ligatures:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;tab-size:inherit;text-indent:inherit;text-rendering:inherit;text-transform:inherit;white-space:pre-wrap;word-break:keep-all;overflow-wrap:break-word;position:absolute;top:0;left:0;height:100%;width:100%;resize:none;color:inherit;overflow:hidden;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;-webkit-text-fill-color:transparent;padding-top:10px;padding-right:10px;padding-bottom:10px;padding-left:10px" class="npm__react-simple-code-editor__textarea" disabled="" autoCapitalize="off" autoComplete="off" autoCorrect="off" spellcheck="false" data-gramm="false">kubectl set image deployment/hello-node hello-node=hello-node:v2</textarea><pre aria-hidden="true" style="margin:0;border:0;background:none;box-sizing:inherit;display:inherit;font-family:inherit;font-size:inherit;font-style:inherit;font-variant-ligatures:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;tab-size:inherit;text-indent:inherit;text-rendering:inherit;text-transform:inherit;white-space:pre-wrap;word-break:keep-all;overflow-wrap:break-word;position:relative;pointer-events:none;padding-top:10px;padding-right:10px;padding-bottom:10px;padding-left:10px"><div class="token-line" style="color:#C5C8C6"><span class="token plain">kubectl </span><span class="token keyword" style="color:hsl(350, 40%, 70%)">set</span><span class="token plain"> image deployment</span><span class="token operator" style="color:hsl(40, 90%, 60%)">/</span><span class="token plain">hello</span><span class="token operator" style="color:hsl(40, 90%, 60%)">-</span><span class="token plain">node hello</span><span class="token operator" style="color:hsl(40, 90%, 60%)">-</span><span class="token plain">node</span><span class="token operator" style="color:hsl(40, 90%, 60%)">=</span><span class="token plain">hello</span><span class="token operator" style="color:hsl(40, 90%, 60%)">-</span><span class="token plain">node</span><span class="token punctuation" style="opacity:0.7">:</span><span class="token plain">v2</span></div></pre><style type="text/css">
/**
 * Reset the text fill color so that placeholder is visible
 */
.npm__react-simple-code-editor__textarea:empty {
  -webkit-text-fill-color: inherit !important;
}

/**
 * Hack to apply on some CSS on IE10 and IE11
 */
@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {
  /**
    * IE doesn't support '-webkit-text-fill-color'
    * So we use 'color: transparent' to make the text transparent on IE
    * Unlike other browsers, it doesn't affect caret color in IE
    */
  .npm__react-simple-code-editor__textarea {
    color: transparent !important;
  }

  .npm__react-simple-code-editor__textarea::selection {
    background-color: #accef7 !important;
    color: transparent !important;
  }
}
</style></div></div></div><h3 id="%E6%9B%B4%E6%96%B0%E6%9C%8D%E5%8A%A1" class="heading"><span>更新服务</span><a name="更新服务" href="#%E6%9B%B4%E6%96%B0%E6%9C%8D%E5%8A%A1" class="anchor">#</a></h3><div class="pre"><div class="playground show"><div style="position:relative;text-align:left;box-sizing:border-box;padding:0;overflow:hidden;white-space:pre;font-family:monospace"><textarea style="margin:0;border:0;background:none;box-sizing:inherit;display:inherit;font-family:inherit;font-size:inherit;font-style:inherit;font-variant-ligatures:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;tab-size:inherit;text-indent:inherit;text-rendering:inherit;text-transform:inherit;white-space:pre-wrap;word-break:keep-all;overflow-wrap:break-word;position:absolute;top:0;left:0;height:100%;width:100%;resize:none;color:inherit;overflow:hidden;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;-webkit-text-fill-color:transparent;padding-top:10px;padding-right:10px;padding-bottom:10px;padding-left:10px" class="npm__react-simple-code-editor__textarea" disabled="" autoCapitalize="off" autoComplete="off" autoCorrect="off" spellcheck="false" data-gramm="false">minikube service hello-node</textarea><pre aria-hidden="true" style="margin:0;border:0;background:none;box-sizing:inherit;display:inherit;font-family:inherit;font-size:inherit;font-style:inherit;font-variant-ligatures:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;tab-size:inherit;text-indent:inherit;text-rendering:inherit;text-transform:inherit;white-space:pre-wrap;word-break:keep-all;overflow-wrap:break-word;position:relative;pointer-events:none;padding-top:10px;padding-right:10px;padding-bottom:10px;padding-left:10px"><div class="token-line" style="color:#C5C8C6"><span class="token plain">minikube service hello</span><span class="token operator" style="color:hsl(40, 90%, 60%)">-</span><span class="token plain">node</span></div></pre><style type="text/css">
/**
 * Reset the text fill color so that placeholder is visible
 */
.npm__react-simple-code-editor__textarea:empty {
  -webkit-text-fill-color: inherit !important;
}

/**
 * Hack to apply on some CSS on IE10 and IE11
 */
@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {
  /**
    * IE doesn't support '-webkit-text-fill-color'
    * So we use 'color: transparent' to make the text transparent on IE
    * Unlike other browsers, it doesn't affect caret color in IE
    */
  .npm__react-simple-code-editor__textarea {
    color: transparent !important;
  }

  .npm__react-simple-code-editor__textarea::selection {
    background-color: #accef7 !important;
    color: transparent !important;
  }
}
</style></div></div></div><h2 id="%E6%B8%85%E7%90%86" class="heading"><span>清理</span><a name="清理" href="#%E6%B8%85%E7%90%86" class="anchor">#</a></h2><ul><li><p>清理集群中的资源</p><div class="pre"><div class="playground show"><div style="position:relative;text-align:left;box-sizing:border-box;padding:0;overflow:hidden;white-space:pre;font-family:monospace"><textarea style="margin:0;border:0;background:none;box-sizing:inherit;display:inherit;font-family:inherit;font-size:inherit;font-style:inherit;font-variant-ligatures:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;tab-size:inherit;text-indent:inherit;text-rendering:inherit;text-transform:inherit;white-space:pre-wrap;word-break:keep-all;overflow-wrap:break-word;position:absolute;top:0;left:0;height:100%;width:100%;resize:none;color:inherit;overflow:hidden;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;-webkit-text-fill-color:transparent;padding-top:10px;padding-right:10px;padding-bottom:10px;padding-left:10px" class="npm__react-simple-code-editor__textarea" disabled="" autoCapitalize="off" autoComplete="off" autoCorrect="off" spellcheck="false" data-gramm="false">kubectl delete service hello-node
kubectl delete deployment hello-node</textarea><pre aria-hidden="true" style="margin:0;border:0;background:none;box-sizing:inherit;display:inherit;font-family:inherit;font-size:inherit;font-style:inherit;font-variant-ligatures:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;tab-size:inherit;text-indent:inherit;text-rendering:inherit;text-transform:inherit;white-space:pre-wrap;word-break:keep-all;overflow-wrap:break-word;position:relative;pointer-events:none;padding-top:10px;padding-right:10px;padding-bottom:10px;padding-left:10px"><div class="token-line" style="color:#C5C8C6"><span class="token plain">kubectl </span><span class="token keyword" style="color:hsl(350, 40%, 70%)">delete</span><span class="token plain"> service hello</span><span class="token operator" style="color:hsl(40, 90%, 60%)">-</span><span class="token plain">node</span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">kubectl </span><span class="token keyword" style="color:hsl(350, 40%, 70%)">delete</span><span class="token plain"> deployment hello</span><span class="token operator" style="color:hsl(40, 90%, 60%)">-</span><span class="token plain">node</span></div></pre><style type="text/css">
/**
 * Reset the text fill color so that placeholder is visible
 */
.npm__react-simple-code-editor__textarea:empty {
  -webkit-text-fill-color: inherit !important;
}

/**
 * Hack to apply on some CSS on IE10 and IE11
 */
@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {
  /**
    * IE doesn't support '-webkit-text-fill-color'
    * So we use 'color: transparent' to make the text transparent on IE
    * Unlike other browsers, it doesn't affect caret color in IE
    */
  .npm__react-simple-code-editor__textarea {
    color: transparent !important;
  }

  .npm__react-simple-code-editor__textarea::selection {
    background-color: #accef7 !important;
    color: transparent !important;
  }
}
</style></div></div></div></li><li><p>服务停用</p><div class="pre"><div class="playground show"><div style="position:relative;text-align:left;box-sizing:border-box;padding:0;overflow:hidden;white-space:pre;font-family:monospace"><textarea style="margin:0;border:0;background:none;box-sizing:inherit;display:inherit;font-family:inherit;font-size:inherit;font-style:inherit;font-variant-ligatures:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;tab-size:inherit;text-indent:inherit;text-rendering:inherit;text-transform:inherit;white-space:pre-wrap;word-break:keep-all;overflow-wrap:break-word;position:absolute;top:0;left:0;height:100%;width:100%;resize:none;color:inherit;overflow:hidden;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;-webkit-text-fill-color:transparent;padding-top:10px;padding-right:10px;padding-bottom:10px;padding-left:10px" class="npm__react-simple-code-editor__textarea" disabled="" autoCapitalize="off" autoComplete="off" autoCorrect="off" spellcheck="false" data-gramm="false">minikube stop</textarea><pre aria-hidden="true" style="margin:0;border:0;background:none;box-sizing:inherit;display:inherit;font-family:inherit;font-size:inherit;font-style:inherit;font-variant-ligatures:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;tab-size:inherit;text-indent:inherit;text-rendering:inherit;text-transform:inherit;white-space:pre-wrap;word-break:keep-all;overflow-wrap:break-word;position:relative;pointer-events:none;padding-top:10px;padding-right:10px;padding-bottom:10px;padding-left:10px"><div class="token-line" style="color:#C5C8C6"><span class="token plain">minikube stop</span></div></pre><style type="text/css">
/**
 * Reset the text fill color so that placeholder is visible
 */
.npm__react-simple-code-editor__textarea:empty {
  -webkit-text-fill-color: inherit !important;
}

/**
 * Hack to apply on some CSS on IE10 and IE11
 */
@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {
  /**
    * IE doesn't support '-webkit-text-fill-color'
    * So we use 'color: transparent' to make the text transparent on IE
    * Unlike other browsers, it doesn't affect caret color in IE
    */
  .npm__react-simple-code-editor__textarea {
    color: transparent !important;
  }

  .npm__react-simple-code-editor__textarea::selection {
    background-color: #accef7 !important;
    color: transparent !important;
  }
}
</style></div></div></div></li></ul><h2 id="%E9%81%87%E5%88%B0%E9%97%AE%E9%A2%98%E5%A4%84%E7%90%86" class="heading"><span>遇到问题处理</span><a name="遇到问题处理" href="#%E9%81%87%E5%88%B0%E9%97%AE%E9%A2%98%E5%A4%84%E7%90%86" class="anchor">#</a></h2><ol><li><p><code>kubectl get nodes</code> 报错 <code>The connection to the server 127.0.0.1:55000 was refused - did you specify the right host or port?</code></p><p>解决方法：</p><div class="pre"><div class="playground show"><div style="position:relative;text-align:left;box-sizing:border-box;padding:0;overflow:hidden;white-space:pre;font-family:monospace"><textarea style="margin:0;border:0;background:none;box-sizing:inherit;display:inherit;font-family:inherit;font-size:inherit;font-style:inherit;font-variant-ligatures:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;tab-size:inherit;text-indent:inherit;text-rendering:inherit;text-transform:inherit;white-space:pre-wrap;word-break:keep-all;overflow-wrap:break-word;position:absolute;top:0;left:0;height:100%;width:100%;resize:none;color:inherit;overflow:hidden;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;-webkit-text-fill-color:transparent;padding-top:10px;padding-right:10px;padding-bottom:10px;padding-left:10px" class="npm__react-simple-code-editor__textarea" disabled="" autoCapitalize="off" autoComplete="off" autoCorrect="off" spellcheck="false" data-gramm="false">rm -rf ~/.kube

# 重启 docker desktop

minikube start</textarea><pre aria-hidden="true" style="margin:0;border:0;background:none;box-sizing:inherit;display:inherit;font-family:inherit;font-size:inherit;font-style:inherit;font-variant-ligatures:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;tab-size:inherit;text-indent:inherit;text-rendering:inherit;text-transform:inherit;white-space:pre-wrap;word-break:keep-all;overflow-wrap:break-word;position:relative;pointer-events:none;padding-top:10px;padding-right:10px;padding-bottom:10px;padding-left:10px"><div class="token-line" style="color:#C5C8C6"><span class="token plain">rm </span><span class="token operator" style="color:hsl(40, 90%, 60%)">-</span><span class="token plain">rf </span><span class="token operator" style="color:hsl(40, 90%, 60%)">~</span><span class="token operator" style="color:hsl(40, 90%, 60%)">/</span><span class="token punctuation" style="opacity:0.7">.</span><span class="token plain">kube</span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain"># 重启 docker desktop</span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#C5C8C6"><span class="token plain">minikube start</span></div></pre><style type="text/css">
/**
 * Reset the text fill color so that placeholder is visible
 */
.npm__react-simple-code-editor__textarea:empty {
  -webkit-text-fill-color: inherit !important;
}

/**
 * Hack to apply on some CSS on IE10 and IE11
 */
@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {
  /**
    * IE doesn't support '-webkit-text-fill-color'
    * So we use 'color: transparent' to make the text transparent on IE
    * Unlike other browsers, it doesn't affect caret color in IE
    */
  .npm__react-simple-code-editor__textarea {
    color: transparent !important;
  }

  .npm__react-simple-code-editor__textarea::selection {
    background-color: #accef7 !important;
    color: transparent !important;
  }
}
</style></div></div></div></li></ol><h2 id="%E5%8F%82%E8%80%83" class="heading"><span>参考</span><a name="参考" href="#%E5%8F%82%E8%80%83" class="anchor">#</a></h2><ul><li><a href="http://docs.kubernetes.org.cn/126.html">使用 Minikube 在 Kubernetes 中运行应用</a></li></ul><div class="prev-next-nav"><a class="prev-page" rel="prev" href="/blog/portainer-docker-ui/">← <!-- -->Portainer 搭建 Docker 管理界面</a><a class="next-page" rel="next" href="/blog/flex/">Flex 布局<!-- --> →</a></div></main><footer>© <!-- -->2021<!-- -->, Github<!-- --> <a href="https://github.com/buildGoodWeb/blog">Blog</a></footer></div></div></div></div><script>
  
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'undefined', 'auto', {});
      
      
      
      
      
      }</script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/k8s/";window.webpackCompilationHash="fe4b98b4e443afde89a7";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-aede868c16b590a60b51.js"],"component---node-modules-gatsby-plugin-offline-app-shell-js":["/component---node-modules-gatsby-plugin-offline-app-shell-js-6de38224883efd50a1e7.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js-ad0d66018576bc9befc8.js"],"component---src-templates-blog-list-template-js":["/component---src-templates-blog-list-template-js-7578d8b9e034657e7482.js"],"component---src-pages-404-js":["/component---src-pages-404-js-e51ad6aa676e3d86ad1a.js"]};/*]]>*/</script><script src="/blog/webpack-runtime-e7215cf539a6f354666c.js" async=""></script><script src="/blog/app-aede868c16b590a60b51.js" async=""></script><script src="/blog/commons-f3268c9d7cfa9cf83b38.js" async=""></script><script src="/blog/styles-50947f8f1e6f46efd725.js" async=""></script><script src="/blog/component---src-templates-blog-post-js-ad0d66018576bc9befc8.js" async=""></script></body></html>